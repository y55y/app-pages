import{l as Y,j as e,M as $,G as j,k as p,T as O,P as u,r as R,S as P,V as v,I as T,z as E,B as ee,W as te,N as se,h as ae,R as k,Z as ne,q as _,O as re,m as ie}from"./index-DFDjXJJD.js";import{S as ce,c as z}from"./index-ALGY0T7T.js";import{S as le}from"./SubCard-0Bf-6c11.js";import{d as oe}from"./Search-C_y4mX0P.js";import{d as de,a as he,T as me,v as pe,b as ue,c as xe}from"./EditTwoTone-DxOJeqaa.js";import{d as ge}from"./PrintTwoTone-DfmtsX9A.js";import{F as je,d as fe}from"./AddTwoTone-BHdjCHbx.js";import{T as be}from"./TextField-BVwawPBZ.js";import{I as ye}from"./InputAdornment-D1vT-tQ4.js";import{d as Se}from"./Delete-D8TLCGcN.js";import{T as Ce}from"./TableHead-7OL8RHgI.js";import{b as A,T as ve,a as Pe,c as Te}from"./TableRow-D4HQzkuf.js";import{T as l}from"./TableCell-NOFmK8gn.js";import{C as M}from"./Checkbox-CaFwzK1Y.js";import{A as Ie}from"./Avatar-zdisnoVL.js";import{I as ke}from"./getImageUrl-me2J3vIL.js";import{T as Re}from"./TablePagination-DFv1bStD.js";import{p as De}from"./payment-BmgUzAcL.js";import"./react-apexcharts.min-CI9kGXdJ.js";import"./FormHelperText-DTZ57thw.js";import"./KeyboardArrowRight-CFx6dXm5.js";import"./MenuItem-DLq5gPQU.js";const ze=[{data:z.InvoiceChartCardData1,value:"810",title:"Total Invoice"},{data:z.InvoiceChartCardData2,value:"25,890",title:"Paid"},{data:z.InvoiceChartCardData3,value:"3400",title:"Pending"},{data:z.InvoiceChartCardData4,value:"55,865",title:"Overdue"}],_e=()=>{const{mode:s}=Y();return e.jsx($,{children:e.jsxs(j,{container:!0,alignItems:"center",spacing:2.5,children:[e.jsx(j,{item:!0,xs:12,children:e.jsx(p,{variant:"h4",children:"Overview"})}),ze.map((r,a)=>e.jsx(j,{item:!0,xs:12,sm:6,md:3,children:e.jsx(le,{content:!1,sx:{"& .apexcharts-tooltip-series-group":{bgcolor:s===O.DARK?"background.default":"background.paper"}},children:e.jsx(ce,{type:1,chartData:r.data,value:r.value,title:r.title})})},a))]})})},F=({row:s,setRows:r,id:a})=>{const[n,i]=R.useState(""),o=f=>{const x=f==null?void 0:f.target.value;if(i(x||""),x){const d=s==null?void 0:s.filter(c=>{let b=!0;const y=["id","clientID","amount","date","reference","type","status","company","name"];let I=!1;return y.forEach(S=>{c[S].toString().toLowerCase().includes(x.toString().toLowerCase())&&(I=!0)}),I||(b=!1),b});r(d)}else r(s)};return e.jsxs(P,{direction:{xs:"column",sm:"row"},sx:{p:3},alignItems:"center",justifyContent:"space-between",spacing:2,children:[e.jsx(be,{InputProps:{startAdornment:e.jsx(ye,{position:"start",children:e.jsx(oe,{fontSize:"small"})})},onChange:o,placeholder:"البحث عن سند",value:n,size:"small",sx:{width:{xs:1,sm:"auto"}}}),e.jsxs(P,{direction:"row",alignItems:"center",spacing:1.25,children:[e.jsx(v,{title:"Copy",children:e.jsx(T,{size:"large",children:e.jsx(de,{})})}),e.jsx(v,{title:"Print",children:e.jsx(T,{size:"large",children:e.jsx(ge,{})})}),e.jsx(v,{title:"Filter",children:e.jsx(T,{size:"large",children:e.jsx(he,{})})}),e.jsx(v,{title:"Add Payment",children:e.jsx(je,{color:"primary",size:"small",component:E,to:`/apps/invoice/payment/add-payment/${a}`,sx:{boxShadow:"none",width:32,height:32,minHeight:32},children:e.jsx(fe,{fontSize:"small"})})})]})]})};F.propTypes={row:u.array,setRows:u.func};const Ae=[{id:"id",numeric:!0,label:"الرقم"},{id:"date",numeric:!1,label:"التاريخ"},{id:"name",numeric:!1,label:"اسم الحساب"},{id:"safe",numeric:!1,label:"الخزينة"},{id:"paymentMethod",numeric:!1,label:"طريقة الدفع",align:"center"},{id:"closed",numeric:!1,label:"الحالة",align:"center"},{id:"amount",numeric:!1,label:"المبلغ",align:"right"},{id:"reference",numeric:!1,label:"المرجع",align:"right"}],L=({numSelected:s})=>e.jsx(te,{sx:{p:0,px:1,...s>0&&{color:"secondary.main"}},children:s>0?e.jsxs(P,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:1},children:[e.jsxs(p,{color:"inherit",variant:"h4",children:[s," Selected"]}),e.jsx(v,{title:"Delete",children:e.jsx(T,{size:"large",children:e.jsx(Se,{fontSize:"small"})})})]}):e.jsx(p,{variant:"h6",id:"tableTitle",children:"Payment Records"})});L.propTypes={numSelected:u.number.isRequired};const W=({onSelectAllClick:s,order:r,orderBy:a,numSelected:n,rowCount:i,onRequestSort:o,selected:f})=>{const x=d=>c=>{o(c,d)};return e.jsx(Ce,{children:e.jsxs(A,{children:[e.jsx(l,{padding:"checkbox",sx:{pl:3},children:e.jsx(M,{color:"primary",indeterminate:n>0&&n<i,checked:i>0&&n===i,onChange:s,inputProps:{"aria-label":"select all desserts"}})}),n>0&&e.jsx(l,{padding:"none",colSpan:8,children:e.jsx(L,{numSelected:f.length})}),n<=0&&Ae.map((d,c)=>e.jsx(l,{align:d.align,padding:d.disablePadding?"none":"normal",sortDirection:a===d.id?r:void 0,children:e.jsxs(me,{active:a===d.id,direction:a===d.id?r:void 0,onClick:x(d.id),children:[d.label,a===d.id?e.jsx(ee,{component:"span",sx:pe,children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},c)),n<=0&&e.jsx(l,{sortDirection:!1,align:"center",sx:{pr:3},children:"الإجراءات"})]})})};W.propTypes={selected:u.array,numSelected:u.number.isRequired,onRequestSort:u.func.isRequired,onSelectAllClick:u.func.isRequired,order:u.oneOf(["asc","desc"]).isRequired,orderBy:u.string.isRequired,rowCount:u.number.isRequired};function w(s,r,a){return r[a]<s[a]?-1:r[a]>s[a]?1:0}const qe=(s,r)=>s==="desc"?(a,n)=>w(a,n,r):(a,n)=>-w(a,n,r);function we(s,r){const a=s.map((n,i)=>[n,i]);return a.sort((n,i)=>{const o=r(n[0],i[0]);return o!==0?o:n[1]-i[1]}),a.map(n=>n[0])}const H=({rows:s=[],setRows:r})=>{const a=se();R.useState(null),R.useState(!1);const n=ae();let i;const[o,f]=k.useState("desc"),[x,d]=k.useState("id"),[c,b]=k.useState([]),[y,I]=k.useState(0),[S,N]=k.useState(10),V=(t,m)=>{f(x===m&&o==="asc"?"desc":"asc"),d(m)},G=t=>{if(t.target.checked){if(c.length>0)b([]);else{const m=s.map(h=>h.name);b(m)}return}b([])},D=(t,m)=>{const h=c.indexOf(m);let g=[];h===-1?g=g.concat(c,m):h===0?g=g.concat(c.slice(1)):h===c.length-1?g=g.concat(c.slice(0,-1)):h>0&&(g=g.concat(c.slice(0,h),c.slice(h+1))),b(g)},K=(t,m)=>{I(m)},U=t=>{t!=null&&t.target.value&&N(parseInt(t==null?void 0:t.target.value,10)),I(0)},Q=t=>c.indexOf(t)!==-1,q=y>0?Math.max(0,(1+y)*S-s.length):0,Z=t=>{switch(t){case!1:return{closedlabel:"مسودة",closedcolor:"black",closedchipcolor:_("#D3D3D3",.3)};case!0:return{closedlabel:"مكتمل",closedcolor:"success.dark",closedchipcolor:_(n.palette.success.light,.5)};default:return{closedlabel:"مسودة",closedcolor:"black",closedchipcolor:_("#D3D3D3",.3)}}};return e.jsxs(e.Fragment,{children:[e.jsx(ve,{children:e.jsxs(Pe,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[e.jsx(W,{numSelected:c.length,order:o,orderBy:x,onSelectAllClick:G,onRequestSort:V,rowCount:s.length,selected:c}),e.jsxs(Te,{children:[we(s,qe(o,x)).slice(y*S,y*S+S).map((t,m)=>{if(typeof t=="number")return null;const h=Q(t.name),g=`enhanced-table-checkbox-${m}`,{closedlabel:B,closedcolor:J,closedchipcolor:X}=Z(t.closed);return e.jsxs(A,{hover:!0,role:"checkbox","aria-checked":h,tabIndex:-1,selected:h,children:[e.jsx(l,{padding:"checkbox",sx:{pl:3},onClick:C=>D(C,t.account_name),children:e.jsx(M,{color:"primary",checked:h,inputProps:{"aria-labelledby":g}})}),e.jsx(l,{onClick:C=>D(C,t.account_name),sx:{cursor:"pointer"},children:e.jsxs(p,{variant:"h5",children:["#",t.sandNo]})}),e.jsx(l,{children:e.jsx(p,{children:t.date})}),e.jsx(l,{onClick:C=>D(C,t.account_name),sx:{cursor:"pointer"},children:e.jsxs(j,{container:!0,spacing:1.25,alignItems:"center",children:[e.jsx(j,{item:!0,children:e.jsx(Ie,{alt:"User 1",src:(t.avatar,ke.USERS)})}),e.jsxs(j,{item:!0,xs:!0,zeroMinWidth:!0,children:[e.jsxs(P,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(p,{variant:"h5",noWrap:!0,children:t.account_name}),i]}),e.jsx(p,{variant:"subtitle2",children:t.account})]})]})}),e.jsx(l,{onClick:C=>D(C,t.account_name),sx:{cursor:"pointer"},children:e.jsx(j,{container:!0,spacing:1.25,alignItems:"center",children:e.jsxs(j,{item:!0,xs:!0,zeroMinWidth:!0,children:[e.jsxs(P,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(p,{variant:"h5",noWrap:!0,children:t.safe_name}),i]}),e.jsx(p,{variant:"subtitle2",children:t.safe_acc})]})})}),e.jsx(l,{align:"center",children:e.jsx(p,{variant:"h5",children:t.PaymentMethod})}),e.jsx(l,{align:"center",children:e.jsx(ne,{label:B,size:"small",sx:{bgcolor:n.palette.mode===O.DARK?"dark.main":X,color:J,cursor:"pointer"}})}),e.jsx(l,{align:"right",children:e.jsx(p,{variant:"h5",children:t.amount})}),e.jsx(l,{align:"right",children:e.jsx(p,{variant:"h5",children:t.reference})}),e.jsx(l,{align:"center",sx:{pr:3},children:e.jsxs(P,{direction:"row",alignItems:"center",spacing:1,justifyContent:"center",children:[e.jsx(v,{title:"View",children:e.jsx(T,{color:"primary",size:"small","aria-label":"View",component:E,to:`/apps/invoice/payment/payment-details/${t.id}`,children:e.jsx(ue,{sx:{fontSize:"1.3rem"}})})}),e.jsx(v,{title:"Edit",children:e.jsx(T,{color:"secondary",size:"small","aria-label":"Edit",onClick:()=>a(`/apps/invoice/payment/payment-edit/${t.id}`),children:e.jsx(xe,{sx:{fontSize:"1.3rem"}})})})]})})]},m)}),q>0&&e.jsx(A,{sx:{height:53*q},children:e.jsx(l,{colSpan:9})})]})]})}),e.jsx(Re,{rowsPerPageOptions:[10,25],component:"div",count:s.length,rowsPerPage:S,page:y,onPageChange:K,onRowsPerPageChange:U})]})};H.propTypes={rows:u.array,setRows:u.func.isRequired};const at=()=>{const{id:s}=re(),[r,a]=R.useState([]);return R.useEffect(()=>{(async()=>{try{const i=await De();if(console.log("Fetched payments:",i),s){const o=parseInt(s,10);if(o>=1&&o<=5){const f=i.payments.filter(x=>x.type===o);a(f)}else a([])}else a(i)}catch(i){console.error("Error fetching payments:",i),a([])}})()},[s]),e.jsxs(j,{container:!0,spacing:ie,children:[e.jsx(j,{item:!0,xs:12,children:e.jsx(_e,{})}),e.jsx(j,{item:!0,xs:12,children:e.jsxs($,{content:!1,children:[e.jsx(F,{row:r,setRows:a,id:s}),e.jsx(H,{rows:r})]})})]})};export{at as default};
