import{r as x,j as d,a4 as te,a5 as Zs,R as Ee,a6 as hd,a7 as Zt,a8 as Hp,a9 as Vp,aa as Wp,ab as Up,ac as _n,ad as qp,ae as pd,af as Yp,ag as Ia,ah as Kp,ai as md,aj as So,a as Aa,g as Pa,s as en,ak as Gp,_ as ft,u as Ra,b as ja,al as Jp,am as Qp,an as Xp,c as eo,d as La,ao as Zp,ap as em,aq as K,U as oc,P as se,B as $e,G as W,m as tm,I as Dr,ar as nm,as as gd,f as Fa,i as $a,k as dt,S as yd,n as Qe,$ as xd,a0 as bd,at as rm,a1 as sm,N as vd,h as om,X as im,Y as am,au as lm,O as cm,av as um,M as dm}from"./index-aLGb3jn2.js";import{r as Q,t as G,c as Oe,d as Ba,e as Rr,h as Bi,i as sn,j as fm,k as _i,l as wd,m as hm,n as pm,o as Cd,p as ic,q as mm,v as ac,w as gm,x as ym,f as Zr,u as kd,C as Ce,y as xm,b as Mo,z as lc,F as bm}from"./index-CPHiBFi5.js";import{a as vm,b as wm,e as Cm,f as cc,h as km}from"./invoice-BjcP-Ks-.js";import{g as zi}from"./fetchdata-BVhae-Sj.js";import{T as we,S as Hi}from"./TextField-DmYAvsu5.js";import{A as Vi}from"./AutocompleteSearch-GJnBJtIN.js";import{F as Sm,a as dn,I as Wi}from"./FormHelperText-DSN7KoA_.js";import{A as Sd,d as Ui,a as _a}from"./ag-theme-alpine-ecOj3Hkp.js";import Mm from"./AddItem-BKZF-3ZK.js";import Tm from"./EditItem-D7IiFvA7.js";import{D as tr,a as nr,b as gs}from"./DialogContent-DOLakJo1.js";import{D as rr}from"./DialogTitle-BOxhjpgh.js";import{d as Dm}from"./Search-BPLgMnKj.js";import{d as Em}from"./Delete-BmAR60cq.js";import{I as es}from"./InputAdornment-ZDCZgk70.js";import{M as qi}from"./MenuItem-E4UeQKVO.js";import{g as Om}from"./item-Db8MTmDh.js";import{A as Nm}from"./AutocompleteEditor-D9SUeWYi.js";import{R as Im,a as uc}from"./RadioGroup-CN2xqUiT.js";import{F as dc}from"./FormControlLabel-B_DYhieH.js";import{s as Am,c as Pm}from"./payment-D-H91Em9.js";import{L as za,D as Ha}from"./DatePicker-DJ92TSDt.js";import{_ as Md}from"./typeof-QjJsDpFa.js";import{t as Td,D as Rm}from"./DataGrid-BRFOsmUh.js";import{C as Va}from"./CircularProgress-BMwP3mXy.js";import{A as jm}from"./Autocomplete-DQY59Bm2.js";import{M as Lm}from"./MessageSnackbar-Del1lRT9.js";import{D as Fm}from"./DeleteComponent-DKC1pKV5.js";import"./InputFileUpload-dTX6MlY5.js";import"./formik.esm-DbuH-Hoc.js";import"./CardMedia-BZDSfJ4B.js";import"./Tabs-CGOWVq8E.js";import"./KeyboardArrowRight-BlHJQliR.js";import"./Checkbox-CwtUmqz0.js";import"./ListItem-Cf54SQb2.js";import"./Skeleton-BvzZx4MC.js";import"./TablePagination-DMgjs3Vx.js";import"./TableCell-Xf62W0pa.js";import"./DialogContentText-i0ZblITF.js";function $m(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function ys(n){return Object.keys(n).reduce((e,t)=>(n[t]!==void 0&&(e[t]=n[t]),e),{})}function Dd(n){return typeof n=="number"?!0:typeof n=="string"?n.startsWith("calc(")||n.startsWith("var(")||n.includes(" ")&&n.trim()!==""?!0:/[0-9]/.test(n.trim().replace("-","")[0]):!1}function To(n){return Array.isArray(n)||n===null?!1:typeof n=="object"?n.type!==x.Fragment:!1}function Ed(n){const e=x.createContext(null);return[({children:s,value:o})=>d.jsx(e.Provider,{value:o,children:s}),()=>{const s=x.useContext(e);if(s===null)throw new Error(n);return s}]}function Od(n=null){const e=x.createContext(n);return[({children:s,value:o})=>d.jsx(e.Provider,{value:o,children:s}),()=>x.useContext(e)]}const Bm={app:100,modal:200,popover:300,overlay:400,max:9999};function Wa(n){return Bm[n]}const _m=()=>{};function zm(n,e={active:!0}){return typeof n!="function"||!e.active?e.onKeyDown||_m:t=>{var r;t.key==="Escape"&&(n(t),(r=e.onTrigger)==null||r.call(e))}}function nt(n,e="size",t=!0){if(n!==void 0)return Dd(n)?t?te(n):n:`var(--${e}-${n})`}function Et(n){return nt(n,"mantine-spacing")}function sr(n){return n===void 0?"var(--mantine-radius-default)":nt(n,"mantine-radius")}function Yt(n){return nt(n,"mantine-font-size")}function Hm(n){if(n)return nt(n,"mantine-shadow",!1)}function Vm(n,e){return n in e.breakpoints?Zs(e.breakpoints[n]):Zs(n)}function Wm(n,e){const t=n.map(r=>({value:r,px:Vm(r,e)}));return t.sort((r,s)=>r.px-s.px),t}function wr(n){return typeof n=="object"&&n!==null?"base"in n?n.base:void 0:n}function to(n,e,t){return e===void 0&&t===void 0?n:e!==void 0&&t===void 0?Math.max(n,e):Math.min(e===void 0&&t!==void 0?n:Math.max(n,e),t)}function Nd(){return`mantine-${Math.random().toString(36).slice(2,11)}`}const fc=["mousedown","touchstart"];function Um(n,e,t){const r=x.useRef();return x.useEffect(()=>{const s=o=>{const{target:i}=o??{};if(Array.isArray(t)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";t.every(c=>!!c&&!o.composedPath().includes(c))&&!a&&n()}else r.current&&!r.current.contains(i)&&n()};return(e||fc).forEach(o=>document.addEventListener(o,s)),()=>{(e||fc).forEach(o=>document.removeEventListener(o,s))}},[r,n,t]),r}function qm(n,e){try{return n.addEventListener("change",e),()=>n.removeEventListener("change",e)}catch{return n.addListener(e),()=>n.removeListener(e)}}function Ym(n,e){return typeof e=="boolean"?e:typeof window<"u"&&"matchMedia"in window?window.matchMedia(n).matches:!1}function Km(n,e,{getInitialValueInEffect:t}={getInitialValueInEffect:!0}){const[r,s]=x.useState(t?e:Ym(n)),o=x.useRef();return x.useEffect(()=>{if("matchMedia"in window)return o.current=window.matchMedia(n),s(o.current.matches),qm(o.current,i=>s(i.matches))},[n]),r}function Ht(n,e){const t=x.useRef(!1);x.useEffect(()=>()=>{t.current=!1},[]),x.useEffect(()=>{if(t.current)return n();t.current=!0},e)}function Gm({opened:n,shouldReturnFocus:e=!0}){const t=x.useRef(),r=()=>{var s;t.current&&"focus"in t.current&&typeof t.current.focus=="function"&&((s=t.current)==null||s.focus({preventScroll:!0}))};return Ht(()=>{let s=-1;const o=i=>{i.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",o),n?t.current=document.activeElement:e&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",o)}},[n,e]),r}function Jm(n,e="body > :not(script)"){const t=Nd(),r=Array.from(document.querySelectorAll(e)).map(s=>{var l;if((l=s==null?void 0:s.shadowRoot)!=null&&l.contains(n)||s.contains(n))return;const o=s.getAttribute("aria-hidden"),i=s.getAttribute("data-hidden"),a=s.getAttribute("data-focus-id");return s.setAttribute("data-focus-id",t),o===null||o==="false"?s.setAttribute("aria-hidden","true"):!i&&!a&&s.setAttribute("data-hidden",o),{node:s,ariaHidden:i||null}});return()=>{r.forEach(s=>{!s||t!==s.node.getAttribute("data-focus-id")||(s.ariaHidden===null?s.node.removeAttribute("aria-hidden"):s.node.setAttribute("aria-hidden",s.ariaHidden),s.node.removeAttribute("data-focus-id"),s.node.removeAttribute("data-hidden"))})}}const Qm=/input|select|textarea|button|object/,Id="a, input, select, textarea, button, object, [tabindex]";function Xm(n){return n.style.display==="none"}function Zm(n){if(n.getAttribute("aria-hidden")||n.getAttribute("hidden")||n.getAttribute("type")==="hidden")return!1;let t=n;for(;t&&!(t===document.body||t.nodeType===11);){if(Xm(t))return!1;t=t.parentNode}return!0}function Ad(n){let e=n.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Yi(n){const e=n.nodeName.toLowerCase(),t=!Number.isNaN(Ad(n));return(Qm.test(e)&&!n.disabled||n instanceof HTMLAnchorElement&&n.href||t)&&Zm(n)}function Pd(n){const e=Ad(n);return(Number.isNaN(e)||e>=0)&&Yi(n)}function eg(n){return Array.from(n.querySelectorAll(Id)).filter(Pd)}function tg(n,e){const t=eg(n);if(!t.length){e.preventDefault();return}const r=t[e.shiftKey?0:t.length-1],s=n.getRootNode();let o=r===s.activeElement||n===s.activeElement;const i=s.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(o=t.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===i.getAttribute("name")).includes(r)),!o)return;e.preventDefault();const l=t[e.shiftKey?t.length-1:0];l&&l.focus()}function ng(n=!0){const e=x.useRef(),t=x.useRef(null),r=o=>{let i=o.querySelector("[data-autofocus]");if(!i){const a=Array.from(o.querySelectorAll(Id));i=a.find(Pd)||a.find(Yi)||null,!i&&Yi(o)&&(i=o)}i&&i.focus({preventScroll:!0})},s=x.useCallback(o=>{if(n){if(o===null){t.current&&(t.current(),t.current=null);return}t.current=Jm(o),e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&r(o)}),e.current=o):e.current=null)}},[n]);return x.useEffect(()=>{if(!n)return;e.current&&setTimeout(()=>r(e.current));const o=i=>{i.key==="Tab"&&e.current&&tg(e.current,i)};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o),t.current&&t.current()}},[n]),s}const rg=Ee.useId||(()=>{});function sg(){const n=rg();return n?`mantine-${n.replace(/:/g,"")}`:""}function Ua(n){const e=sg(),[t,r]=x.useState(e);return hd(()=>{r(Nd())},[]),typeof n=="string"?n:typeof window>"u"?e:t}function og(n,e,t){x.useEffect(()=>(window.addEventListener(n,e,t),()=>window.removeEventListener(n,e,t)),[n,e])}function Rd(n,e){typeof n=="function"?n(e):typeof n=="object"&&n!==null&&"current"in n&&(n.current=e)}function ig(...n){return e=>{n.forEach(t=>Rd(t,e))}}function jr(...n){return x.useCallback(ig(...n),n)}function jd(n){return{x:to(n.x,0,1),y:to(n.y,0,1)}}function Ld(n,e,t="ltr"){const r=x.useRef(null),s=x.useRef(!1),o=x.useRef(!1),i=x.useRef(0),[a,l]=x.useState(!1);return x.useEffect(()=>{s.current=!0},[]),x.useEffect(()=>{var v,w;const c=({x:k,y:M})=>{cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{if(s.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const T=to((k-C.left)/C.width,0,1);n({x:t==="ltr"?T:1-T,y:to((M-C.top)/C.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",p),document.addEventListener("touchmove",b),document.addEventListener("touchend",p)},f=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",p)},h=()=>{!o.current&&s.current&&(o.current=!0,typeof(e==null?void 0:e.onScrubStart)=="function"&&e.onScrubStart(),l(!0),u())},p=()=>{o.current&&s.current&&(o.current=!1,l(!1),f(),setTimeout(()=>{typeof(e==null?void 0:e.onScrubEnd)=="function"&&e.onScrubEnd()},0))},m=k=>{h(),k.preventDefault(),g(k)},g=k=>c({x:k.clientX,y:k.clientY}),y=k=>{k.cancelable&&k.preventDefault(),h(),b(k)},b=k=>{k.cancelable&&k.preventDefault(),c({x:k.changedTouches[0].clientX,y:k.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",m),(w=r.current)==null||w.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",m),r.current.removeEventListener("touchstart",y))}},[t,n]),{ref:r,active:a}}function Fd({value:n,defaultValue:e,finalValue:t,onChange:r=()=>{}}){const[s,o]=x.useState(e!==void 0?e:t),i=(a,...l)=>{o(a),r==null||r(a,...l)};return n!==void 0?[n,r,!0]:[s,i,!1]}function ag(n,e){return Km("(prefers-reduced-motion: reduce)",n,e)}function lg(n){return e=>{if(!e)n(e);else if(typeof e=="function")n(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:t}=e;t.type==="checkbox"?n(t.checked):n(t.value)}else n(e)}}function cg(n){const[e,t]=x.useState(n);return[e,lg(t)]}function $d(n=!1,e){const{onOpen:t,onClose:r}=e||{},[s,o]=x.useState(n),i=x.useCallback(()=>{o(c=>c||(t==null||t(),!0))},[t]),a=x.useCallback(()=>{o(c=>c&&(r==null||r(),!1))},[r]),l=x.useCallback(()=>{s?a():i()},[a,i,s]);return[s,{open:i,close:a,toggle:l}]}function Bd(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Bd(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function tn(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Bd(n))&&(r&&(r+=" "),r+=e);return r}const ug={};function dg(n){const e={};return n.forEach(t=>{Object.entries(t).forEach(([r,s])=>{e[r]?e[r]=tn(e[r],s):e[r]=s})}),e}function Do({theme:n,classNames:e,props:t,stylesCtx:r}){const o=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(n,t,r):i||ug);return dg(o)}function no({theme:n,styles:e,props:t,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((o,i)=>typeof i=="function"?{...o,...i(n,t,r)}:{...o,...i},{})}function fg({classNames:n,styles:e,props:t,stylesCtx:r}){const s=Zt();return{resolvedClassNames:Do({theme:s,classNames:n,props:t,stylesCtx:r||void 0}),resolvedStyles:no({theme:s,styles:e,props:t,stylesCtx:r||void 0})}}const hg={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function pg({theme:n,options:e,unstyled:t}){return tn((e==null?void 0:e.focusable)&&!t&&(n.focusClassName||hg[n.focusRing]),(e==null?void 0:e.active)&&!t&&n.activeClassName)}function mg({selector:n,stylesCtx:e,options:t,props:r,theme:s}){return Do({theme:s,classNames:t==null?void 0:t.classNames,props:(t==null?void 0:t.props)||r,stylesCtx:e})[n]}function hc({selector:n,stylesCtx:e,theme:t,classNames:r,props:s}){return Do({theme:t,classNames:r,props:s,stylesCtx:e})[n]}function gg({rootSelector:n,selector:e,className:t}){return n===e?t:void 0}function yg({selector:n,classes:e,unstyled:t}){return t?void 0:e[n]}function xg({themeName:n,classNamesPrefix:e,selector:t,withStaticClass:r}){return r===!1?[]:n.map(s=>`${e}-${s}-${t}`)}function bg({themeName:n,theme:e,selector:t,props:r,stylesCtx:s}){return n.map(o=>{var i,a;return(a=Do({theme:e,classNames:(i=e.components[o])==null?void 0:i.classNames,props:r,stylesCtx:s}))==null?void 0:a[t]})}function vg({options:n,classes:e,selector:t,unstyled:r}){return n!=null&&n.variant&&!r?e[`${t}--${n.variant}`]:void 0}function wg({theme:n,options:e,themeName:t,selector:r,classNamesPrefix:s,classNames:o,classes:i,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:h,headless:p,transformedStyles:m}){return tn(pg({theme:n,options:e,unstyled:a||p}),bg({theme:n,themeName:t,selector:r,props:u,stylesCtx:f}),vg({options:e,classes:i,selector:r,unstyled:a}),hc({selector:r,stylesCtx:f,theme:n,classNames:o,props:u}),hc({selector:r,stylesCtx:f,theme:n,classNames:m,props:u}),mg({selector:r,stylesCtx:f,options:e,props:u,theme:n}),gg({rootSelector:c,selector:r,className:l}),yg({selector:r,classes:i,unstyled:a||p}),h&&!p&&xg({themeName:t,classNamesPrefix:s,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function Cg({theme:n,themeName:e,props:t,stylesCtx:r,selector:s}){return e.map(o=>{var i;return no({theme:n,styles:(i=n.components[o])==null?void 0:i.styles,props:t,stylesCtx:r})[s]}).reduce((o,i)=>({...o,...i}),{})}function Ki({style:n,theme:e}){return Array.isArray(n)?[...n].reduce((t,r)=>({...t,...Ki({style:r,theme:e})}),{}):typeof n=="function"?n(e):n??{}}function kg(n){return n.reduce((e,t)=>(t&&Object.keys(t).forEach(r=>{e[r]={...e[r],...ys(t[r])}}),e),{})}function Sg({vars:n,varsResolver:e,theme:t,props:r,stylesCtx:s,selector:o,themeName:i,headless:a}){var l;return(l=kg([a?{}:e==null?void 0:e(t,r,s),...i.map(c=>{var u,f,h;return(h=(f=(u=t.components)==null?void 0:u[c])==null?void 0:f.vars)==null?void 0:h.call(f,t,r,s)}),n==null?void 0:n(t,r,s)]))==null?void 0:l[o]}function Mg({theme:n,themeName:e,selector:t,options:r,props:s,stylesCtx:o,rootSelector:i,styles:a,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:h}){return{...!h&&Cg({theme:n,themeName:e,props:s,stylesCtx:o,selector:t}),...!h&&no({theme:n,styles:a,props:s,stylesCtx:o})[t],...!h&&no({theme:n,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:o})[t],...Sg({theme:n,props:s,stylesCtx:o,vars:c,varsResolver:u,selector:t,themeName:e,headless:f}),...i===t?Ki({style:l,theme:n}):null,...Ki({style:r==null?void 0:r.style,theme:n})}}function Tg({props:n,stylesCtx:e,themeName:t}){var i;const r=Zt(),s=(i=Hp())==null?void 0:i();return{getTransformedStyles:a=>s?[...a.map(c=>s(c,{props:n,theme:r,ctx:e})),...t.map(c=>{var u;return s((u=r.components[c])==null?void 0:u.styles,{props:n,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!s}}function Ae({name:n,classes:e,props:t,stylesCtx:r,className:s,style:o,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:f}){const h=Zt(),p=Vp(),m=Wp(),g=Up(),y=(Array.isArray(n)?n:[n]).filter(w=>w),{withStylesTransform:b,getTransformedStyles:v}=Tg({props:t,stylesCtx:r,themeName:y});return(w,k)=>({className:wg({theme:h,options:k,themeName:y,selector:w,classNamesPrefix:p,classNames:l,classes:e,unstyled:a,className:s,rootSelector:i,props:t,stylesCtx:r,withStaticClasses:m,headless:g,transformedStyles:v([k==null?void 0:k.styles,c])}),style:Mg({theme:h,themeName:y,selector:w,options:k,props:t,stylesCtx:r,rootSelector:i,styles:c,style:o,vars:u,varsResolver:f,headless:g,withStylesTransform:b})})}function ie(n,e,t){var i;const r=Zt(),s=(i=r.components[n])==null?void 0:i.defaultProps,o=typeof s=="function"?s(r):s;return{...e,...o,...ys(t)}}function ri(n){return _n(n).reduce((e,t)=>n[t]!==void 0?`${e}${$m(t)}:${n[t]};`:e,"").trim()}function Dg({selector:n,styles:e,media:t,container:r}){const s=e?ri(e):"",o=Array.isArray(t)?t.map(a=>`@media${a.query}{${n}{${ri(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${n}{${ri(a.styles)}}}`):[];return`${s?`${n}{${s}}`:""}${o.join("")}${i.join("")}`.trim()}function qa(n){const e=qp();return d.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:Dg(n)}})}function Ya(n){const{m:e,mx:t,my:r,mt:s,mb:o,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:h,pt:p,pb:m,pl:g,pr:y,pe:b,ps:v,bd:w,bg:k,c:M,opacity:C,ff:T,fz:E,fw:N,lts:F,ta:z,lh:V,fs:B,tt:D,td:P,w:R,miw:A,maw:_,h:Y,mih:$,mah:O,bgsz:ae,bgp:ve,bgr:De,bga:J,pos:ee,top:oe,left:fe,bottom:re,right:pe,inset:yt,display:Mt,flex:He,hiddenFrom:je,visibleFrom:rn,lightHidden:Wr,darkHidden:ar,sx:lr,...cr}=n;return{styleProps:ys({m:e,mx:t,my:r,mt:s,mb:o,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:h,pt:p,pb:m,pl:g,pr:y,pe:b,ps:v,bd:w,bg:k,c:M,opacity:C,ff:T,fz:E,fw:N,lts:F,ta:z,lh:V,fs:B,tt:D,td:P,w:R,miw:A,maw:_,h:Y,mih:$,mah:O,bgsz:ae,bgp:ve,bgr:De,bga:J,pos:ee,top:oe,left:fe,bottom:re,right:pe,inset:yt,display:Mt,flex:He,hiddenFrom:je,visibleFrom:rn,lightHidden:Wr,darkHidden:ar,sx:lr}),rest:cr}}const Eg={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Ka(n,e){const t=pd({color:n,theme:e});return t.color==="dimmed"?"var(--mantine-color-dimmed)":t.color==="bright"?"var(--mantine-color-bright)":t.variable?`var(${t.variable})`:t.color}function Og(n,e){const t=pd({color:n,theme:e});return t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-text)`:Ka(n,e)}function Ng(n,e){if(typeof n=="number")return te(n);if(typeof n=="string"){const[t,r,...s]=n.split(" ").filter(i=>i.trim()!=="");let o=`${te(t)}`;return r&&(o+=` ${r}`),s.length>0&&(o+=` ${Ka(s.join(" "),e)}`),o.trim()}return n}const pc={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Ig(n){return typeof n=="string"&&n in pc?pc[n]:n}const Ag=["h1","h2","h3","h4","h5","h6"];function Pg(n,e){return typeof n=="string"&&n in e.fontSizes?`var(--mantine-font-size-${n})`:typeof n=="string"&&Ag.includes(n)?`var(--mantine-${n}-font-size)`:typeof n=="number"?te(n):typeof n=="string"?te(n):n}function Rg(n){return n}const jg=["h1","h2","h3","h4","h5","h6"];function Lg(n,e){return typeof n=="string"&&n in e.lineHeights?`var(--mantine-line-height-${n})`:typeof n=="string"&&jg.includes(n)?`var(--mantine-${n}-line-height)`:n}function Fg(n){return typeof n=="number"?te(n):n}function $g(n,e){if(typeof n=="number")return te(n);if(typeof n=="string"){const t=n.replace("-","");if(!(t in e.spacing))return te(n);const r=`--mantine-spacing-${t}`;return n.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return n}const si={color:Ka,textColor:Og,fontSize:Pg,spacing:$g,identity:Rg,size:Fg,lineHeight:Lg,fontFamily:Ig,border:Ng};function mc(n){return n.replace("(min-width: ","").replace("em)","")}function Bg({media:n,...e}){const r=Object.keys(n).sort((s,o)=>Number(mc(s))-Number(mc(o))).map(s=>({query:s,styles:n[s]}));return{...e,media:r}}function _g(n){if(typeof n!="object"||n===null)return!1;const e=Object.keys(n);return!(e.length===1&&e[0]==="base")}function zg(n){return typeof n=="object"&&n!==null?"base"in n?n.base:void 0:n}function Hg(n){return typeof n=="object"&&n!==null?_n(n).filter(e=>e!=="base"):[]}function Vg(n,e){return typeof n=="object"&&n!==null&&e in n?n[e]:n}function Wg({styleProps:n,data:e,theme:t}){return Bg(_n(n).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return r;const o=e[s],i=Array.isArray(o.property)?o.property:[o.property],a=zg(n[s]);if(!_g(n[s]))return i.forEach(c=>{r.inlineStyles[c]=si[o.type](a,t)}),r;r.hasResponsiveStyles=!0;const l=Hg(n[s]);return i.forEach(c=>{a&&(r.styles[c]=si[o.type](a,t)),l.forEach(u=>{const f=`(min-width: ${t.breakpoints[u]})`;r.media[f]={...r.media[f],[c]:si[o.type](Vg(n[s],u),t)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function _d(){return`__m__-${x.useId().replace(/:/g,"")}`}function zd(n,e){return Array.isArray(n)?[...n].reduce((t,r)=>({...t,...zd(r,e)}),{}):typeof n=="function"?n(e):n??{}}function Hd(n){return n.startsWith("data-")?n:`data-${n}`}function Ug(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return r===void 0||r===""||r===!1||r===null||(e[Hd(t)]=n[t]),e},{})}function Vd(n){return n?typeof n=="string"?{[Hd(n)]:!0}:Array.isArray(n)?[...n].reduce((e,t)=>({...e,...Vd(t)}),{}):Ug(n):null}function Gi(n,e){return Array.isArray(n)?[...n].reduce((t,r)=>({...t,...Gi(r,e)}),{}):typeof n=="function"?n(e):n??{}}function qg({theme:n,style:e,vars:t,styleProps:r}){const s=Gi(e,n),o=Gi(t,n);return{...s,...o,...r}}const Wd=x.forwardRef(({component:n,style:e,__vars:t,className:r,variant:s,mod:o,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:h,...p},m)=>{var E;const g=Zt(),y=n||"div",{styleProps:b,rest:v}=Ya(p),w=Yp(),k=(E=w==null?void 0:w())==null?void 0:E(b.sx),M=_d(),C=Wg({styleProps:b,theme:g,data:Eg}),T={ref:m,style:qg({theme:g,style:e,vars:t,styleProps:C.inlineStyles}),className:tn(r,k,{[M]:C.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":s,"data-size":Dd(i)?void 0:i||void 0,size:h,...Vd(o),...v};return d.jsxs(d.Fragment,{children:[C.hasResponsiveStyles&&d.jsx(qa,{selector:`.${M}`,styles:C.styles,media:C.media}),typeof f=="function"?f(T):d.jsx(y,{...T})]})});Wd.displayName="@mantine/core/Box";const ue=Wd;function Ud(n){return n}function Ne(n){const e=x.forwardRef(n);return e.extend=Ud,e.withProps=t=>{const r=x.forwardRef((s,o)=>d.jsx(e,{...t,...s,ref:o}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Lr(n){const e=x.forwardRef(n);return e.withProps=t=>{const r=x.forwardRef((s,o)=>d.jsx(e,{...t,...s,ref:o}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=Ud,e}const Yg=x.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ga(){return x.useContext(Yg)}var qd={root:"m_87cf2631"};const Kg={__staticSelector:"UnstyledButton"},Fr=Lr((n,e)=>{const t=ie("UnstyledButton",Kg,n),{className:r,component:s="button",__staticSelector:o,unstyled:i,classNames:a,styles:l,style:c,...u}=t,f=Ae({name:o,props:t,classes:qd,className:r,style:c,classNames:a,styles:l,unstyled:i});return d.jsx(ue,{...f("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...u})});Fr.classes=qd;Fr.displayName="@mantine/core/UnstyledButton";var Yd={root:"m_515a97f8"};const Gg={},Ja=Ne((n,e)=>{const t=ie("VisuallyHidden",Gg,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,...c}=t,u=Ae({name:"VisuallyHidden",classes:Yd,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a});return d.jsx(ue,{component:"span",ref:e,...u("root"),...c})});Ja.classes=Yd;Ja.displayName="@mantine/core/VisuallyHidden";function $r(n){return Kd(n)?(n.nodeName||"").toLowerCase():"#document"}function it(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function nn(n){var e;return(e=(Kd(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Kd(n){return n instanceof Node||n instanceof it(n).Node}function Ie(n){return n instanceof Element||n instanceof it(n).Element}function mt(n){return n instanceof HTMLElement||n instanceof it(n).HTMLElement}function Ji(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof it(n).ShadowRoot}function xs(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Ct(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function Jg(n){return["table","td","th"].includes($r(n))}function Eo(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Qa(n){const e=Xa(),t=Ie(n)?Ct(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Qg(n){let e=Jt(n);for(;mt(e)&&!Cn(e);){if(Qa(e))return e;if(Eo(e))return null;e=Jt(e)}return null}function Xa(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cn(n){return["html","body","#document"].includes($r(n))}function Ct(n){return it(n).getComputedStyle(n)}function Oo(n){return Ie(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Jt(n){if($r(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Ji(n)&&n.host||nn(n);return Ji(e)?e.host:e}function Gd(n){const e=Jt(n);return Cn(e)?n.ownerDocument?n.ownerDocument.body:n.body:mt(e)&&xs(e)?e:Gd(e)}function Kt(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Gd(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),i=it(s);return o?e.concat(i,i.visualViewport||[],xs(s)?s:[],i.frameElement&&t?Kt(i.frameElement):[]):e.concat(s,Kt(s,[],t))}function gc(n){let e=n.activeElement;for(;((t=e)==null||(t=t.shadowRoot)==null?void 0:t.activeElement)!=null;){var t;e=e.shadowRoot.activeElement}return e}function as(n,e){if(!n||!e)return!1;const t=e.getRootNode==null?void 0:e.getRootNode();if(n.contains(e))return!0;if(t&&Ji(t)){let r=e;for(;r;){if(n===r)return!0;r=r.parentNode||r.host}}return!1}function Jd(){const n=navigator.userAgentData;return n!=null&&n.platform?n.platform:navigator.platform}function Qd(){const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?n.brands.map(e=>{let{brand:t,version:r}=e;return t+"/"+r}).join(" "):navigator.userAgent}function Xg(n){return ty()?!1:!yc()&&n.width===0&&n.height===0||yc()&&n.width===1&&n.height===1&&n.pressure===0&&n.detail===0&&n.pointerType==="mouse"||n.width<1&&n.height<1&&n.pressure===0&&n.detail===0&&n.pointerType==="touch"}function Zg(){return/apple/i.test(navigator.vendor)}function yc(){const n=/android/i;return n.test(Jd())||n.test(Qd())}function ey(){return Jd().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function ty(){return Qd().includes("jsdom/")}function Qi(n,e){const t=["mouse","pen"];return e||t.push("",void 0),t.includes(n)}function ny(n){return"nativeEvent"in n}function ry(n){return n.matches("html,body")}function Ln(n){return(n==null?void 0:n.ownerDocument)||document}function oi(n,e){if(e==null)return!1;if("composedPath"in n)return n.composedPath().includes(e);const t=n;return t.target!=null&&e.contains(t.target)}function mr(n){return"composedPath"in n?n.composedPath()[0]:n.target}const sy="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function oy(n){return mt(n)&&n.matches(sy)}const pt=Math.min,Ze=Math.max,ro=Math.round,Ds=Math.floor,kn=n=>({x:n,y:n}),iy={left:"right",right:"left",bottom:"top",top:"bottom"},ay={start:"end",end:"start"};function Xi(n,e,t){return Ze(n,pt(e,t))}function Qt(n,e){return typeof n=="function"?n(e):n}function It(n){return n.split("-")[0]}function Br(n){return n.split("-")[1]}function Za(n){return n==="x"?"y":"x"}function el(n){return n==="y"?"height":"width"}function Xt(n){return["top","bottom"].includes(It(n))?"y":"x"}function tl(n){return Za(Xt(n))}function ly(n,e,t){t===void 0&&(t=!1);const r=Br(n),s=tl(n),o=el(s);let i=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=so(i)),[i,so(i)]}function cy(n){const e=so(n);return[Zi(n),e,Zi(e)]}function Zi(n){return n.replace(/start|end/g,e=>ay[e])}function uy(n,e,t){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?o:i;default:return[]}}function dy(n,e,t,r){const s=Br(n);let o=uy(It(n),t==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Zi)))),o}function so(n){return n.replace(/left|right|bottom|top/g,e=>iy[e])}function fy(n){return{top:0,right:0,bottom:0,left:0,...n}}function nl(n){return typeof n!="number"?fy(n):{top:n,right:n,bottom:n,left:n}}function Er(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function xc(n,e,t){let{reference:r,floating:s}=n;const o=Xt(e),i=tl(e),a=el(i),l=It(e),c=o==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Br(e)){case"start":p[i]-=h*(t&&c?-1:1);break;case"end":p[i]+=h*(t&&c?-1:1);break}return p}const hy=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=t,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=xc(c,r,l),h=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:b}=a[g],{x:v,y:w,data:k,reset:M}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:n,floating:e}});u=v??u,f=w??f,p={...p,[y]:{...p[y],...k}},M&&m<=50&&(m++,typeof M=="object"&&(M.placement&&(h=M.placement),M.rects&&(c=M.rects===!0?await i.getElementRects({reference:n,floating:e,strategy:s}):M.rects),{x:u,y:f}=xc(c,h,l)),g=-1)}return{x:u,y:f,placement:h,strategy:s,middlewareData:p}};async function rl(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Qt(e,n),m=nl(p),y=a[h?f==="floating"?"reference":"floating":f],b=Er(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(y)))==null||t?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),k=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},M=Er(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-M.top+m.top)/k.y,bottom:(M.bottom-b.bottom+m.bottom)/k.y,left:(b.left-M.left+m.left)/k.x,right:(M.right-b.right+m.right)/k.x}}const py=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Qt(n,e)||{};if(c==null)return{};const f=nl(u),h={x:t,y:r},p=tl(s),m=el(p),g=await i.getDimensions(c),y=p==="y",b=y?"top":"left",v=y?"bottom":"right",w=y?"clientHeight":"clientWidth",k=o.reference[m]+o.reference[p]-h[p]-o.floating[m],M=h[p]-o.reference[p],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let T=C?C[w]:0;(!T||!await(i.isElement==null?void 0:i.isElement(C)))&&(T=a.floating[w]||o.floating[m]);const E=k/2-M/2,N=T/2-g[m]/2-1,F=pt(f[b],N),z=pt(f[v],N),V=F,B=T-g[m]-z,D=T/2-g[m]/2+E,P=Xi(V,D,B),R=!l.arrow&&Br(s)!=null&&D!==P&&o.reference[m]/2-(D<V?F:z)-g[m]/2<0,A=R?D<V?D-V:D-B:0;return{[p]:h[p]+A,data:{[p]:P,centerOffset:D-P-A,...R&&{alignmentOffset:A}},reset:R}}}),my=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Qt(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=It(s),v=Xt(a),w=It(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),M=h||(w||!g?[so(a)]:cy(a)),C=m!=="none";!h&&C&&M.push(...dy(a,g,m,k));const T=[a,...M],E=await rl(e,y),N=[];let F=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&N.push(E[b]),f){const D=ly(s,i,k);N.push(E[D[0]],E[D[1]])}if(F=[...F,{placement:s,overflows:N}],!N.every(D=>D<=0)){var z,V;const D=(((z=o.flip)==null?void 0:z.index)||0)+1,P=T[D];if(P)return{data:{index:D,overflows:F},reset:{placement:P}};let R=(V=F.filter(A=>A.overflows[0]<=0).sort((A,_)=>A.overflows[1]-_.overflows[1])[0])==null?void 0:V.placement;if(!R)switch(p){case"bestFit":{var B;const A=(B=F.filter(_=>{if(C){const Y=Xt(_.placement);return Y===v||Y==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(Y=>Y>0).reduce((Y,$)=>Y+$,0)]).sort((_,Y)=>_[1]-Y[1])[0])==null?void 0:B[0];A&&(R=A);break}case"initialPlacement":R=a;break}if(s!==R)return{reset:{placement:R}}}return{}}}};function Xd(n){const e=pt(...n.map(o=>o.left)),t=pt(...n.map(o=>o.top)),r=Ze(...n.map(o=>o.right)),s=Ze(...n.map(o=>o.bottom));return{x:e,y:t,width:r-e,height:s-t}}function gy(n){const e=n.slice().sort((s,o)=>s.y-o.y),t=[];let r=null;for(let s=0;s<e.length;s++){const o=e[s];!r||o.y-r.y>r.height/2?t.push([o]):t[t.length-1].push(o),r=o}return t.map(s=>Er(Xd(s)))}const yy=function(n){return n===void 0&&(n={}),{name:"inline",options:n,async fn(e){const{placement:t,elements:r,rects:s,platform:o,strategy:i}=e,{padding:a=2,x:l,y:c}=Qt(n,e),u=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=gy(u),h=Er(Xd(u)),p=nl(a);function m(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(y=>l>y.left-p.left&&l<y.right+p.right&&c>y.top-p.top&&c<y.bottom+p.bottom)||h;if(f.length>=2){if(Xt(t)==="y"){const F=f[0],z=f[f.length-1],V=It(t)==="top",B=F.top,D=z.bottom,P=V?F.left:z.left,R=V?F.right:z.right,A=R-P,_=D-B;return{top:B,bottom:D,left:P,right:R,width:A,height:_,x:P,y:B}}const y=It(t)==="left",b=Ze(...f.map(F=>F.right)),v=pt(...f.map(F=>F.left)),w=f.filter(F=>y?F.left===v:F.right===b),k=w[0].top,M=w[w.length-1].bottom,C=v,T=b,E=T-C,N=M-k;return{top:k,bottom:M,left:C,right:T,width:E,height:N,x:C,y:k}}return h}const g=await o.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:i});return s.reference.x!==g.reference.x||s.reference.y!==g.reference.y||s.reference.width!==g.reference.width||s.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};async function xy(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=It(t),a=Br(t),l=Xt(t)==="y",c=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,f=Qt(e,n);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const by=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:i,middlewareData:a}=e,l=await xy(e,n);return i===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},vy=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:y=>{let{x:b,y:v}=y;return{x:b,y:v}}},...l}=Qt(n,e),c={x:t,y:r},u=await rl(e,l),f=Xt(It(s)),h=Za(f);let p=c[h],m=c[f];if(o){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=p+u[y],w=p-u[b];p=Xi(v,p,w)}if(i){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=m+u[y],w=m-u[b];m=Xi(v,m,w)}const g=a.fn({...e,[h]:p,[f]:m});return{...g,data:{x:g.x-t,y:g.y-r}}}}},wy=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Qt(n,e),u={x:t,y:r},f=Xt(s),h=Za(f);let p=u[h],m=u[f];const g=Qt(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=h==="y"?"height":"width",k=o.reference[h]-o.floating[w]+y.mainAxis,M=o.reference[h]+o.reference[w]-y.mainAxis;p<k?p=k:p>M&&(p=M)}if(c){var b,v;const w=h==="y"?"width":"height",k=["top","left"].includes(It(s)),M=o.reference[f]-o.floating[w]+(k&&((b=i.offset)==null?void 0:b[f])||0)+(k?0:y.crossAxis),C=o.reference[f]+o.reference[w]+(k?0:((v=i.offset)==null?void 0:v[f])||0)-(k?y.crossAxis:0);m<M?m=M:m>C&&(m=C)}return{[h]:p,[f]:m}}}},Cy=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:s,elements:o}=e,{apply:i=()=>{},...a}=Qt(n,e),l=await rl(e,a),c=It(t),u=Br(t),f=Xt(t)==="y",{width:h,height:p}=r.floating;let m,g;c==="top"||c==="bottom"?(m=c,g=u===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(g=c,m=u==="end"?"top":"bottom");const y=p-l.top-l.bottom,b=h-l.left-l.right,v=pt(p-l[m],y),w=pt(h-l[g],b),k=!e.middlewareData.shift;let M=v,C=w;if(f?C=u||k?pt(w,b):b:M=u||k?pt(v,y):y,k&&!u){const E=Ze(l.left,0),N=Ze(l.right,0),F=Ze(l.top,0),z=Ze(l.bottom,0);f?C=h-2*(E!==0||N!==0?E+N:Ze(l.left,l.right)):M=p-2*(F!==0||z!==0?F+z:Ze(l.top,l.bottom))}await i({...e,availableWidth:C,availableHeight:M});const T=await s.getDimensions(o.floating);return h!==T.width||p!==T.height?{reset:{rects:!0}}:{}}}};function Zd(n){const e=Ct(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=mt(n),o=s?n.offsetWidth:t,i=s?n.offsetHeight:r,a=ro(t)!==o||ro(r)!==i;return a&&(t=o,r=i),{width:t,height:r,$:a}}function sl(n){return Ie(n)?n:n.contextElement}function Cr(n){const e=sl(n);if(!mt(e))return kn(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=Zd(e);let i=(o?ro(t.width):t.width)/r,a=(o?ro(t.height):t.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const ky=kn(0);function ef(n){const e=it(n);return!Xa()||!e.visualViewport?ky:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Sy(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==it(n)?!1:e}function Kn(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=sl(n);let i=kn(1);e&&(r?Ie(r)&&(i=Cr(r)):i=Cr(n));const a=Sy(o,t,r)?ef(o):kn(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const h=it(o),p=r&&Ie(r)?it(r):r;let m=h,g=m.frameElement;for(;g&&r&&p!==m;){const y=Cr(g),b=g.getBoundingClientRect(),v=Ct(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,k=b.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=w,c+=k,m=it(g),g=m.frameElement}}return Er({width:u,height:f,x:l,y:c})}function My(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",i=nn(r),a=e?Eo(e.floating):!1;if(r===i||a&&o)return t;let l={scrollLeft:0,scrollTop:0},c=kn(1);const u=kn(0),f=mt(r);if((f||!f&&!o)&&(($r(r)!=="body"||xs(i))&&(l=Oo(r)),mt(r))){const h=Kn(r);c=Cr(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function Ty(n){return Array.from(n.getClientRects())}function tf(n){return Kn(nn(n)).left+Oo(n).scrollLeft}function Dy(n){const e=nn(n),t=Oo(n),r=n.ownerDocument.body,s=Ze(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ze(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-t.scrollLeft+tf(n);const a=-t.scrollTop;return Ct(r).direction==="rtl"&&(i+=Ze(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function Ey(n,e){const t=it(n),r=nn(n),s=t.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const c=Xa();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function Oy(n,e){const t=Kn(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=mt(n)?Cr(n):kn(1),i=n.clientWidth*o.x,a=n.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function bc(n,e,t){let r;if(e==="viewport")r=Ey(n,t);else if(e==="document")r=Dy(nn(n));else if(Ie(e))r=Oy(e,t);else{const s=ef(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Er(r)}function nf(n,e){const t=Jt(n);return t===e||!Ie(t)||Cn(t)?!1:Ct(t).position==="fixed"||nf(t,e)}function Ny(n,e){const t=e.get(n);if(t)return t;let r=Kt(n,[],!1).filter(a=>Ie(a)&&$r(a)!=="body"),s=null;const o=Ct(n).position==="fixed";let i=o?Jt(n):n;for(;Ie(i)&&!Cn(i);){const a=Ct(i),l=Qa(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xs(i)&&!l&&nf(n,i))?r=r.filter(u=>u!==i):s=a,i=Jt(i)}return e.set(n,r),r}function Iy(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const i=[...t==="clippingAncestors"?Eo(e)?[]:Ny(e,this._c):[].concat(t),r],a=i[0],l=i.reduce((c,u)=>{const f=bc(e,u,s);return c.top=Ze(f.top,c.top),c.right=pt(f.right,c.right),c.bottom=pt(f.bottom,c.bottom),c.left=Ze(f.left,c.left),c},bc(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ay(n){const{width:e,height:t}=Zd(n);return{width:e,height:t}}function Py(n,e,t){const r=mt(e),s=nn(e),o=t==="fixed",i=Kn(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=kn(0);if(r||!r&&!o)if(($r(e)!=="body"||xs(s))&&(a=Oo(e)),r){const f=Kn(e,!0,o,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=tf(s));const c=i.left+a.scrollLeft-l.x,u=i.top+a.scrollTop-l.y;return{x:c,y:u,width:i.width,height:i.height}}function ii(n){return Ct(n).position==="static"}function vc(n,e){return!mt(n)||Ct(n).position==="fixed"?null:e?e(n):n.offsetParent}function rf(n,e){const t=it(n);if(Eo(n))return t;if(!mt(n)){let s=Jt(n);for(;s&&!Cn(s);){if(Ie(s)&&!ii(s))return s;s=Jt(s)}return t}let r=vc(n,e);for(;r&&Jg(r)&&ii(r);)r=vc(r,e);return r&&Cn(r)&&ii(r)&&!Qa(r)?t:r||Qg(n)||t}const Ry=async function(n){const e=this.getOffsetParent||rf,t=this.getDimensions,r=await t(n.floating);return{reference:Py(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jy(n){return Ct(n).direction==="rtl"}const Ly={convertOffsetParentRelativeRectToViewportRelativeRect:My,getDocumentElement:nn,getClippingRect:Iy,getOffsetParent:rf,getElementRects:Ry,getClientRects:Ty,getDimensions:Ay,getScale:Cr,isElement:Ie,isRTL:jy};function Fy(n,e){let t=null,r;const s=nn(n);function o(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:f,height:h}=n.getBoundingClientRect();if(a||e(),!f||!h)return;const p=Ds(u),m=Ds(s.clientWidth-(c+f)),g=Ds(s.clientHeight-(u+h)),y=Ds(c),v={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Ze(0,pt(1,l))||1};let w=!0;function k(M){const C=M[0].intersectionRatio;if(C!==l){if(!w)return i();C?i(!1,C):r=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(k,{...v,root:s.ownerDocument})}catch{t=new IntersectionObserver(k,v)}t.observe(n)}return i(!0),o}function $y(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=sl(n),u=s||o?[...c?Kt(c):[],...Kt(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const f=c&&a?Fy(c,t):null;let h=-1,p=null;i&&(p=new ResizeObserver(b=>{let[v]=b;v&&v.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),t()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Kn(n):null;l&&y();function y(){const b=Kn(n);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&t(),g=b,m=requestAnimationFrame(y)}return t(),()=>{var b;u.forEach(v=>{s&&v.removeEventListener("scroll",t),o&&v.removeEventListener("resize",t)}),f==null||f(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const By=by,_y=vy,zy=my,Hy=Cy,wc=py,Vy=yy,Wy=wy,Uy=(n,e,t)=>{const r=new Map,s={platform:Ly,...t},o={...s.platform,_c:r};return hy(n,e,{...s,platform:o})};var Ws=typeof document<"u"?x.useLayoutEffect:x.useEffect;function oo(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!oo(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!oo(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function sf(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Cc(n,e){const t=sf(n);return Math.round(e*t)/t}function kc(n){const e=x.useRef(n);return Ws(()=>{e.current=n}),e}function qy(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(r);oo(h,r)||p(r);const[m,g]=x.useState(null),[y,b]=x.useState(null),v=x.useCallback(A=>{A!==C.current&&(C.current=A,g(A))},[]),w=x.useCallback(A=>{A!==T.current&&(T.current=A,b(A))},[]),k=o||m,M=i||y,C=x.useRef(null),T=x.useRef(null),E=x.useRef(u),N=l!=null,F=kc(l),z=kc(s),V=x.useCallback(()=>{if(!C.current||!T.current)return;const A={placement:e,strategy:t,middleware:h};z.current&&(A.platform=z.current),Uy(C.current,T.current,A).then(_=>{const Y={..._,isPositioned:!0};B.current&&!oo(E.current,Y)&&(E.current=Y,Ia.flushSync(()=>{f(Y)}))})},[h,e,t,z]);Ws(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[c]);const B=x.useRef(!1);Ws(()=>(B.current=!0,()=>{B.current=!1}),[]),Ws(()=>{if(k&&(C.current=k),M&&(T.current=M),k&&M){if(F.current)return F.current(k,M,V);V()}},[k,M,V,F,N]);const D=x.useMemo(()=>({reference:C,floating:T,setReference:v,setFloating:w}),[v,w]),P=x.useMemo(()=>({reference:k,floating:M}),[k,M]),R=x.useMemo(()=>{const A={position:t,left:0,top:0};if(!P.floating)return A;const _=Cc(P.floating,u.x),Y=Cc(P.floating,u.y);return a?{...A,transform:"translate("+_+"px, "+Y+"px)",...sf(P.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:_,top:Y}},[t,a,P.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:V,refs:D,elements:P,floatingStyles:R}),[u,V,D,P,R])}const Yy=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?wc({element:r.current,padding:s}).fn(t):{}:r?wc({element:r,padding:s}).fn(t):{}}}},of=(n,e)=>({...By(n),options:[n,e]}),ol=(n,e)=>({..._y(n),options:[n,e]}),Sc=(n,e)=>({...Wy(n),options:[n,e]}),ea=(n,e)=>({...zy(n),options:[n,e]}),Ky=(n,e)=>({...Hy(n),options:[n,e]}),ta=(n,e)=>({...Vy(n),options:[n,e]}),af=(n,e)=>({...Yy(n),options:[n,e]}),lf={...Kp},Gy=lf.useInsertionEffect,Jy=Gy||(n=>n());function fn(n){const e=x.useRef(()=>{});return Jy(()=>{e.current=n}),x.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}var _t=typeof document<"u"?x.useLayoutEffect:x.useEffect;let Mc=!1,Qy=0;const Tc=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Qy++;function Xy(){const[n,e]=x.useState(()=>Mc?Tc():void 0);return _t(()=>{n==null&&e(Tc())},[]),x.useEffect(()=>{Mc=!0},[]),n}const Zy=lf.useId,cf=Zy||Xy;function e0(){const n=new Map;return{emit(e,t){var r;(r=n.get(e))==null||r.forEach(s=>s(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var r;n.set(e,((r=n.get(e))==null?void 0:r.filter(s=>s!==t))||[])}}}const t0=x.createContext(null),n0=x.createContext(null),il=()=>{var n;return((n=x.useContext(t0))==null?void 0:n.id)||null},al=()=>x.useContext(n0);function ll(n){return"data-floating-ui-"+n}function ai(n){const e=x.useRef(n);return _t(()=>{e.current=n}),e}const Dc=ll("safe-polygon");function Us(n,e,t){return t&&!Qi(t)?0:typeof n=="number"?n:n==null?void 0:n[e]}function r0(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,dataRef:s,events:o,elements:i}=n,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:h=!0}=e,p=al(),m=il(),g=ai(c),y=ai(l),b=ai(t),v=x.useRef(),w=x.useRef(-1),k=x.useRef(),M=x.useRef(-1),C=x.useRef(!0),T=x.useRef(!1),E=x.useRef(()=>{}),N=x.useCallback(()=>{var P;const R=(P=s.current.openEvent)==null?void 0:P.type;return(R==null?void 0:R.includes("mouse"))&&R!=="mousedown"},[s]);x.useEffect(()=>{if(!a)return;function P(R){let{open:A}=R;A||(clearTimeout(w.current),clearTimeout(M.current),C.current=!0)}return o.on("openchange",P),()=>{o.off("openchange",P)}},[a,o]),x.useEffect(()=>{if(!a||!g.current||!t)return;function P(A){N()&&r(!1,A,"hover")}const R=Ln(i.floating).documentElement;return R.addEventListener("mouseleave",P),()=>{R.removeEventListener("mouseleave",P)}},[i.floating,t,r,a,g,N]);const F=x.useCallback(function(P,R,A){R===void 0&&(R=!0),A===void 0&&(A="hover");const _=Us(y.current,"close",v.current);_&&!k.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,P,A),_)):R&&(clearTimeout(w.current),r(!1,P,A))},[y,r]),z=fn(()=>{E.current(),k.current=void 0}),V=fn(()=>{if(T.current){const P=Ln(i.floating).body;P.style.pointerEvents="",P.removeAttribute(Dc),T.current=!1}});x.useEffect(()=>{if(!a)return;function P(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function R($){if(clearTimeout(w.current),C.current=!1,u&&!Qi(v.current)||f>0&&!Us(y.current,"open"))return;const O=Us(y.current,"open",v.current);O?w.current=window.setTimeout(()=>{b.current||r(!0,$,"hover")},O):r(!0,$,"hover")}function A($){if(P())return;E.current();const O=Ln(i.floating);if(clearTimeout(M.current),g.current&&s.current.floatingContext){t||clearTimeout(w.current),k.current=g.current({...s.current.floatingContext,tree:p,x:$.clientX,y:$.clientY,onClose(){V(),z(),F($,!0,"safe-polygon")}});const ve=k.current;O.addEventListener("mousemove",ve),E.current=()=>{O.removeEventListener("mousemove",ve)};return}(v.current==="touch"?!as(i.floating,$.relatedTarget):!0)&&F($)}function _($){P()||s.current.floatingContext&&(g.current==null||g.current({...s.current.floatingContext,tree:p,x:$.clientX,y:$.clientY,onClose(){V(),z(),F($)}})($))}if(Ie(i.domReference)){var Y;const $=i.domReference;return t&&$.addEventListener("mouseleave",_),(Y=i.floating)==null||Y.addEventListener("mouseleave",_),h&&$.addEventListener("mousemove",R,{once:!0}),$.addEventListener("mouseenter",R),$.addEventListener("mouseleave",A),()=>{var O;t&&$.removeEventListener("mouseleave",_),(O=i.floating)==null||O.removeEventListener("mouseleave",_),h&&$.removeEventListener("mousemove",R),$.removeEventListener("mouseenter",R),$.removeEventListener("mouseleave",A)}}},[i,a,n,u,f,h,F,z,V,r,t,b,p,y,g,s]),_t(()=>{var P;if(a&&t&&(P=g.current)!=null&&P.__options.blockPointerEvents&&N()){const A=Ln(i.floating).body;A.setAttribute(Dc,""),A.style.pointerEvents="none",T.current=!0;const _=i.floating;if(Ie(i.domReference)&&_){var R;const Y=i.domReference,$=p==null||(R=p.nodesRef.current.find(O=>O.id===m))==null||(R=R.context)==null?void 0:R.elements.floating;return $&&($.style.pointerEvents=""),Y.style.pointerEvents="auto",_.style.pointerEvents="auto",()=>{Y.style.pointerEvents="",_.style.pointerEvents=""}}}},[a,t,m,i,p,g,N]),_t(()=>{t||(v.current=void 0,z(),V())},[t,z,V]),x.useEffect(()=>()=>{z(),clearTimeout(w.current),clearTimeout(M.current),V()},[a,i.domReference,z,V]);const B=x.useMemo(()=>{function P(R){v.current=R.pointerType}return{onPointerDown:P,onPointerEnter:P,onMouseMove(R){const{nativeEvent:A}=R;function _(){!C.current&&!b.current&&r(!0,A,"hover")}u&&!Qi(v.current)||t||f===0||(clearTimeout(M.current),v.current==="touch"?_():M.current=window.setTimeout(_,f))}}},[u,r,t,b,f]),D=x.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(P){F(P.nativeEvent,!1)}}),[F]);return x.useMemo(()=>a?{reference:B,floating:D}:{},[a,B,D])}const na=()=>{},uf=x.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:na,setState:na,isInstantPhase:!1}),df=()=>x.useContext(uf);function s0(n){const{children:e,delay:t,timeoutMs:r=0}=n,[s,o]=x.useReducer((l,c)=>({...l,...c}),{delay:t,timeoutMs:r,initialDelay:t,currentId:null,isInstantPhase:!1}),i=x.useRef(null),a=x.useCallback(l=>{o({currentId:l})},[]);return _t(()=>{s.currentId?i.current===null?i.current=s.currentId:s.isInstantPhase||o({isInstantPhase:!0}):(s.isInstantPhase&&o({isInstantPhase:!1}),i.current=null)},[s.currentId,s.isInstantPhase]),x.createElement(uf.Provider,{value:x.useMemo(()=>({...s,setState:o,setCurrentId:a}),[s,a])},e)}function o0(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,floatingId:s}=n,{id:o}=e,i=o??s,a=df(),{currentId:l,setCurrentId:c,initialDelay:u,setState:f,timeoutMs:h}=a;return _t(()=>{l&&(f({delay:{open:1,close:Us(u,"close")}}),l!==i&&r(!1))},[i,r,f,l,u]),_t(()=>{function p(){r(!1),f({delay:u,currentId:null})}if(l&&!t&&l===i){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[t,f,l,i,r,u,h]),_t(()=>{c===na||!t||c(i)},[t,c,i]),a}function li(n,e){let t=n.filter(s=>{var o;return s.parentId===e&&((o=s.context)==null?void 0:o.open)}),r=t;for(;r.length;)r=n.filter(s=>{var o;return(o=r)==null?void 0:o.some(i=>{var a;return s.parentId===i.id&&((a=s.context)==null?void 0:a.open)})}),t=t.concat(r);return t}const i0={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},a0={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ec=n=>{var e,t;return{escapeKey:typeof n=="boolean"?n:(e=n==null?void 0:n.escapeKey)!=null?e:!1,outsidePress:typeof n=="boolean"?n:(t=n==null?void 0:n.outsidePress)!=null?t:!0}};function l0(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,elements:s,dataRef:o}=n,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:m}=e,g=al(),y=fn(typeof l=="function"?l:()=>!1),b=typeof l=="function"?y:l,v=x.useRef(!1),w=x.useRef(!1),{escapeKey:k,outsidePress:M}=Ec(p),{escapeKey:C,outsidePress:T}=Ec(m),E=fn(D=>{var P;if(!t||!i||!a||D.key!=="Escape")return;const R=(P=o.current.floatingContext)==null?void 0:P.nodeId,A=g?li(g.nodesRef.current,R):[];if(!k&&(D.stopPropagation(),A.length>0)){let _=!0;if(A.forEach(Y=>{var $;if(($=Y.context)!=null&&$.open&&!Y.context.dataRef.current.__escapeKeyBubbles){_=!1;return}}),!_)return}r(!1,ny(D)?D.nativeEvent:D,"escape-key")}),N=fn(D=>{var P;const R=()=>{var A;E(D),(A=mr(D))==null||A.removeEventListener("keydown",R)};(P=mr(D))==null||P.addEventListener("keydown",R)}),F=fn(D=>{var P;const R=v.current;v.current=!1;const A=w.current;if(w.current=!1,c==="click"&&A||R||typeof b=="function"&&!b(D))return;const _=mr(D),Y="["+ll("inert")+"]",$=Ln(s.floating).querySelectorAll(Y);let O=Ie(_)?_:null;for(;O&&!Cn(O);){const J=Jt(O);if(Cn(J)||!Ie(J))break;O=J}if($.length&&Ie(_)&&!ry(_)&&!as(_,s.floating)&&Array.from($).every(J=>!as(O,J)))return;if(mt(_)&&B){const J=_.clientWidth>0&&_.scrollWidth>_.clientWidth,ee=_.clientHeight>0&&_.scrollHeight>_.clientHeight;let oe=ee&&D.offsetX>_.clientWidth;if(ee&&Ct(_).direction==="rtl"&&(oe=D.offsetX<=_.offsetWidth-_.clientWidth),oe||J&&D.offsetY>_.clientHeight)return}const ae=(P=o.current.floatingContext)==null?void 0:P.nodeId,ve=g&&li(g.nodesRef.current,ae).some(J=>{var ee;return oi(D,(ee=J.context)==null?void 0:ee.elements.floating)});if(oi(D,s.floating)||oi(D,s.domReference)||ve)return;const De=g?li(g.nodesRef.current,ae):[];if(De.length>0){let J=!0;if(De.forEach(ee=>{var oe;if((oe=ee.context)!=null&&oe.open&&!ee.context.dataRef.current.__outsidePressBubbles){J=!1;return}}),!J)return}r(!1,D,"outside-press")}),z=fn(D=>{var P;const R=()=>{var A;F(D),(A=mr(D))==null||A.removeEventListener(c,R)};(P=mr(D))==null||P.addEventListener(c,R)});x.useEffect(()=>{if(!t||!i)return;o.current.__escapeKeyBubbles=k,o.current.__outsidePressBubbles=M;function D(A){r(!1,A,"ancestor-scroll")}const P=Ln(s.floating);a&&P.addEventListener("keydown",C?N:E,C),b&&P.addEventListener(c,T?z:F,T);let R=[];return h&&(Ie(s.domReference)&&(R=Kt(s.domReference)),Ie(s.floating)&&(R=R.concat(Kt(s.floating))),!Ie(s.reference)&&s.reference&&s.reference.contextElement&&(R=R.concat(Kt(s.reference.contextElement)))),R=R.filter(A=>{var _;return A!==((_=P.defaultView)==null?void 0:_.visualViewport)}),R.forEach(A=>{A.addEventListener("scroll",D,{passive:!0})}),()=>{a&&P.removeEventListener("keydown",C?N:E,C),b&&P.removeEventListener(c,T?z:F,T),R.forEach(A=>{A.removeEventListener("scroll",D)})}},[o,s,a,b,c,t,r,h,i,k,M,E,C,N,F,T,z]),x.useEffect(()=>{v.current=!1},[b,c]);const V=x.useMemo(()=>({onKeyDown:E,[i0[f]]:D=>{u&&r(!1,D.nativeEvent,"reference-press")}}),[E,r,u,f]),B=x.useMemo(()=>({onKeyDown:E,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[a0[c]]:()=>{v.current=!0}}),[E,c]);return x.useMemo(()=>i?{reference:V,floating:B}:{},[i,V,B])}function c0(n){const{open:e=!1,onOpenChange:t,elements:r}=n,s=cf(),o=x.useRef({}),[i]=x.useState(()=>e0()),a=il()!=null,[l,c]=x.useState(r.reference),u=fn((p,m,g)=>{o.current.openEvent=p?m:void 0,i.emit("openchange",{open:p,event:m,reason:g,nested:a}),t==null||t(p,m,g)}),f=x.useMemo(()=>({setPositionReference:c}),[]),h=x.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return x.useMemo(()=>({dataRef:o,open:e,onOpenChange:u,elements:h,events:i,floatingId:s,refs:f}),[e,u,h,i,s,f])}function cl(n){n===void 0&&(n={});const{nodeId:e}=n,t=c0({...n,elements:{reference:null,floating:null,...n.elements}}),r=n.rootContext||t,s=r.elements,[o,i]=x.useState(null),[a,l]=x.useState(null),u=(s==null?void 0:s.reference)||o,f=x.useRef(null),h=al();_t(()=>{u&&(f.current=u)},[u]);const p=qy({...n,elements:{...s,...a&&{reference:a}}}),m=x.useCallback(w=>{const k=Ie(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(k),p.refs.setReference(k)},[p.refs]),g=x.useCallback(w=>{(Ie(w)||w===null)&&(f.current=w,i(w)),(Ie(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Ie(w))&&p.refs.setReference(w)},[p.refs]),y=x.useMemo(()=>({...p.refs,setReference:g,setPositionReference:m,domReference:f}),[p.refs,g,m]),b=x.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),v=x.useMemo(()=>({...p,...r,refs:y,elements:b,nodeId:e}),[p,y,b,e,r]);return _t(()=>{r.dataRef.current.floatingContext=v;const w=h==null?void 0:h.nodesRef.current.find(k=>k.id===e);w&&(w.context=v)}),x.useMemo(()=>({...p,context:v,refs:y,elements:b}),[p,y,b,v])}function u0(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,events:s,dataRef:o,elements:i}=n,{enabled:a=!0,visibleOnly:l=!0}=e,c=x.useRef(!1),u=x.useRef(),f=x.useRef(!0);x.useEffect(()=>{if(!a)return;const p=it(i.domReference);function m(){!t&&mt(i.domReference)&&i.domReference===gc(Ln(i.domReference))&&(c.current=!0)}function g(){f.current=!0}return p.addEventListener("blur",m),p.addEventListener("keydown",g,!0),()=>{p.removeEventListener("blur",m),p.removeEventListener("keydown",g,!0)}},[i.domReference,t,a]),x.useEffect(()=>{if(!a)return;function p(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return s.on("openchange",p),()=>{s.off("openchange",p)}},[s,a]),x.useEffect(()=>()=>{clearTimeout(u.current)},[]);const h=x.useMemo(()=>({onPointerDown(p){Xg(p.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(p){if(c.current)return;const m=mr(p.nativeEvent);if(l&&Ie(m))try{if(Zg()&&ey())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!oy(m))return}r(!0,p.nativeEvent,"focus")},onBlur(p){c.current=!1;const m=p.relatedTarget,g=p.nativeEvent,y=Ie(m)&&m.hasAttribute(ll("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var b;const v=gc(i.domReference?i.domReference.ownerDocument:document);!m&&v===i.domReference||as((b=o.current.floatingContext)==null?void 0:b.refs.floating.current,v)||as(i.domReference,v)||y||r(!1,g,"focus")})}}),[o,i.domReference,r,l]);return x.useMemo(()=>a?{reference:h}:{},[a,h])}const Oc="active",Nc="selected";function ci(n,e,t){const r=new Map,s=t==="item";let o=n;if(s&&n){const{[Oc]:i,[Nc]:a,...l}=n;o=l}return{...t==="floating"&&{tabIndex:-1},...o,...e.map(i=>{const a=i?i[t]:null;return typeof a=="function"?n?a(n):null:a}).concat(n).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(s&&[Oc,Nc].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var f;(f=r.get(c))==null||f.push(u),i[c]=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(y=>y(...m)).find(y=>y!==void 0)}}}else i[c]=u}),i),{})}}function d0(n){n===void 0&&(n=[]);const e=n.map(a=>a==null?void 0:a.reference),t=n.map(a=>a==null?void 0:a.floating),r=n.map(a=>a==null?void 0:a.item),s=x.useCallback(a=>ci(a,n,"reference"),e),o=x.useCallback(a=>ci(a,n,"floating"),t),i=x.useCallback(a=>ci(a,n,"item"),r);return x.useMemo(()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:i}),[s,o,i])}const f0=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function h0(n,e){var t;e===void 0&&(e={});const{open:r,floatingId:s}=n,{enabled:o=!0,role:i="dialog"}=e,a=(t=f0.get(i))!=null?t:i,l=cf(),u=il()!=null,f=x.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?s:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,s,u,r,l,i]),h=x.useMemo(()=>{const m={id:s,...a&&{role:a}};return a==="tooltip"||i==="label"?m:{...m,...a==="menu"&&{"aria-labelledby":l}}},[a,s,l,i]),p=x.useCallback(m=>{let{active:g,selected:y}=m;const b={role:"option",...g&&{id:s+"-option"}};switch(i){case"select":return{...b,"aria-selected":g&&y};case"combobox":return{...b,...g&&{"aria-selected":!0}}}return{}},[s,i]);return x.useMemo(()=>o?{reference:f,floating:h,item:p}:{},[o,f,h,p])}function ff(n,e){if(n==="rtl"&&(e.includes("right")||e.includes("left"))){const[t,r]=e.split("-"),s=t==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return e}function Ic(n,e,t,r){return n==="center"||r==="center"?{top:e}:n==="end"?{bottom:t}:n==="start"?{top:t}:{}}function Ac(n,e,t,r,s){return n==="center"||r==="center"?{left:e}:n==="end"?{[s==="ltr"?"right":"left"]:t}:n==="start"?{[s==="ltr"?"left":"right"]:t}:{}}const p0={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function m0({position:n,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,arrowX:o,arrowY:i,dir:a}){const[l,c="center"]=n.split("-"),u={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[p0[l]]:r},f=-e/2;return l==="left"?{...u,...Ic(c,i,t,s),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...u,...Ic(c,i,t,s),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...u,...Ac(c,o,t,s,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...u,...Ac(c,o,t,s,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const ul=x.forwardRef(({position:n,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,visible:o,arrowX:i,arrowY:a,style:l,...c},u)=>{const{dir:f}=Ga();return o?d.jsx("div",{...c,ref:u,style:{...l,...m0({position:n,arrowSize:e,arrowOffset:t,arrowRadius:r,arrowPosition:s,dir:f,arrowX:i,arrowY:a})}}):null});ul.displayName="@mantine/core/FloatingArrow";const[g0,hf]=Ed("Popover component was not found in the tree");function dl({children:n,active:e=!0,refProp:t="ref",innerRef:r}){const s=ng(e),o=jr(s,r);return To(n)?x.cloneElement(n,{[t]:o}):n}function pf(n){return d.jsx(Ja,{tabIndex:-1,"data-autofocus":!0,...n})}dl.displayName="@mantine/core/FocusTrap";pf.displayName="@mantine/core/FocusTrapInitialFocus";dl.InitialFocus=pf;function y0(n){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof n.className=="string"&&e.classList.add(...n.className.split(" ").filter(Boolean)),typeof n.style=="object"&&Object.assign(e.style,n.style),typeof n.id=="string"&&e.setAttribute("id",n.id),e}const x0={},mf=x.forwardRef((n,e)=>{const{children:t,target:r,...s}=ie("Portal",x0,n),[o,i]=x.useState(!1),a=x.useRef(null);return hd(()=>(i(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:y0(s),Rd(e,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!o||!a.current?null:Ia.createPortal(d.jsx(d.Fragment,{children:t}),a.current)});mf.displayName="@mantine/core/Portal";function No({withinPortal:n=!0,children:e,...t}){return n?d.jsx(mf,{...t,children:e}):d.jsx(d.Fragment,{children:e})}No.displayName="@mantine/core/OptionalPortal";const qr=n=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${te(n==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),Es={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...qr("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...qr("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...qr("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...qr("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...qr("top"),common:{transformOrigin:"top right"}}},Pc={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function b0({transition:n,state:e,duration:t,timingFunction:r}){const s={transitionDuration:`${t}ms`,transitionTimingFunction:r};return typeof n=="string"?n in Es?{transitionProperty:Es[n].transitionProperty,...s,...Es[n].common,...Es[n][Pc[e]]}:{}:{transitionProperty:n.transitionProperty,...s,...n.common,...n[Pc[e]]}}function v0({duration:n,exitDuration:e,timingFunction:t,mounted:r,onEnter:s,onExit:o,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const u=Zt(),f=ag(),h=u.respectReducedMotion?f:!1,[p,m]=x.useState(h?0:n),[g,y]=x.useState(r?"entered":"exited"),b=x.useRef(-1),v=x.useRef(-1),w=x.useRef(-1),k=C=>{const T=C?s:o,E=C?i:a;window.clearTimeout(b.current);const N=h?0:C?n:e;m(N),N===0?(typeof T=="function"&&T(),typeof E=="function"&&E(),y(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{md.flushSync(()=>{y(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),y(C?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof E=="function"&&E(),y(C?"entered":"exited")},N)})})},M=C=>{if(window.clearTimeout(v.current),typeof(C?l:c)!="number"){k(C);return}v.current=window.setTimeout(()=>{k(C)},C?l:c)};return Ht(()=>{M(r)},[r]),x.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:t||"ease"}}function bs({keepMounted:n,transition:e="fade",duration:t=250,exitDuration:r=t,mounted:s,children:o,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h}){const{transitionDuration:p,transitionStatus:m,transitionTimingFunction:g}=v0({mounted:s,exitDuration:r,duration:t,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h});return p===0?s?d.jsx(d.Fragment,{children:o({})}):n?o({display:"none"}):null:m==="exited"?n?o({display:"none"}):null:d.jsx(d.Fragment,{children:o(b0({transition:e,duration:p,state:m,timingFunction:g}))})}bs.displayName="@mantine/core/Transition";var gf={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const w0={},fl=Ne((n,e)=>{var y,b,v,w;const t=ie("PopoverDropdown",w0,n),{className:r,style:s,vars:o,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...f}=t,h=hf(),p=Gm({opened:h.opened,shouldReturnFocus:h.returnFocus}),m=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=jr(e,h.floating);return h.disabled?null:d.jsx(No,{...h.portalProps,withinPortal:h.withinPortal,children:d.jsx(bs,{mounted:h.opened,...h.transitionProps,transition:((y=h.transitionProps)==null?void 0:y.transition)||"fade",duration:((b=h.transitionProps)==null?void 0:b.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((v=h.transitionProps)==null?void 0:v.exitDuration)=="number"?h.transitionProps.exitDuration:(w=h.transitionProps)==null?void 0:w.duration,children:k=>d.jsx(dl,{active:h.trapFocus,innerRef:g,children:d.jsxs(ue,{...m,...f,variant:l,onKeyDownCapture:zm(h.onClose,{active:h.closeOnEscape,onTrigger:p,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:t,classNames:c,styles:u,style:[{...k,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:te(h.width)},s]}),children:[i,d.jsx(ul,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:t,classNames:c,styles:u})})]})})})})});fl.classes=gf;fl.displayName="@mantine/core/PopoverDropdown";const C0={refProp:"ref",popupType:"dialog"},yf=Ne((n,e)=>{const{children:t,refProp:r,popupType:s,...o}=ie("PopoverTarget",C0,n);if(!To(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=o,a=hf(),l=jr(a.reference,t.ref,e),c=a.withRoles?{"aria-haspopup":s,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return x.cloneElement(t,{...i,...c,...a.targetProps,className:tn(a.targetProps.className,i.className,t.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});yf.displayName="@mantine/core/PopoverTarget";function xf({opened:n,floating:e,position:t,positionDependencies:r}){const[s,o]=x.useState(0);x.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current)return $y(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,n,s,t]),Ht(()=>{e.update()},r),Ht(()=>{o(i=>i+1)},[n])}function k0(n){if(n===void 0)return{shift:!0,flip:!0};const e={...n};return n.shift===void 0&&(e.shift=!0),n.flip===void 0&&(e.flip=!0),e}function S0(n,e){const t=k0(n.middlewares),r=[of(n.offset)];return t.shift&&r.push(ol(typeof t.shift=="boolean"?{limiter:Sc(),padding:5}:{limiter:Sc(),padding:5,...t.shift})),t.flip&&r.push(typeof t.flip=="boolean"?ea():ea(t.flip)),t.inline&&r.push(typeof t.inline=="boolean"?ta():ta(t.inline)),r.push(af({element:n.arrowRef,padding:n.arrowOffset})),(t.size||n.width==="target")&&r.push(Ky({...typeof t.size=="boolean"?{}:t.size,apply({rects:s,availableWidth:o,availableHeight:i}){var c;const l=((c=e().refs.floating.current)==null?void 0:c.style)??{};t.size&&Object.assign(l,{maxWidth:`${o}px`,maxHeight:`${i}px`}),n.width==="target"&&Object.assign(l,{width:`${s.reference.width}px`})}})),r}function M0(n){const[e,t]=Fd({value:n.opened,defaultValue:n.defaultOpened,finalValue:!1,onChange:n.onChange}),r=()=>{var i;e&&((i=n.onClose)==null||i.call(n),t(!1))},s=()=>{var i,a;e?((i=n.onClose)==null||i.call(n),t(!1)):((a=n.onOpen)==null||a.call(n),t(!0))},o=cl({strategy:n.strategy,placement:n.position,middleware:S0(n,()=>o)});return xf({opened:n.opened,position:n.position,positionDependencies:n.positionDependencies||[],floating:o}),Ht(()=>{var i;(i=n.onPositionChange)==null||i.call(n,o.placement)},[o.placement]),Ht(()=>{var i,a;n.opened?(a=n.onOpen)==null||a.call(n):(i=n.onClose)==null||i.call(n)},[n.opened]),{floating:o,controlled:typeof n.opened=="boolean",opened:e,onClose:r,onToggle:s}}const T0={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Wa("popover"),__staticSelector:"Popover",width:"max-content"},D0=(n,{radius:e,shadow:t})=>({dropdown:{"--popover-radius":e===void 0?void 0:sr(e),"--popover-shadow":Hm(t)}});function zt(n){var ar,lr,cr,ur,dr,Ts;const e=ie("Popover",T0,n),{children:t,position:r,offset:s,onPositionChange:o,positionDependencies:i,opened:a,transitionProps:l,width:c,middlewares:u,withArrow:f,arrowSize:h,arrowOffset:p,arrowRadius:m,arrowPosition:g,unstyled:y,classNames:b,styles:v,closeOnClickOutside:w,withinPortal:k,portalProps:M,closeOnEscape:C,clickOutsideEvents:T,trapFocus:E,onClose:N,onOpen:F,onChange:z,zIndex:V,radius:B,shadow:D,id:P,defaultOpened:R,__staticSelector:A,withRoles:_,disabled:Y,returnFocus:$,variant:O,keepMounted:ae,vars:ve,floatingStrategy:De,...J}=e,ee=Ae({name:A,props:e,classes:gf,classNames:b,styles:v,unstyled:y,rootSelector:"dropdown",vars:ve,varsResolver:D0}),oe=x.useRef(null),[fe,re]=x.useState(null),[pe,yt]=x.useState(null),{dir:Mt}=Ga(),He=Ua(P),je=M0({middlewares:u,width:c,position:ff(Mt,r),offset:typeof s=="number"?s+(f?h/2:0):s,arrowRef:oe,arrowOffset:p,onPositionChange:o,positionDependencies:i,opened:a,defaultOpened:R,onChange:z,onOpen:F,onClose:N,strategy:De});Um(()=>w&&je.onClose(),T,[fe,pe]);const rn=x.useCallback(Nn=>{re(Nn),je.floating.refs.setReference(Nn)},[je.floating.refs.setReference]),Wr=x.useCallback(Nn=>{yt(Nn),je.floating.refs.setFloating(Nn)},[je.floating.refs.setFloating]);return d.jsx(g0,{value:{returnFocus:$,disabled:Y,controlled:je.controlled,reference:rn,floating:Wr,x:je.floating.x,y:je.floating.y,arrowX:(cr=(lr=(ar=je.floating)==null?void 0:ar.middlewareData)==null?void 0:lr.arrow)==null?void 0:cr.x,arrowY:(Ts=(dr=(ur=je.floating)==null?void 0:ur.middlewareData)==null?void 0:dr.arrow)==null?void 0:Ts.y,opened:je.opened,arrowRef:oe,transitionProps:l,width:c,withArrow:f,arrowSize:h,arrowOffset:p,arrowRadius:m,arrowPosition:g,placement:je.floating.placement,trapFocus:E,withinPortal:k,portalProps:M,zIndex:V,radius:B,shadow:D,closeOnEscape:C,onClose:je.onClose,onToggle:je.onToggle,getTargetId:()=>`${He}-target`,getDropdownId:()=>`${He}-dropdown`,withRoles:_,targetProps:J,__staticSelector:A,classNames:b,styles:v,unstyled:y,variant:O,keepMounted:ae,getStyles:ee,floatingStrategy:De},children:t})}zt.Target=yf;zt.Dropdown=fl;zt.displayName="@mantine/core/Popover";zt.extend=n=>n;var Ot={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const E0=x.forwardRef(({className:n,...e},t)=>d.jsxs(ue,{component:"span",className:tn(Ot.barsLoader,n),...e,ref:t,children:[d.jsx("span",{className:Ot.bar}),d.jsx("span",{className:Ot.bar}),d.jsx("span",{className:Ot.bar})]})),O0=x.forwardRef(({className:n,...e},t)=>d.jsxs(ue,{component:"span",className:tn(Ot.dotsLoader,n),...e,ref:t,children:[d.jsx("span",{className:Ot.dot}),d.jsx("span",{className:Ot.dot}),d.jsx("span",{className:Ot.dot})]})),N0=x.forwardRef(({className:n,...e},t)=>d.jsx(ue,{component:"span",className:tn(Ot.ovalLoader,n),...e,ref:t})),bf={bars:E0,oval:N0,dots:O0},I0={loaders:bf,type:"oval"},A0=(n,{size:e,color:t})=>({root:{"--loader-size":nt(e,"loader-size"),"--loader-color":t?So(t,n):void 0}}),vs=Ne((n,e)=>{const t=ie("Loader",I0,n),{size:r,color:s,type:o,vars:i,className:a,style:l,classNames:c,styles:u,unstyled:f,loaders:h,variant:p,children:m,...g}=t,y=Ae({name:"Loader",props:t,classes:Ot,className:a,style:l,classNames:c,styles:u,unstyled:f,vars:i,varsResolver:A0});return m?d.jsx(ue,{...y("root"),ref:e,...g,children:m}):d.jsx(ue,{...y("root"),ref:e,component:h[o],variant:p,size:r,...g})});vs.defaultLoaders=bf;vs.classes=Ot;vs.displayName="@mantine/core/Loader";var Io={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Rc={orientation:"horizontal"},P0=(n,{borderWidth:e})=>({group:{"--ai-border-width":te(e)}}),hl=Ne((n,e)=>{const t=ie("ActionIconGroup",Rc,n),{className:r,style:s,classNames:o,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,...p}=ie("ActionIconGroup",Rc,n),m=Ae({name:"ActionIconGroup",props:t,classes:Io,className:r,style:s,classNames:o,styles:i,unstyled:a,vars:c,varsResolver:P0,rootSelector:"group"});return d.jsx(ue,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...p})});hl.classes=Io;hl.displayName="@mantine/core/ActionIconGroup";const R0={},j0=(n,{size:e,radius:t,variant:r,gradient:s,color:o,autoContrast:i})=>{const a=n.variantColorResolver({color:o||n.primaryColor,theme:n,gradient:s,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":nt(e,"ai-size"),"--ai-radius":t===void 0?void 0:sr(t),"--ai-bg":o||r?a.background:void 0,"--ai-hover":o||r?a.hover:void 0,"--ai-hover-color":o||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":o||r?a.border:void 0}}},hn=Lr((n,e)=>{const t=ie("ActionIcon",R0,n),{className:r,unstyled:s,variant:o,classNames:i,styles:a,style:l,loading:c,loaderProps:u,size:f,color:h,radius:p,__staticSelector:m,gradient:g,vars:y,children:b,disabled:v,"data-disabled":w,autoContrast:k,mod:M,...C}=t,T=Ae({name:["ActionIcon",m],props:t,className:r,style:l,classes:Io,classNames:i,styles:a,unstyled:s,vars:y,varsResolver:j0});return d.jsxs(Fr,{...T("root",{active:!v&&!c&&!w}),...C,unstyled:s,variant:o,size:f,disabled:v||c,ref:e,mod:[{loading:c,disabled:v||w},M],children:[d.jsx(bs,{mounted:!!c,transition:"slide-down",duration:150,children:E=>d.jsx(ue,{component:"span",...T("loader",{style:E}),"aria-hidden":!0,children:d.jsx(vs,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),d.jsx(ue,{component:"span",mod:{loading:c},...T("icon"),children:b})]})});hn.classes=Io;hn.displayName="@mantine/core/ActionIcon";hn.Group=hl;function L0(n){return x.Children.toArray(n).filter(Boolean)}var vf={root:"m_4081bf90"};const F0={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},$0=(n,{grow:e,preventGrowOverflow:t,gap:r,align:s,justify:o,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&t?a:void 0,"--group-gap":Et(r),"--group-align":s,"--group-justify":o,"--group-wrap":i}}),pl=Ne((n,e)=>{const t=ie("Group",F0,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,children:l,gap:c,align:u,justify:f,wrap:h,grow:p,preventGrowOverflow:m,vars:g,variant:y,__size:b,mod:v,...w}=t,k=L0(l),M=k.length,C=Et(c??"md"),E={childWidth:`calc(${100/M}% - (${C} - ${C} / ${M}))`},N=Ae({name:"Group",props:t,stylesCtx:E,className:s,style:o,classes:vf,classNames:r,styles:i,unstyled:a,vars:g,varsResolver:$0});return d.jsx(ue,{...N("root"),ref:e,variant:y,mod:[{grow:p},v],size:b,...w,children:k})});pl.classes=vf;pl.displayName="@mantine/core/Group";const[B0,Ao]=Od({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var kt={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const jc={},_0=(n,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Yt(e)} - ${te(2)})`}}),Po=Ne((n,e)=>{const t=ie("InputDescription",jc,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:h,...p}=ie("InputDescription",jc,t),m=Ao(),g=Ae({name:["InputWrapper",u],props:t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:_0}),y=f&&(m==null?void 0:m.getStyles)||g;return d.jsx(ue,{component:"p",ref:e,variant:h,size:c,...y("description",m!=null&&m.getStyles?{className:s,style:o}:void 0),...p})});Po.classes=kt;Po.displayName="@mantine/core/InputDescription";const z0={},H0=(n,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Yt(e)} - ${te(2)})`}}),Ro=Ne((n,e)=>{const t=ie("InputError",z0,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:h,...p}=t,m=Ae({name:["InputWrapper",u],props:t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:H0}),g=Ao(),y=f&&(g==null?void 0:g.getStyles)||m;return d.jsx(ue,{component:"p",ref:e,variant:h,size:c,...y("error",g!=null&&g.getStyles?{className:s,style:o}:void 0),...p})});Ro.classes=kt;Ro.displayName="@mantine/core/InputError";const Lc={labelElement:"label"},V0=(n,{size:e})=>({label:{"--input-label-size":Yt(e),"--input-asterisk-color":void 0}}),jo=Ne((n,e)=>{const t=ie("InputLabel",Lc,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,labelElement:c,size:u,required:f,htmlFor:h,onMouseDown:p,children:m,__staticSelector:g,variant:y,mod:b,...v}=ie("InputLabel",Lc,t),w=Ae({name:["InputWrapper",g],props:t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:V0}),k=Ao(),M=(k==null?void 0:k.getStyles)||w;return d.jsxs(ue,{...M("label",k!=null&&k.getStyles?{className:s,style:o}:void 0),component:c,variant:y,size:u,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:f},b],onMouseDown:C=>{p==null||p(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...v,children:[m,f&&d.jsx("span",{...M("required"),"aria-hidden":!0,children:" *"})]})});jo.classes=kt;jo.displayName="@mantine/core/InputLabel";const Fc={},ml=Ne((n,e)=>{const t=ie("InputPlaceholder",Fc,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:u,error:f,mod:h,...p}=ie("InputPlaceholder",Fc,t),m=Ae({name:["InputPlaceholder",c],props:t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return d.jsx(ue,{...m("placeholder"),mod:[{error:!!f},h],component:"span",variant:u,ref:e,...p})});ml.classes=kt;ml.displayName="@mantine/core/InputPlaceholder";function W0(n,{hasDescription:e,hasError:t}){const r=n.findIndex(l=>l==="input"),s=n.slice(0,r),o=n.slice(r+1),i=e&&s.includes("description")||t&&s.includes("error");return{offsetBottom:e&&o.includes("description")||t&&o.includes("error"),offsetTop:i}}const U0={labelElement:"label",inputContainer:n=>n,inputWrapperOrder:["label","description","input","error"]},q0=(n,{size:e})=>({label:{"--input-label-size":Yt(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Yt(e)} - ${te(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Yt(e)} - ${te(2)})`}}),gl=Ne((n,e)=>{const t=ie("InputWrapper",U0,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:h,inputWrapperOrder:p,label:m,error:g,description:y,labelProps:b,descriptionProps:v,errorProps:w,labelElement:k,children:M,withAsterisk:C,id:T,required:E,__stylesApiProps:N,mod:F,...z}=t,V=Ae({name:["InputWrapper",f],props:N||t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:q0}),B={size:c,variant:u,__staticSelector:f},D=Ua(T),P=typeof C=="boolean"?C:E,R=(w==null?void 0:w.id)||`${D}-error`,A=(v==null?void 0:v.id)||`${D}-description`,_=D,Y=!!g&&typeof g!="boolean",$=!!y,O=`${Y?R:""} ${$?A:""}`,ae=O.trim().length>0?O.trim():void 0,ve=(b==null?void 0:b.id)||`${D}-label`,De=m&&d.jsx(jo,{labelElement:k,id:ve,htmlFor:_,required:P,...B,...b,children:m},"label"),J=$&&d.jsx(Po,{...v,...B,size:(v==null?void 0:v.size)||B.size,id:(v==null?void 0:v.id)||A,children:y},"description"),ee=d.jsx(x.Fragment,{children:h(M)},"input"),oe=Y&&x.createElement(Ro,{...w,...B,size:(w==null?void 0:w.size)||B.size,key:"error",id:(w==null?void 0:w.id)||R},g),fe=p.map(re=>{switch(re){case"label":return De;case"input":return ee;case"description":return J;case"error":return oe;default:return null}});return d.jsx(B0,{value:{getStyles:V,describedBy:ae,inputId:_,labelId:ve,...W0(p,{hasDescription:$,hasError:Y})},children:d.jsx(ue,{ref:e,variant:u,size:c,mod:[{error:!!g},F],...V("root"),...z,children:fe})})});gl.classes=kt;gl.displayName="@mantine/core/InputWrapper";const Y0={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},K0=(n,e,t)=>({wrapper:{"--input-margin-top":t.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":t.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":nt(e.size,"input-height"),"--input-fz":Yt(e.size),"--input-radius":e.radius===void 0?void 0:sr(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?te(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?te(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?nt(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),At=Lr((n,e)=>{const t=ie("Input",Y0,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:h,error:p,disabled:m,leftSection:g,leftSectionProps:y,leftSectionWidth:b,rightSection:v,rightSectionProps:w,rightSectionWidth:k,rightSectionPointerEvents:M,leftSectionPointerEvents:C,variant:T,vars:E,pointer:N,multiline:F,radius:z,id:V,withAria:B,withErrorStyles:D,mod:P,inputSize:R,...A}=t,{styleProps:_,rest:Y}=Ya(A),$=Ao(),O={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},ae=Ae({name:["Input",c],props:u||t,classes:kt,className:s,style:o,classNames:r,styles:i,unstyled:a,stylesCtx:O,rootSelector:"wrapper",vars:E,varsResolver:K0}),ve=B?{required:l,disabled:m,"aria-invalid":!!p,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||V}:{};return d.jsxs(ue,{...ae("wrapper"),..._,...h,mod:[{error:!!p&&D,pointer:N,disabled:m,multiline:F,"data-with-right-section":!!v,"data-with-left-section":!!g},P],variant:T,size:f,children:[g&&d.jsx("div",{...y,"data-position":"left",...ae("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:g}),d.jsx(ue,{component:"input",...Y,...ve,ref:e,required:l,mod:{disabled:m,error:!!p&&D},variant:T,__size:R,...ae("input")}),v&&d.jsx("div",{...w,"data-position":"right",...ae("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:v})]})});At.classes=kt;At.Wrapper=gl;At.Label=jo;At.Error=Ro;At.Description=Po;At.Placeholder=ml;At.displayName="@mantine/core/Input";function G0(n,e,t){const r=ie(n,e,t),{label:s,description:o,error:i,required:a,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:h,__stylesApiProps:p,errorProps:m,labelProps:g,descriptionProps:y,wrapperProps:b,id:v,size:w,style:k,inputContainer:M,inputWrapperOrder:C,withAsterisk:T,variant:E,vars:N,mod:F,...z}=r,{styleProps:V,rest:B}=Ya(z),D={label:s,description:o,error:i,required:a,classNames:l,className:u,__staticSelector:h,__stylesApiProps:p||r,errorProps:m,labelProps:g,descriptionProps:y,unstyled:f,styles:c,size:w,style:k,inputContainer:M,inputWrapperOrder:C,withAsterisk:T,variant:E,id:v,mod:F,...b};return{...B,classNames:l,styles:c,unstyled:f,wrapperProps:{...D,...V},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:w,__staticSelector:h,__stylesApiProps:p||r,error:i,variant:E,id:v}}}const J0={__staticSelector:"InputBase",withAria:!0},Lo=Lr((n,e)=>{const{inputProps:t,wrapperProps:r,...s}=G0("InputBase",J0,n);return d.jsx(At.Wrapper,{...r,children:d.jsx(At,{...t,...s,ref:e})})});Lo.classes={...At.classes,...At.Wrapper.classes};Lo.displayName="@mantine/core/InputBase";var Fo={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const $c={orientation:"horizontal"},Q0=(n,{borderWidth:e})=>({group:{"--button-border-width":te(e)}}),yl=Ne((n,e)=>{const t=ie("ButtonGroup",$c,n),{className:r,style:s,classNames:o,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,...p}=ie("ButtonGroup",$c,n),m=Ae({name:"ButtonGroup",props:t,classes:Fo,className:r,style:s,classNames:o,styles:i,unstyled:a,vars:c,varsResolver:Q0,rootSelector:"group"});return d.jsx(ue,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...p})});yl.classes=Fo;yl.displayName="@mantine/core/ButtonGroup";const X0={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Z0={},ex=(n,{radius:e,color:t,gradient:r,variant:s,size:o,justify:i,autoContrast:a})=>{const l=n.variantColorResolver({color:t||n.primaryColor,theme:n,gradient:r,variant:s||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":nt(o,"button-height"),"--button-padding-x":nt(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?Yt(o.replace("compact-","")):Yt(o),"--button-radius":e===void 0?void 0:sr(e),"--button-bg":t||s?l.background:void 0,"--button-hover":t||s?l.hover:void 0,"--button-color":l.color,"--button-bd":t||s?l.border:void 0,"--button-hover-color":t||s?l.hoverColor:void 0}}},$o=Lr((n,e)=>{const t=ie("Button",Z0,n),{style:r,vars:s,className:o,color:i,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:h,radius:p,loading:m,loaderProps:g,gradient:y,classNames:b,styles:v,unstyled:w,"data-disabled":k,autoContrast:M,mod:C,...T}=t,E=Ae({name:"Button",props:t,classes:Fo,className:o,style:r,classNames:b,styles:v,unstyled:w,vars:s,varsResolver:ex}),N=!!c,F=!!u;return d.jsxs(Fr,{ref:e,...E("root",{active:!a&&!m&&!k}),unstyled:w,variant:h,disabled:a||m,mod:[{disabled:a||k,loading:m,block:f,"with-left-section":N,"with-right-section":F},C],...T,children:[d.jsx(bs,{mounted:!!m,transition:X0,duration:150,children:z=>d.jsx(ue,{component:"span",...E("loader",{style:z}),"aria-hidden":!0,children:d.jsx(vs,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),d.jsxs("span",{...E("inner"),children:[c&&d.jsx(ue,{component:"span",...E("section"),mod:{position:"left"},children:c}),d.jsx(ue,{component:"span",mod:{loading:m},...E("label"),children:l}),u&&d.jsx(ue,{component:"span",...E("section"),mod:{position:"right"},children:u})]})]})});$o.classes=Fo;$o.displayName="@mantine/core/Button";$o.Group=yl;var wf={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Bc={withShadow:!0},tx=(n,{radius:e,size:t})=>({root:{"--cs-radius":e===void 0?void 0:sr(e),"--cs-size":te(t)}}),Gn=Lr((n,e)=>{const t=ie("ColorSwatch",Bc,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,color:c,size:u,radius:f,withShadow:h,children:p,variant:m,...g}=ie("ColorSwatch",Bc,t),y=Ae({name:"ColorSwatch",props:t,classes:wf,className:s,style:o,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:tx});return d.jsxs(ue,{ref:e,variant:m,size:u,...y("root",{focusable:!0}),...g,children:[d.jsx("span",{...y("alphaOverlay")}),h&&d.jsx("span",{...y("shadowOverlay")}),d.jsx("span",{...y("colorOverlay",{style:{backgroundColor:c}})}),d.jsx("span",{...y("childrenOverlay"),children:p})]})});Gn.classes=wf;Gn.displayName="@mantine/core/ColorSwatch";const[nx,xl]=Od(null),bl=x.forwardRef(({position:n,...e},t)=>d.jsx(ue,{ref:t,__vars:{"--thumb-y-offset":`${n.y*100}%`,"--thumb-x-offset":`${n.x*100}%`},...e}));bl.displayName="@mantine/core/ColorPickerThumb";var vl={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const rx={},wl=Ne((n,e)=>{var _;const t=ie("ColorSlider",rx,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,onChange:c,onChangeEnd:u,maxValue:f,round:h,size:p="md",focusable:m=!0,value:g,overlays:y,thumbColor:b="transparent",onScrubStart:v,onScrubEnd:w,__staticSelector:k="ColorPicker",...M}=t,C=Ae({name:k,classes:vl,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a}),E=((_=xl())==null?void 0:_.getStyles)||C,N=Zt(),[F,z]=x.useState({y:0,x:g/f}),V=x.useRef(F),B=Y=>h?Math.round(Y*f):Y*f,{ref:D}=Ld(({x:Y,y:$})=>{V.current={x:Y,y:$},c==null||c(B(Y))},{onScrubEnd:()=>{const{x:Y}=V.current;u==null||u(B(Y)),w==null||w()},onScrubStart:v});Ht(()=>{z({y:0,x:g/f})},[g]);const P=(Y,$)=>{Y.preventDefault();const O=jd($);c==null||c(B(O.x)),u==null||u(B(O.x))},R=Y=>{switch(Y.key){case"ArrowRight":{P(Y,{x:F.x+.05,y:F.y});break}case"ArrowLeft":{P(Y,{x:F.x-.05,y:F.y});break}}},A=y.map((Y,$)=>x.createElement("div",{...E("sliderOverlay"),style:Y,key:$}));return d.jsxs(ue,{...M,ref:jr(D,e),...E("slider"),role:"slider","aria-valuenow":g,"aria-valuemax":f,"aria-valuemin":0,tabIndex:m?0:-1,onKeyDown:R,"data-focus-ring":N.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${p})`},children:[A,d.jsx(bl,{position:F,...E("thumb",{style:{top:te(1),background:b}})})]})});wl.displayName="@mantine/core/ColorSlider";function bt(n,e=0,t=10**e){return Math.round(t*n)/t}function sx({h:n,s:e,l:t,a:r}){const s=e*((t<50?t:100-t)/100);return{h:n,s:s>0?2*s/(t+s)*100:0,v:t+s,a:r}}const ox={grad:360/400,turn:360,rad:360/(Math.PI*2)};function ix(n,e="deg"){return Number(n)*(ox[e]||1)}const ax=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function _c(n){const e=ax.exec(n);return e?sx({h:ix(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}}function ra({r:n,g:e,b:t,a:r}){const s=Math.max(n,e,t),o=s-Math.min(n,e,t),i=o?s===n?(e-t)/o:s===e?2+(t-n)/o:4+(n-e)/o:0;return{h:bt(60*(i<0?i+6:i),3),s:bt(s?o/s*100:0,3),v:bt(s/255*100,3),a:r}}function sa(n){const e=n[0]==="#"?n.slice(1):n;return e.length===3?ra({r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}):ra({r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:1})}function lx(n){const e=n[0]==="#"?n.slice(1):n,t=i=>bt(parseInt(i,16)/255,3);if(e.length===4){const i=e.slice(0,3),a=t(e[3]+e[3]);return{...sa(i),a}}const r=e.slice(0,6),s=t(e.slice(6,8));return{...sa(r),a:s}}const cx=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function zc(n){const e=cx.exec(n);return e?ra({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}}const Cf={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},ux={hex:sa,hexa:lx,rgb:zc,rgba:zc,hsl:_c,hsla:_c};function dx(n){for(const[,e]of Object.entries(Cf))if(e.test(n))return!0;return!1}function Os(n){if(typeof n!="string")return{h:0,s:0,v:0,a:1};if(n==="transparent")return{h:0,s:0,v:0,a:0};const e=n.trim();for(const[t,r]of Object.entries(Cf))if(r.test(e))return ux[t](e);return{h:0,s:0,v:0,a:1}}const fx={},kf=x.forwardRef((n,e)=>{const{value:t,onChange:r,onChangeEnd:s,color:o,...i}=ie("AlphaSlider",fx,n);return d.jsx(wl,{...i,ref:e,value:t,onChange:a=>r==null?void 0:r(bt(a,2)),onChangeEnd:a=>s==null?void 0:s(bt(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${te(8)} ${te(8)}`,backgroundPosition:`0 0, 0 ${te(4)}, ${te(4)} ${te(-4)}, ${te(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${o})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${te(1)} inset, rgb(0, 0, 0, .15) 0 0 ${te(4)} inset`}]})});kf.displayName="@mantine/core/AlphaSlider";function Sf({h:n,s:e,v:t,a:r}){const s=n/360*6,o=e/100,i=t/100,a=Math.floor(s),l=i*(1-o),c=i*(1-(s-a)*o),u=i*(1-(1-s+a)*o),f=a%6;return{r:bt([i,c,l,l,u,i][f]*255),g:bt([u,i,i,c,l,l][f]*255),b:bt([l,l,u,i,i,c][f]*255),a:bt(r,2)}}function Hc(n,e){const{r:t,g:r,b:s,a:o}=Sf(n);return e?`rgba(${t}, ${r}, ${s}, ${bt(o,2)})`:`rgb(${t}, ${r}, ${s})`}function Vc({h:n,s:e,v:t,a:r},s){const o=(200-e)*t/100,i={h:Math.round(n),s:Math.round(o>0&&o<200?e*t/100/(o<=100?o:200-o)*100:0),l:Math.round(o/2)};return s?`hsla(${i.h}, ${i.s}%, ${i.l}%, ${bt(r,2)})`:`hsl(${i.h}, ${i.s}%, ${i.l}%)`}function qs(n){const e=n.toString(16);return e.length<2?`0${e}`:e}function Mf(n){const{r:e,g:t,b:r}=Sf(n);return`#${qs(e)}${qs(t)}${qs(r)}`}function hx(n){const e=Math.round(n.a*255);return`${Mf(n)}${qs(e)}`}const ui={hex:Mf,hexa:n=>hx(n),rgb:n=>Hc(n,!1),rgba:n=>Hc(n,!0),hsl:n=>Vc(n,!1),hsla:n=>Vc(n,!0)};function on(n,e){return e?n in ui?ui[n](e):ui.hex(e):"#000000"}const Tf=x.forwardRef((n,e)=>{const{value:t,onChange:r,onChangeEnd:s,color:o,...i}=ie("HueSlider",{},n);return d.jsx(wl,{...i,ref:e,value:t,onChange:r,onChangeEnd:s,maxValue:360,thumbColor:`hsl(${t}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${te(1)} inset, rgb(0, 0, 0, .15) 0 0 ${te(4)} inset`}]})});Tf.displayName="@mantine/core/HueSlider";function Df({className:n,onChange:e,onChangeEnd:t,value:r,saturationLabel:s,focusable:o=!0,size:i,color:a,onScrubStart:l,onScrubEnd:c,...u}){const{getStyles:f}=xl(),[h,p]=x.useState({x:r.s/100,y:1-r.v/100}),m=x.useRef(h),{ref:g}=Ld(({x:v,y:w})=>{m.current={x:v,y:w},e({s:Math.round(v*100),v:Math.round((1-w)*100)})},{onScrubEnd:()=>{const{x:v,y:w}=m.current;t({s:Math.round(v*100),v:Math.round((1-w)*100)}),c==null||c()},onScrubStart:l});x.useEffect(()=>{p({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const y=(v,w)=>{v.preventDefault();const k=jd(w);e({s:Math.round(k.x*100),v:Math.round((1-k.y)*100)}),t({s:Math.round(k.x*100),v:Math.round((1-k.y)*100)})},b=v=>{switch(v.key){case"ArrowUp":{y(v,{y:h.y-.05,x:h.x});break}case"ArrowDown":{y(v,{y:h.y+.05,x:h.x});break}case"ArrowRight":{y(v,{x:h.x+.05,y:h.y});break}case"ArrowLeft":{y(v,{x:h.x-.05,y:h.y});break}}};return d.jsxs(ue,{...f("saturation"),ref:g,...u,role:"slider","aria-label":s,"aria-valuenow":h.x,"aria-valuetext":on("rgba",r),tabIndex:o?0:-1,onKeyDown:b,children:[d.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),d.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),d.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),d.jsx(bl,{position:h,...f("thumb",{style:{backgroundColor:a}})})]})}Df.displayName="@mantine/core/Saturation";const Ef=x.forwardRef(({className:n,datatype:e,setValue:t,onChangeEnd:r,size:s,focusable:o,data:i,swatchesPerRow:a,...l},c)=>{const u=xl(),f=i.map((h,p)=>x.createElement(Gn,{...u.getStyles("swatch"),unstyled:u.unstyled,component:"button",type:"button",color:h,key:p,radius:"sm",onClick:()=>{t(h),r==null||r(h)},"aria-label":h,tabIndex:o?0:-1,"data-swatch":!0}));return d.jsx(ue,{...u.getStyles("swatches"),ref:c,...l,children:f})});Ef.displayName="@mantine/core/Swatches";const px={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},mx=(n,{size:e,swatchesPerRow:t})=>({wrapper:{"--cp-preview-size":nt(e,"cp-preview-size"),"--cp-width":nt(e,"cp-width"),"--cp-body-spacing":Et(e),"--cp-swatch-size":`${100/t}%`,"--cp-thumb-size":nt(e,"cp-thumb-size"),"--cp-saturation-height":nt(e,"cp-saturation-height")}}),Cl=Ne((n,e)=>{const t=ie("ColorPicker",px,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,format:c,value:u,defaultValue:f,onChange:h,onChangeEnd:p,withPicker:m,size:g,saturationLabel:y,hueLabel:b,alphaLabel:v,focusable:w,swatches:k,swatchesPerRow:M,fullWidth:C,onColorSwatchClick:T,__staticSelector:E,mod:N,...F}=t,z=Ae({name:E,props:t,classes:vl,className:s,style:o,classNames:r,styles:i,unstyled:a,rootSelector:"wrapper",vars:l,varsResolver:mx}),V=x.useRef(c),B=x.useRef(),D=x.useRef(-1),P=x.useRef(!1),R=c==="hexa"||c==="rgba"||c==="hsla",[A,_,Y]=Fd({value:u,defaultValue:f,finalValue:"#FFFFFF",onChange:h}),[$,O]=x.useState(Os(A)),ae=()=>{window.clearTimeout(D.current),P.current=!0},ve=()=>{window.clearTimeout(D.current),D.current=window.setTimeout(()=>{P.current=!1},200)},De=J=>{O(ee=>{const oe={...ee,...J};return B.current=on(V.current,oe),oe}),_(B.current)};return Ht(()=>{dx(u)&&!P.current&&O(Os(u))},[u]),Ht(()=>{V.current=c,_(on(c,$))},[c]),d.jsx(nx,{value:{getStyles:z,unstyled:a},children:d.jsxs(ue,{ref:e,...z("wrapper"),size:g,mod:[{"full-width":C},N],...F,children:[m&&d.jsxs(d.Fragment,{children:[d.jsx(Df,{value:$,onChange:De,onChangeEnd:({s:J,v:ee})=>p==null?void 0:p(on(V.current,{...$,s:J,v:ee})),color:A,size:g,focusable:w,saturationLabel:y,onScrubStart:ae,onScrubEnd:ve}),d.jsxs("div",{...z("body"),children:[d.jsxs("div",{...z("sliders"),children:[d.jsx(Tf,{value:$.h,onChange:J=>De({h:J}),onChangeEnd:J=>p==null?void 0:p(on(V.current,{...$,h:J})),size:g,focusable:w,"aria-label":b,onScrubStart:ae,onScrubEnd:ve}),R&&d.jsx(kf,{value:$.a,onChange:J=>De({a:J}),onChangeEnd:J=>{p==null||p(on(V.current,{...$,a:J}))},size:g,color:on("hex",$),focusable:w,"aria-label":v,onScrubStart:ae,onScrubEnd:ve})]}),R&&d.jsx(Gn,{color:A,radius:"sm",size:"var(--cp-preview-size)",...z("preview")})]})]}),Array.isArray(k)&&d.jsx(Ef,{data:k,swatchesPerRow:M,focusable:w,setValue:_,onChangeEnd:J=>{const ee=on(c,Os(J));T==null||T(ee),p==null||p(ee),Y||O(Os(J))}})]})})});Cl.classes=vl;Cl.displayName="@mantine/core/ColorPicker";var Of={root:"m_3eebeb36",label:"m_9e365f20"};const gx={orientation:"horizontal"},yx=(n,{color:e,variant:t,size:r})=>({root:{"--divider-color":e?So(e,n):void 0,"--divider-border-style":t,"--divider-size":nt(r,"divider-size")}}),ln=Ne((n,e)=>{const t=ie("Divider",gx,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,color:c,orientation:u,label:f,labelPosition:h,mod:p,...m}=t,g=Ae({name:"Divider",classes:Of,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:yx});return d.jsx(ue,{ref:e,mod:[{orientation:u,"with-label":!!f},p],...g("root"),...m,role:"separator",children:f&&d.jsx(ue,{component:"span",mod:{position:h},...g("label"),children:f})})});ln.classes=Of;ln.displayName="@mantine/core/Divider";const xx={duration:100,transition:"fade"};function bx(n,e){return{...xx,...e,...n}}function vx({offset:n,position:e,defaultOpened:t}){const[r,s]=x.useState(t),o=x.useRef(),{x:i,y:a,elements:l,refs:c,update:u,placement:f}=cl({placement:e,middleware:[ol({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=f.includes("right")?n:e.includes("left")?n*-1:0,p=f.includes("bottom")?n:e.includes("top")?n*-1:0,m=x.useCallback(({clientX:g,clientY:y})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y,left:g+h,top:y+p,right:g,bottom:y}}})},[l.reference]);return x.useEffect(()=>{if(c.floating.current){const g=o.current;g.addEventListener("mousemove",m);const y=Kt(c.floating.current);return y.forEach(b=>{b.addEventListener("scroll",u)}),()=>{g.removeEventListener("mousemove",m),y.forEach(b=>{b.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,m,r]),{handleMouseMove:m,x:i,y:a,opened:r,setOpened:s,boundaryRef:o,floating:c.setFloating}}var Bo={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const wx={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Wa("popover")},Cx=(n,{radius:e,color:t})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:sr(e),"--tooltip-bg":t?So(t,n):void 0,"--tooltip-color":t?"var(--mantine-color-white)":void 0}}),kl=Ne((n,e)=>{const t=ie("TooltipFloating",wx,n),{children:r,refProp:s,withinPortal:o,style:i,className:a,classNames:l,styles:c,unstyled:u,radius:f,color:h,label:p,offset:m,position:g,multiline:y,zIndex:b,disabled:v,defaultOpened:w,variant:k,vars:M,portalProps:C,...T}=t,E=Zt(),N=Ae({name:"TooltipFloating",props:t,classes:Bo,className:a,style:i,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:M,varsResolver:Cx}),{handleMouseMove:F,x:z,y:V,opened:B,boundaryRef:D,floating:P,setOpened:R}=vx({offset:m,position:g,defaultOpened:w});if(!To(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const A=jr(D,r.ref,e),_=$=>{var O,ae;(ae=(O=r.props).onMouseEnter)==null||ae.call(O,$),F($),R(!0)},Y=$=>{var O,ae;(ae=(O=r.props).onMouseLeave)==null||ae.call(O,$),R(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(No,{...C,withinPortal:o,children:d.jsx(ue,{...T,...N("tooltip",{style:{...zd(i,E),zIndex:b,display:!v&&B?"block":"none",top:(V&&Math.round(V))??"",left:(z&&Math.round(z))??""}}),variant:k,ref:P,mod:{multiline:y},children:p})}),x.cloneElement(r,{...r.props,[s]:A,onMouseEnter:_,onMouseLeave:Y})]})});kl.classes=Bo;kl.displayName="@mantine/core/TooltipFloating";const Nf=x.createContext(!1),kx=Nf.Provider,Sx=()=>x.useContext(Nf),Mx={openDelay:0,closeDelay:0};function If(n){const{openDelay:e,closeDelay:t,children:r}=ie("TooltipGroup",Mx,n);return d.jsx(kx,{value:!0,children:d.jsx(s0,{delay:{open:e,close:t},children:r})})}If.displayName="@mantine/core/TooltipGroup";function Tx(n){var C,T,E;const[e,t]=x.useState(n.defaultOpened),s=typeof n.opened=="boolean"?n.opened:e,o=Sx(),i=Ua(),{delay:a,currentId:l,setCurrentId:c}=df(),u=x.useCallback(N=>{t(N),N&&c(i)},[c,i]),{x:f,y:h,context:p,refs:m,update:g,placement:y,middlewareData:{arrow:{x:b,y:v}={}}}=cl({strategy:n.strategy,placement:n.position,open:s,onOpenChange:u,middleware:[of(n.offset),ol({padding:8}),ea(),af({element:n.arrowRef,padding:n.arrowOffset}),...n.inline?[ta()]:[]]}),{getReferenceProps:w,getFloatingProps:k}=d0([r0(p,{enabled:(C=n.events)==null?void 0:C.hover,delay:o?a:{open:n.openDelay,close:n.closeDelay},mouseOnly:!((T=n.events)!=null&&T.touch)}),u0(p,{enabled:(E=n.events)==null?void 0:E.focus,visibleOnly:!0}),h0(p,{role:"tooltip"}),l0(p,{enabled:typeof n.opened>"u"}),o0(p,{id:i})]);xf({opened:s,position:n.position,positionDependencies:n.positionDependencies,floating:{refs:m,update:g}}),Ht(()=>{var N;(N=n.onPositionChange)==null||N.call(n,y)},[y]);const M=s&&l&&l!==i;return{x:f,y:h,arrowX:b,arrowY:v,reference:m.setReference,floating:m.setFloating,getFloatingProps:k,getReferenceProps:w,isGroupPhase:M,opened:s,placement:y}}const Wc={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Wa("popover"),positionDependencies:[]},Dx=(n,{radius:e,color:t})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:sr(e),"--tooltip-bg":t?So(t,n):void 0,"--tooltip-color":t?"var(--mantine-color-white)":void 0}}),_r=Ne((n,e)=>{const t=ie("Tooltip",Wc,n),{children:r,position:s,refProp:o,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:f,withinPortal:h,radius:p,color:m,classNames:g,styles:y,unstyled:b,style:v,className:w,withArrow:k,arrowSize:M,arrowOffset:C,arrowRadius:T,arrowPosition:E,offset:N,transitionProps:F,multiline:z,events:V,zIndex:B,disabled:D,positionDependencies:P,onClick:R,onMouseEnter:A,onMouseLeave:_,inline:Y,variant:$,keepMounted:O,vars:ae,portalProps:ve,mod:De,floatingStrategy:J,...ee}=ie("Tooltip",Wc,t),{dir:oe}=Ga(),fe=x.useRef(null),re=Tx({position:ff(oe,s),closeDelay:l,openDelay:a,onPositionChange:c,opened:u,defaultOpened:f,events:V,arrowRef:fe,arrowOffset:C,offset:typeof N=="number"?N+(k?M/2:0):N,positionDependencies:[...P,r],inline:Y,strategy:J}),pe=Ae({name:"Tooltip",props:t,classes:Bo,className:w,style:v,classNames:g,styles:y,unstyled:b,rootSelector:"tooltip",vars:ae,varsResolver:Dx});if(!To(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const yt=jr(re.reference,r.ref,e),Mt=bx(F,{duration:100,transition:"fade"});return d.jsxs(d.Fragment,{children:[d.jsx(No,{...ve,withinPortal:h,children:d.jsx(bs,{...Mt,keepMounted:O,mounted:!D&&!!re.opened,duration:re.isGroupPhase?10:Mt.duration,children:He=>d.jsxs(ue,{...ee,"data-fixed":J==="fixed"||void 0,variant:$,mod:[{multiline:z},De],...re.getFloatingProps({ref:re.floating,className:pe("tooltip").className,style:{...pe("tooltip").style,...He,zIndex:B,top:re.y??0,left:re.x??0}}),children:[i,d.jsx(ul,{ref:fe,arrowX:re.arrowX,arrowY:re.arrowY,visible:k,position:re.placement,arrowSize:M,arrowOffset:C,arrowRadius:T,arrowPosition:E,...pe("arrow")})]})})}),x.cloneElement(r,re.getReferenceProps({onClick:R,onMouseEnter:A,onMouseLeave:_,onMouseMove:t.onMouseMove,onPointerDown:t.onPointerDown,onPointerEnter:t.onPointerEnter,[o]:yt,className:tn(w,r.props.className),...r.props}))]})});_r.classes=Bo;_r.displayName="@mantine/core/Tooltip";_r.Floating=kl;_r.Group=If;function Ex({spacing:n,verticalSpacing:e,cols:t,selector:r}){var u;const s=Zt(),o=e===void 0?n:e,i=ys({"--sg-spacing-x":Et(wr(n)),"--sg-spacing-y":Et(wr(o)),"--sg-cols":(u=wr(t))==null?void 0:u.toString()}),a=_n(s.breakpoints).reduce((f,h)=>(f[h]||(f[h]={}),typeof n=="object"&&n[h]!==void 0&&(f[h]["--sg-spacing-x"]=Et(n[h])),typeof o=="object"&&o[h]!==void 0&&(f[h]["--sg-spacing-y"]=Et(o[h])),typeof t=="object"&&t[h]!==void 0&&(f[h]["--sg-cols"]=t[h]),f),{}),c=Wm(_n(a),s).filter(f=>_n(a[f.value]).length>0).map(f=>({query:`(min-width: ${s.breakpoints[f.value]})`,styles:a[f.value]}));return d.jsx(qa,{styles:i,media:c,selector:r})}function di(n){return typeof n=="object"&&n!==null?_n(n):[]}function Ox(n){return n.sort((e,t)=>Zs(e)-Zs(t))}function Nx({spacing:n,verticalSpacing:e,cols:t}){const r=Array.from(new Set([...di(n),...di(e),...di(t)]));return Ox(r)}function Ix({spacing:n,verticalSpacing:e,cols:t,selector:r}){var c;const s=e===void 0?n:e,o=ys({"--sg-spacing-x":Et(wr(n)),"--sg-spacing-y":Et(wr(s)),"--sg-cols":(c=wr(t))==null?void 0:c.toString()}),i=Nx({spacing:n,verticalSpacing:e,cols:t}),a=i.reduce((u,f)=>(u[f]||(u[f]={}),typeof n=="object"&&n[f]!==void 0&&(u[f]["--sg-spacing-x"]=Et(n[f])),typeof s=="object"&&s[f]!==void 0&&(u[f]["--sg-spacing-y"]=Et(s[f])),typeof t=="object"&&t[f]!==void 0&&(u[f]["--sg-cols"]=t[f]),u),{}),l=i.map(u=>({query:`simple-grid (min-width: ${u})`,styles:a[u]}));return d.jsx(qa,{styles:o,container:l,selector:r})}var Af={container:"m_925c2d2c",root:"m_2415a157"};const Ax={cols:1,spacing:"md",type:"media"},Sl=Ne((n,e)=>{const t=ie("SimpleGrid",Ax,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,cols:c,verticalSpacing:u,spacing:f,type:h,...p}=t,m=Ae({name:"SimpleGrid",classes:Af,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a,vars:l}),g=_d();return h==="container"?d.jsxs(d.Fragment,{children:[d.jsx(Ix,{...t,selector:`.${g}`}),d.jsx("div",{...m("container"),children:d.jsx(ue,{ref:e,...m("root",{className:g}),...p})})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ex,{...t,selector:`.${g}`}),d.jsx(ue,{ref:e,...m("root",{className:g}),...p})]})});Sl.classes=Af;Sl.displayName="@mantine/core/SimpleGrid";const Px={},Ml=Ne((n,e)=>{const t=ie("TextInput",Px,n);return d.jsx(Lo,{component:"input",ref:e,...t,__staticSelector:"TextInput"})});Ml.classes=Lo.classes;Ml.displayName="@mantine/core/TextInput";var Pf={root:"m_d6493fad"};const Rx={},Tl=Ne((n,e)=>{const t=ie("TypographyStylesProvider",Rx,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,...l}=t,c=Ae({name:"TypographyStylesProvider",classes:Pf,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a});return d.jsx(ue,{ref:e,...c("root"),...l})});Tl.classes=Pf;Tl.displayName="@mantine/core/TypographyStylesProvider";const Rf=x.createContext({});function jx(n){return Pa("MuiAccordion",n)}const Lx=Aa("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Ns=Lx,Fx=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],$x=n=>{const{classes:e,square:t,expanded:r,disabled:s,disableGutters:o}=n;return La({root:["root",!t&&"rounded",r&&"expanded",s&&"disabled",!o&&"gutters"],region:["region"]},jx,e)},Bx=en(Gp,{name:"MuiAccordion",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Ns.region}`]:e.region},e.root,!t.square&&e.rounded,!t.disableGutters&&e.gutters]}})(({theme:n})=>{const e={duration:n.transitions.duration.shortest};return{position:"relative",transition:n.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(n.vars||n).palette.divider,transition:n.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Ns.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Ns.disabled}`]:{backgroundColor:(n.vars||n).palette.action.disabledBackground}}},({theme:n,ownerState:e})=>ft({},!e.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(n.vars||n).shape.borderRadius,borderBottomRightRadius:(n.vars||n).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!e.disableGutters&&{[`&.${Ns.expanded}`]:{margin:"16px 0"}})),_x=x.forwardRef(function(e,t){const r=Ra({props:e,name:"MuiAccordion"}),{children:s,className:o,defaultExpanded:i=!1,disabled:a=!1,disableGutters:l=!1,expanded:c,onChange:u,square:f=!1,slots:h={},slotProps:p={},TransitionComponent:m,TransitionProps:g}=r,y=ja(r,Fx),[b,v]=Jp({controlled:c,default:i,name:"Accordion",state:"expanded"}),w=x.useCallback(B=>{v(!b),u&&u(B,!b)},[b,u,v]),[k,...M]=x.Children.toArray(s),C=x.useMemo(()=>({expanded:b,disabled:a,disableGutters:l,toggle:w}),[b,a,l,w]),T=ft({},r,{square:f,disabled:a,disableGutters:l,expanded:b}),E=$x(T),N=ft({transition:m},h),F=ft({transition:g},p),[z,V]=Qp("transition",{elementType:Xp,externalForwardedProps:{slots:N,slotProps:F},ownerState:T});return d.jsxs(Bx,ft({className:eo(E.root,o),ref:t,ownerState:T,square:f},y,{children:[d.jsx(Rf.Provider,{value:C,children:k}),d.jsx(z,ft({in:b,timeout:"auto"},V,{children:d.jsx("div",{"aria-labelledby":k.props.id,id:k.props["aria-controls"],role:"region",className:E.region,children:M})}))]}))}),zx=_x;function Hx(n){return Pa("MuiAccordionDetails",n)}Aa("MuiAccordionDetails",["root"]);const Vx=["className"],Wx=n=>{const{classes:e}=n;return La({root:["root"]},Hx,e)},Ux=en("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>({padding:n.spacing(1,2,2)})),qx=x.forwardRef(function(e,t){const r=Ra({props:e,name:"MuiAccordionDetails"}),{className:s}=r,o=ja(r,Vx),i=r,a=Wx(i);return d.jsx(Ux,ft({className:eo(a.root,s),ref:t,ownerState:i},o))}),ws=qx;function Yx(n){return Pa("MuiAccordionSummary",n)}const Kx=Aa("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),xr=Kx,Gx=["children","className","expandIcon","focusVisibleClassName","onClick"],Jx=n=>{const{classes:e,expanded:t,disabled:r,disableGutters:s}=n;return La({root:["root",t&&"expanded",r&&"disabled",!s&&"gutters"],focusVisible:["focusVisible"],content:["content",t&&"expanded",!s&&"contentGutters"],expandIconWrapper:["expandIconWrapper",t&&"expanded"]},Yx,e)},Qx=en(Zp,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n,ownerState:e})=>{const t={duration:n.transitions.duration.shortest};return ft({display:"flex",minHeight:48,padding:n.spacing(0,2),transition:n.transitions.create(["min-height","background-color"],t),[`&.${xr.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${xr.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`&:hover:not(.${xr.disabled})`]:{cursor:"pointer"}},!e.disableGutters&&{[`&.${xr.expanded}`]:{minHeight:64}})}),Xx=en("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(n,e)=>e.content})(({theme:n,ownerState:e})=>ft({display:"flex",flexGrow:1,margin:"12px 0"},!e.disableGutters&&{transition:n.transitions.create(["margin"],{duration:n.transitions.duration.shortest}),[`&.${xr.expanded}`]:{margin:"20px 0"}})),Zx=en("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(n,e)=>e.expandIconWrapper})(({theme:n})=>({display:"flex",color:(n.vars||n).palette.action.active,transform:"rotate(0deg)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),[`&.${xr.expanded}`]:{transform:"rotate(180deg)"}})),eb=x.forwardRef(function(e,t){const r=Ra({props:e,name:"MuiAccordionSummary"}),{children:s,className:o,expandIcon:i,focusVisibleClassName:a,onClick:l}=r,c=ja(r,Gx),{disabled:u=!1,disableGutters:f,expanded:h,toggle:p}=x.useContext(Rf),m=b=>{p&&p(b),l&&l(b)},g=ft({},r,{expanded:h,disabled:u,disableGutters:f}),y=Jx(g);return d.jsxs(Qx,ft({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":h,className:eo(y.root,o),focusVisibleClassName:eo(y.focusVisible,a),onClick:m,ref:t,ownerState:g},c,{children:[d.jsx(Xx,{className:y.content,ownerState:g,children:s}),i&&d.jsx(Zx,{className:y.expandIconWrapper,ownerState:g,children:i})]}))}),tb=eb;function Ys(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function Ks(n,e){Q(2,arguments);var t=G(n),r=Oe(e);if(isNaN(r))return new Date(NaN);if(!r)return t;var s=t.getDate(),o=new Date(t.getTime());o.setMonth(t.getMonth()+r+1,0);var i=o.getDate();return s>=i?o:(t.setFullYear(o.getFullYear(),o.getMonth(),s),t)}var nb=36e5;function rb(n,e){Q(2,arguments);var t=Oe(e);return Ba(n,t*nb)}function zn(n,e){var t,r,s,o,i,a,l,c;Q(1,arguments);var u=Rr(),f=Oe((t=(r=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(i=e.locale)===null||i===void 0||(a=i.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=G(n),p=h.getDay(),m=(p<f?7:0)+p-f;return h.setDate(h.getDate()-m),h.setHours(0,0,0,0),h}function Or(n){Q(1,arguments);var e=G(n);return e.setHours(0,0,0,0),e}var sb=864e5;function ob(n,e){Q(2,arguments);var t=Or(n),r=Or(e),s=t.getTime()-Bi(t),o=r.getTime()-Bi(r);return Math.round((s-o)/sb)}var ib=6e4;function ab(n,e){Q(2,arguments);var t=Oe(e);return Ba(n,t*ib)}function lb(n,e){Q(2,arguments);var t=Oe(e);return Ba(n,t*1e3)}function cb(n,e){Q(2,arguments);var t=Oe(e),r=t*7;return Ys(n,r)}function Uc(n,e){Q(2,arguments);var t=Oe(e);return Ks(n,t*12)}function ts(n,e){Q(2,arguments);var t=G(n),r=G(e),s=t.getTime()-r.getTime();return s<0?-1:s>0?1:s}var _o=6e4,zo=36e5,ub=1e3;function db(n,e){Q(2,arguments);var t=Or(n),r=Or(e);return t.getTime()===r.getTime()}function fb(n,e){Q(2,arguments);var t=G(n),r=G(e),s=t.getFullYear()-r.getFullYear(),o=t.getMonth()-r.getMonth();return s*12+o}function hb(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getFullYear()-r.getFullYear()}function qc(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function jf(n,e){Q(2,arguments);var t=G(n),r=G(e),s=qc(t,r),o=Math.abs(ob(t,r));t.setDate(t.getDate()-s*o);var i=+(qc(t,r)===-s),a=s*(o-i);return a===0?0:a}function Ho(n,e){return Q(2,arguments),G(n).getTime()-G(e).getTime()}var Yc={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},pb="trunc";function Cs(n){return n?Yc[n]:Yc[pb]}function mb(n,e,t){Q(2,arguments);var r=Ho(n,e)/zo;return Cs(t==null?void 0:t.roundingMethod)(r)}function gb(n,e,t){Q(2,arguments);var r=Ho(n,e)/_o;return Cs(t==null?void 0:t.roundingMethod)(r)}function oa(n){Q(1,arguments);var e=G(n);return e.setHours(23,59,59,999),e}function ia(n){Q(1,arguments);var e=G(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function yb(n){Q(1,arguments);var e=G(n);return oa(e).getTime()===ia(e).getTime()}function Lf(n,e){Q(2,arguments);var t=G(n),r=G(e),s=ts(t,r),o=Math.abs(fb(t,r)),i;if(o<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-s*o);var a=ts(t,r)===-s;yb(G(n))&&o===1&&ts(n,r)===1&&(a=!1),i=s*(o-Number(a))}return i===0?0:i}function xb(n,e,t){Q(2,arguments);var r=Lf(n,e)/3;return Cs(t==null?void 0:t.roundingMethod)(r)}function bb(n,e,t){Q(2,arguments);var r=Ho(n,e)/1e3;return Cs(t==null?void 0:t.roundingMethod)(r)}function vb(n,e,t){Q(2,arguments);var r=jf(n,e)/7;return Cs(t==null?void 0:t.roundingMethod)(r)}function wb(n,e){Q(2,arguments);var t=G(n),r=G(e),s=ts(t,r),o=Math.abs(hb(t,r));t.setFullYear(1584),r.setFullYear(1584);var i=ts(t,r)===-s,a=s*(o-Number(i));return a===0?0:a}function Cb(n,e){var t;Q(1,arguments);var r=n||{},s=G(r.start),o=G(r.end),i=o.getTime();if(!(s.getTime()<=i))throw new RangeError("Invalid interval");var a=[],l=s;l.setHours(0,0,0,0);var c=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=i;)a.push(G(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function Kc(n){Q(1,arguments);var e=G(n);return e.setDate(1),e.setHours(0,0,0,0),e}function fi(n){Q(1,arguments);var e=G(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function Is(n){Q(1,arguments);var e=G(n),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function hi(n,e){var t,r,s,o,i,a,l,c;Q(1,arguments);var u=Rr(),f=Oe((t=(r=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(i=e.locale)===null||i===void 0||(a=i.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=G(n),p=h.getDay(),m=(p<f?-7:0)+6-(p-f);return h.setDate(h.getDate()+m),h.setHours(23,59,59,999),h}function kb(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function Sb(n,e){var t,r;Q(1,arguments);var s=G(n);if(isNaN(s.getTime()))throw new RangeError("Invalid time value");var o=String((t=e==null?void 0:e.format)!==null&&t!==void 0?t:"extended"),i=String((r=e==null?void 0:e.representation)!==null&&r!==void 0?r:"complete");if(o!=="extended"&&o!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(i!=="date"&&i!=="time"&&i!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",l="",c=o==="extended"?"-":"",u=o==="extended"?":":"";if(i!=="time"){var f=sn(s.getDate(),2),h=sn(s.getMonth()+1,2),p=sn(s.getFullYear(),4);a="".concat(p).concat(c).concat(h).concat(c).concat(f)}if(i!=="date"){var m=s.getTimezoneOffset();if(m!==0){var g=Math.abs(m),y=sn(Math.floor(g/60),2),b=sn(g%60,2),v=m<0?"+":"-";l="".concat(v).concat(y,":").concat(b)}else l="Z";var w=sn(s.getHours(),2),k=sn(s.getMinutes(),2),M=sn(s.getSeconds(),2),C=a===""?"":"T",T=[w,k,M].join(u);a="".concat(a).concat(C).concat(T).concat(l)}return a}function Mb(n){Q(1,arguments);var e=G(n),t=e.getDate();return t}function Ff(n){Q(1,arguments);var e=G(n),t=e.getFullYear(),r=e.getMonth(),s=new Date(0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Tb(n){Q(1,arguments);var e=G(n),t=e.getHours();return t}function Db(n){Q(1,arguments);var e=G(n),t=e.getMilliseconds();return t}function Eb(n){Q(1,arguments);var e=G(n),t=e.getMinutes();return t}function Ob(n){Q(1,arguments);var e=G(n),t=e.getMonth();return t}function Nb(n){Q(1,arguments);var e=G(n),t=e.getSeconds();return t}function Ib(n,e){var t,r,s,o,i,a,l,c;Q(1,arguments);var u=G(n),f=u.getFullYear(),h=Rr(),p=Oe((t=(r=(s=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(i=e.locale)===null||i===void 0||(a=i.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(f+1,0,p),m.setHours(0,0,0,0);var g=zn(m,e),y=new Date(0);y.setFullYear(f,0,p),y.setHours(0,0,0,0);var b=zn(y,e);return u.getTime()>=g.getTime()?f+1:u.getTime()>=b.getTime()?f:f-1}function Ab(n,e){var t,r,s,o,i,a,l,c;Q(1,arguments);var u=Rr(),f=Oe((t=(r=(s=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(i=e.locale)===null||i===void 0||(a=i.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1),h=Ib(n,e),p=new Date(0);p.setFullYear(h,0,f),p.setHours(0,0,0,0);var m=zn(p,e);return m}var Pb=6048e5;function Rb(n,e){Q(1,arguments);var t=G(n),r=zn(t,e).getTime()-Ab(t,e).getTime();return Math.round(r/Pb)+1}function jb(n){return Q(1,arguments),G(n).getFullYear()}function pi(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getTime()>r.getTime()}function Yr(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getTime()<r.getTime()}function Lb(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getTime()===r.getTime()}function Gc(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Fb(n,e){if(n){if(typeof n=="string")return Gc(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gc(n,e)}}function Jc(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Fb(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,s=function(){};return{s,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,a;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return o=c.done,c},e:function(c){i=!0,a=c},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(i)throw a}}}}function xe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&em(n,e)}function io(n){return io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},io(n)}function $f(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($f=function(){return!!n})()}function $b(n,e){if(e&&(Md(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(n)}function be(n){var e=$f();return function(){var r=io(n),s;if(e){var o=io(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return $b(this,s)}}function ge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qc(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Td(r.key),r)}}function ye(n,e,t){return e&&Qc(n.prototype,e),t&&Qc(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function q(n,e,t){return e=Td(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bb=10,Bf=function(){function n(){ge(this,n),q(this,"priority",void 0),q(this,"subPriority",0)}return ye(n,[{key:"validate",value:function(t,r){return!0}}]),n}(),_b=function(n){xe(t,n);var e=be(t);function t(r,s,o,i,a){var l;return ge(this,t),l=e.call(this),l.value=r,l.validateValue=s,l.setValue=o,l.priority=i,a&&(l.subPriority=a),l}return ye(t,[{key:"validate",value:function(s,o){return this.validateValue(s,this.value,o)}},{key:"set",value:function(s,o,i){return this.setValue(s,o,this.value,i)}}]),t}(Bf),zb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",Bb),q(K(r),"subPriority",-1),r}return ye(t,[{key:"set",value:function(s,o){if(o.timestampIsSet)return s;var i=new Date(0);return i.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),i.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),i}}]),t}(Bf),ke=function(){function n(){ge(this,n),q(this,"incompatibleTokens",void 0),q(this,"priority",void 0),q(this,"subPriority",void 0)}return ye(n,[{key:"run",value:function(t,r,s,o){var i=this.parse(t,r,s,o);return i?{setter:new _b(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(t,r,s){return!0}}]),n}(),Hb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",140),q(K(r),"incompatibleTokens",["R","u","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"})||i.era(s,{width:"narrow"});case"GGGGG":return i.era(s,{width:"narrow"});case"GGGG":default:return i.era(s,{width:"wide"})||i.era(s,{width:"abbreviated"})||i.era(s,{width:"narrow"})}}},{key:"set",value:function(s,o,i){return o.era=i,s.setUTCFullYear(i,0,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Be={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Lt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function _e(n,e){return n&&{value:e(n.value),rest:n.rest}}function Pe(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Ft(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,i=t[5]?parseInt(t[5],10):0;return{value:r*(s*zo+o*_o+i*ub),rest:e.slice(t[0].length)}}function _f(n){return Pe(Be.anyDigitsSigned,n)}function Fe(n,e){switch(n){case 1:return Pe(Be.singleDigit,e);case 2:return Pe(Be.twoDigits,e);case 3:return Pe(Be.threeDigits,e);case 4:return Pe(Be.fourDigits,e);default:return Pe(new RegExp("^\\d{1,"+n+"}"),e)}}function ao(n,e){switch(n){case 1:return Pe(Be.singleDigitSigned,e);case 2:return Pe(Be.twoDigitsSigned,e);case 3:return Pe(Be.threeDigitsSigned,e);case 4:return Pe(Be.fourDigitsSigned,e);default:return Pe(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Dl(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zf(n,e){var t=e>0,r=t?e:1-e,s;if(r<=50)s=n||100;else{var o=r+50,i=Math.floor(o/100)*100,a=n>=o%100;s=n+i-(a?100:0)}return t?s:1-s}function Hf(n){return n%400===0||n%4===0&&n%100!==0}var Vb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",130),q(K(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){var a=function(c){return{year:c,isTwoDigitYear:o==="yy"}};switch(o){case"y":return _e(Fe(4,s),a);case"yo":return _e(i.ordinalNumber(s,{unit:"year"}),a);default:return _e(Fe(o.length,s),a)}}},{key:"validate",value:function(s,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(s,o,i){var a=s.getUTCFullYear();if(i.isTwoDigitYear){var l=zf(i.year,a);return s.setUTCFullYear(l,0,1),s.setUTCHours(0,0,0,0),s}var c=!("era"in o)||o.era===1?i.year:1-i.year;return s.setUTCFullYear(c,0,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Wb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",130),q(K(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){var a=function(c){return{year:c,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return _e(Fe(4,s),a);case"Yo":return _e(i.ordinalNumber(s,{unit:"year"}),a);default:return _e(Fe(o.length,s),a)}}},{key:"validate",value:function(s,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(s,o,i,a){var l=fm(s,a);if(i.isTwoDigitYear){var c=zf(i.year,l);return s.setUTCFullYear(c,0,a.firstWeekContainsDate),s.setUTCHours(0,0,0,0),_i(s,a)}var u=!("era"in o)||o.era===1?i.year:1-i.year;return s.setUTCFullYear(u,0,a.firstWeekContainsDate),s.setUTCHours(0,0,0,0),_i(s,a)}}]),t}(ke),Ub=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",130),q(K(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o){return ao(o==="R"?4:o.length,s)}},{key:"set",value:function(s,o,i){var a=new Date(0);return a.setUTCFullYear(i,0,4),a.setUTCHours(0,0,0,0),wd(a)}}]),t}(ke),qb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",130),q(K(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o){return ao(o==="u"?4:o.length,s)}},{key:"set",value:function(s,o,i){return s.setUTCFullYear(i,0,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Yb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",120),q(K(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"Q":case"QQ":return Fe(o.length,s);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"})||i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(s,{width:"wide",context:"formatting"})||i.quarter(s,{width:"abbreviated",context:"formatting"})||i.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,o){return o>=1&&o<=4}},{key:"set",value:function(s,o,i){return s.setUTCMonth((i-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Kb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",120),q(K(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"q":case"qq":return Fe(o.length,s);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"})||i.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(s,{width:"wide",context:"standalone"})||i.quarter(s,{width:"abbreviated",context:"standalone"})||i.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,o){return o>=1&&o<=4}},{key:"set",value:function(s,o,i){return s.setUTCMonth((i-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Gb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),q(K(r),"priority",110),r}return ye(t,[{key:"parse",value:function(s,o,i){var a=function(c){return c-1};switch(o){case"M":return _e(Pe(Be.month,s),a);case"MM":return _e(Fe(2,s),a);case"Mo":return _e(i.ordinalNumber(s,{unit:"month"}),a);case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"})||i.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(s,{width:"wide",context:"formatting"})||i.month(s,{width:"abbreviated",context:"formatting"})||i.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,o){return o>=0&&o<=11}},{key:"set",value:function(s,o,i){return s.setUTCMonth(i,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke),Jb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",110),q(K(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){var a=function(c){return c-1};switch(o){case"L":return _e(Pe(Be.month,s),a);case"LL":return _e(Fe(2,s),a);case"Lo":return _e(i.ordinalNumber(s,{unit:"month"}),a);case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"})||i.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(s,{width:"wide",context:"standalone"})||i.month(s,{width:"abbreviated",context:"standalone"})||i.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,o){return o>=0&&o<=11}},{key:"set",value:function(s,o,i){return s.setUTCMonth(i,1),s.setUTCHours(0,0,0,0),s}}]),t}(ke);function Qb(n,e,t){Q(2,arguments);var r=G(n),s=Oe(e),o=hm(r,t)-s;return r.setUTCDate(r.getUTCDate()-o*7),r}var Xb=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",100),q(K(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"w":return Pe(Be.week,s);case"wo":return i.ordinalNumber(s,{unit:"week"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=1&&o<=53}},{key:"set",value:function(s,o,i,a){return _i(Qb(s,i,a),a)}}]),t}(ke);function Zb(n,e){Q(2,arguments);var t=G(n),r=Oe(e),s=pm(t)-r;return t.setUTCDate(t.getUTCDate()-s*7),t}var ev=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",100),q(K(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"I":return Pe(Be.week,s);case"Io":return i.ordinalNumber(s,{unit:"week"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=1&&o<=53}},{key:"set",value:function(s,o,i){return wd(Zb(s,i))}}]),t}(ke),tv=[31,28,31,30,31,30,31,31,30,31,30,31],nv=[31,29,31,30,31,30,31,31,30,31,30,31],rv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"subPriority",1),q(K(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"d":return Pe(Be.date,s);case"do":return i.ordinalNumber(s,{unit:"date"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){var i=s.getUTCFullYear(),a=Hf(i),l=s.getUTCMonth();return a?o>=1&&o<=nv[l]:o>=1&&o<=tv[l]}},{key:"set",value:function(s,o,i){return s.setUTCDate(i),s.setUTCHours(0,0,0,0),s}}]),t}(ke),sv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"subpriority",1),q(K(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"D":case"DD":return Pe(Be.dayOfYear,s);case"Do":return i.ordinalNumber(s,{unit:"date"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){var i=s.getUTCFullYear(),a=Hf(i);return a?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(s,o,i){return s.setUTCMonth(0,i),s.setUTCHours(0,0,0,0),s}}]),t}(ke);function El(n,e,t){var r,s,o,i,a,l,c,u;Q(2,arguments);var f=Rr(),h=Oe((r=(s=(o=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&o!==void 0?o:f.weekStartsOn)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=G(n),m=Oe(e),g=p.getUTCDay(),y=m%7,b=(y+7)%7,v=(b<h?7:0)+m-g;return p.setUTCDate(p.getUTCDate()+v),p}var ov=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,o){return o>=0&&o<=6}},{key:"set",value:function(s,o,i,a){return s=El(s,i,a),s.setUTCHours(0,0,0,0),s}}]),t}(ke),iv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i,a){var l=function(u){var f=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+f};switch(o){case"e":case"ee":return _e(Fe(o.length,s),l);case"eo":return _e(i.ordinalNumber(s,{unit:"day"}),l);case"eee":return i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,o){return o>=0&&o<=6}},{key:"set",value:function(s,o,i,a){return s=El(s,i,a),s.setUTCHours(0,0,0,0),s}}]),t}(ke),av=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i,a){var l=function(u){var f=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+f};switch(o){case"c":case"cc":return _e(Fe(o.length,s),l);case"co":return _e(i.ordinalNumber(s,{unit:"day"}),l);case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"})||i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})||i.day(s,{width:"abbreviated",context:"standalone"})||i.day(s,{width:"short",context:"standalone"})||i.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,o){return o>=0&&o<=6}},{key:"set",value:function(s,o,i,a){return s=El(s,i,a),s.setUTCHours(0,0,0,0),s}}]),t}(ke);function lv(n,e){Q(2,arguments);var t=Oe(e);t%7===0&&(t=t-7);var r=1,s=G(n),o=s.getUTCDay(),i=t%7,a=(i+7)%7,l=(a<r?7:0)+t-o;return s.setUTCDate(s.getUTCDate()+l),s}var cv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",90),q(K(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){var a=function(c){return c===0?7:c};switch(o){case"i":case"ii":return Fe(o.length,s);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return _e(i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),a);case"iiiii":return _e(i.day(s,{width:"narrow",context:"formatting"}),a);case"iiiiii":return _e(i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),a);case"iiii":default:return _e(i.day(s,{width:"wide",context:"formatting"})||i.day(s,{width:"abbreviated",context:"formatting"})||i.day(s,{width:"short",context:"formatting"})||i.day(s,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(s,o){return o>=1&&o<=7}},{key:"set",value:function(s,o,i){return s=lv(s,i),s.setUTCHours(0,0,0,0),s}}]),t}(ke),uv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",80),q(K(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"a":case"aa":case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,o,i){return s.setUTCHours(Dl(i),0,0,0),s}}]),t}(ke),dv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",80),q(K(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"b":case"bb":case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,o,i){return s.setUTCHours(Dl(i),0,0,0),s}}]),t}(ke),fv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",80),q(K(r),"incompatibleTokens",["a","b","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})||i.dayPeriod(s,{width:"abbreviated",context:"formatting"})||i.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,o,i){return s.setUTCHours(Dl(i),0,0,0),s}}]),t}(ke),hv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",70),q(K(r),"incompatibleTokens",["H","K","k","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"h":return Pe(Be.hour12h,s);case"ho":return i.ordinalNumber(s,{unit:"hour"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=1&&o<=12}},{key:"set",value:function(s,o,i){var a=s.getUTCHours()>=12;return a&&i<12?s.setUTCHours(i+12,0,0,0):!a&&i===12?s.setUTCHours(0,0,0,0):s.setUTCHours(i,0,0,0),s}}]),t}(ke),pv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",70),q(K(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"H":return Pe(Be.hour23h,s);case"Ho":return i.ordinalNumber(s,{unit:"hour"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=0&&o<=23}},{key:"set",value:function(s,o,i){return s.setUTCHours(i,0,0,0),s}}]),t}(ke),mv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",70),q(K(r),"incompatibleTokens",["h","H","k","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"K":return Pe(Be.hour11h,s);case"Ko":return i.ordinalNumber(s,{unit:"hour"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=0&&o<=11}},{key:"set",value:function(s,o,i){var a=s.getUTCHours()>=12;return a&&i<12?s.setUTCHours(i+12,0,0,0):s.setUTCHours(i,0,0,0),s}}]),t}(ke),gv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",70),q(K(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"k":return Pe(Be.hour24h,s);case"ko":return i.ordinalNumber(s,{unit:"hour"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=1&&o<=24}},{key:"set",value:function(s,o,i){var a=i<=24?i%24:i;return s.setUTCHours(a,0,0,0),s}}]),t}(ke),yv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",60),q(K(r),"incompatibleTokens",["t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"m":return Pe(Be.minute,s);case"mo":return i.ordinalNumber(s,{unit:"minute"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=0&&o<=59}},{key:"set",value:function(s,o,i){return s.setUTCMinutes(i,0,0),s}}]),t}(ke),xv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",50),q(K(r),"incompatibleTokens",["t","T"]),r}return ye(t,[{key:"parse",value:function(s,o,i){switch(o){case"s":return Pe(Be.second,s);case"so":return i.ordinalNumber(s,{unit:"second"});default:return Fe(o.length,s)}}},{key:"validate",value:function(s,o){return o>=0&&o<=59}},{key:"set",value:function(s,o,i){return s.setUTCSeconds(i,0),s}}]),t}(ke),bv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",30),q(K(r),"incompatibleTokens",["t","T"]),r}return ye(t,[{key:"parse",value:function(s,o){var i=function(l){return Math.floor(l*Math.pow(10,-o.length+3))};return _e(Fe(o.length,s),i)}},{key:"set",value:function(s,o,i){return s.setUTCMilliseconds(i),s}}]),t}(ke),vv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",10),q(K(r),"incompatibleTokens",["t","T","x"]),r}return ye(t,[{key:"parse",value:function(s,o){switch(o){case"X":return Ft(Lt.basicOptionalMinutes,s);case"XX":return Ft(Lt.basic,s);case"XXXX":return Ft(Lt.basicOptionalSeconds,s);case"XXXXX":return Ft(Lt.extendedOptionalSeconds,s);case"XXX":default:return Ft(Lt.extended,s)}}},{key:"set",value:function(s,o,i){return o.timestampIsSet?s:new Date(s.getTime()-i)}}]),t}(ke),wv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",10),q(K(r),"incompatibleTokens",["t","T","X"]),r}return ye(t,[{key:"parse",value:function(s,o){switch(o){case"x":return Ft(Lt.basicOptionalMinutes,s);case"xx":return Ft(Lt.basic,s);case"xxxx":return Ft(Lt.basicOptionalSeconds,s);case"xxxxx":return Ft(Lt.extendedOptionalSeconds,s);case"xxx":default:return Ft(Lt.extended,s)}}},{key:"set",value:function(s,o,i){return o.timestampIsSet?s:new Date(s.getTime()-i)}}]),t}(ke),Cv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",40),q(K(r),"incompatibleTokens","*"),r}return ye(t,[{key:"parse",value:function(s){return _f(s)}},{key:"set",value:function(s,o,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),t}(ke),kv=function(n){xe(t,n);var e=be(t);function t(){var r;ge(this,t);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o)),q(K(r),"priority",20),q(K(r),"incompatibleTokens","*"),r}return ye(t,[{key:"parse",value:function(s){return _f(s)}},{key:"set",value:function(s,o,i){return[new Date(i),{timestampIsSet:!0}]}}]),t}(ke),Sv={G:new Hb,y:new Vb,Y:new Wb,R:new Ub,u:new qb,Q:new Yb,q:new Kb,M:new Gb,L:new Jb,w:new Xb,I:new ev,d:new rv,D:new sv,E:new ov,e:new iv,c:new av,i:new cv,a:new uv,b:new dv,B:new fv,h:new hv,H:new pv,K:new mv,k:new gv,m:new yv,s:new xv,S:new bv,X:new vv,x:new wv,t:new Cv,T:new kv},Mv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dv=/^'([^]*?)'?$/,Ev=/''/g,Ov=/\S/,Nv=/[a-zA-Z]/;function Iv(n,e,t,r){var s,o,i,a,l,c,u,f,h,p,m,g,y,b,v,w,k,M;Q(3,arguments);var C=String(n),T=String(e),E=Rr(),N=(s=(o=r==null?void 0:r.locale)!==null&&o!==void 0?o:E.locale)!==null&&s!==void 0?s:Cd;if(!N.match)throw new RangeError("locale must contain match property");var F=Oe((i=(a=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&l!==void 0?l:E.firstWeekContainsDate)!==null&&a!==void 0?a:(h=E.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=Oe((m=(g=(y=(b=r==null?void 0:r.weekStartsOn)!==null&&b!==void 0?b:r==null||(v=r.locale)===null||v===void 0||(w=v.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&y!==void 0?y:E.weekStartsOn)!==null&&g!==void 0?g:(k=E.locale)===null||k===void 0||(M=k.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&m!==void 0?m:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(T==="")return C===""?G(t):new Date(NaN);var V={firstWeekContainsDate:F,weekStartsOn:z,locale:N},B=[new zb],D=T.match(Tv).map(function(fe){var re=fe[0];if(re in ic){var pe=ic[re];return pe(fe,N.formatLong)}return fe}).join("").match(Mv),P=[],R=Jc(D),A;try{var _=function(){var re=A.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&mm(re)&&ac(re,T,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gm(re)&&ac(re,T,n);var pe=re[0],yt=Sv[pe];if(yt){var Mt=yt.incompatibleTokens;if(Array.isArray(Mt)){var He=P.find(function(rn){return Mt.includes(rn.token)||rn.token===pe});if(He)throw new RangeError("The format string mustn't contain `".concat(He.fullToken,"` and `").concat(re,"` at the same time"))}else if(yt.incompatibleTokens==="*"&&P.length>0)throw new RangeError("The format string mustn't contain `".concat(re,"` and any other token at the same time"));P.push({token:pe,fullToken:re});var je=yt.run(C,re,N.match,V);if(!je)return{v:new Date(NaN)};B.push(je.setter),C=je.rest}else{if(pe.match(Nv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+pe+"`");if(re==="''"?re="'":pe==="'"&&(re=Av(re)),C.indexOf(re)===0)C=C.slice(re.length);else return{v:new Date(NaN)}}};for(R.s();!(A=R.n()).done;){var Y=_();if(Md(Y)==="object")return Y.v}}catch(fe){R.e(fe)}finally{R.f()}if(C.length>0&&Ov.test(C))return new Date(NaN);var $=B.map(function(fe){return fe.priority}).sort(function(fe,re){return re-fe}).filter(function(fe,re,pe){return pe.indexOf(fe)===re}).map(function(fe){return B.filter(function(re){return re.priority===fe}).sort(function(re,pe){return pe.subPriority-re.subPriority})}).map(function(fe){return fe[0]}),O=G(t);if(isNaN(O.getTime()))return new Date(NaN);var ae=ym(O,Bi(O)),ve={},De=Jc($),J;try{for(De.s();!(J=De.n()).done;){var ee=J.value;if(!ee.validate(ae,V))return new Date(NaN);var oe=ee.set(ae,ve,V);Array.isArray(oe)?(ae=oe[0],kb(ve,oe[1])):ae=oe}}catch(fe){De.e(fe)}finally{De.f()}return ae}function Av(n){return n.match(Dv)[1].replace(Ev,"'")}function Xc(n){Q(1,arguments);var e=G(n);return e.setMinutes(0,0,0),e}function Pv(n,e){Q(2,arguments);var t=Xc(n),r=Xc(e);return t.getTime()===r.getTime()}function Rv(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function jv(n,e){Q(2,arguments);var t=G(n),r=G(e);return t.getFullYear()===r.getFullYear()}function Lv(n,e){Q(2,arguments);var t=G(n).getTime(),r=G(e.start).getTime(),s=G(e.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return t>=r&&t<=s}function Fv(n,e){var t;Q(1,arguments);var r=Oe((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var s=zv(n),o;if(s.date){var i=Hv(s.date,r);o=Vv(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var a=o.getTime(),l=0,c;if(s.time&&(l=Wv(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(c=Uv(s.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(a+l),f=new Date(0);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return new Date(a+l+c)}var As={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$v=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Bv=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zv(n){var e={},t=n.split(As.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],As.timeZoneDelimiter.test(e.date)&&(e.date=n.split(As.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var s=As.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Hv(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?s:o*100,restDateString:n.slice((r[1]||r[2]).length)}}function Vv(n,e){if(e===null)return new Date(NaN);var t=n.match($v);if(!t)return new Date(NaN);var r=!!t[4],s=Kr(t[1]),o=Kr(t[2])-1,i=Kr(t[3]),a=Kr(t[4]),l=Kr(t[5])-1;if(r)return Jv(e,a,l)?qv(e,a,l):new Date(NaN);var c=new Date(0);return!Kv(e,o,i)||!Gv(e,s)?new Date(NaN):(c.setUTCFullYear(e,o,Math.max(s,i)),c)}function Kr(n){return n?parseInt(n):1}function Wv(n){var e=n.match(Bv);if(!e)return NaN;var t=mi(e[1]),r=mi(e[2]),s=mi(e[3]);return Qv(t,r,s)?t*zo+r*_o+s*1e3:NaN}function mi(n){return n&&parseFloat(n.replace(",","."))||0}function Uv(n){if(n==="Z")return 0;var e=n.match(_v);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Xv(r,s)?t*(r*zo+s*_o):NaN}function qv(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var s=r.getUTCDay()||7,o=(e-1)*7+t+1-s;return r.setUTCDate(r.getUTCDate()+o),r}var Yv=[31,null,31,30,31,30,31,31,30,31,30,31];function Vf(n){return n%400===0||n%4===0&&n%100!==0}function Kv(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Yv[e]||(Vf(n)?29:28))}function Gv(n,e){return e>=1&&e<=(Vf(n)?366:365)}function Jv(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Qv(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Xv(n,e){return e>=0&&e<=59}function Zv(n,e){Q(2,arguments);var t=G(n),r=Oe(e),s=t.getFullYear(),o=t.getDate(),i=new Date(0);i.setFullYear(s,r,15),i.setHours(0,0,0,0);var a=Ff(i);return t.setMonth(r,Math.min(o,a)),t}function e1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return t.setDate(r),t}function t1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return t.setHours(r),t}function n1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return t.setMilliseconds(r),t}function r1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return t.setMinutes(r),t}function s1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return t.setSeconds(r),t}function o1(n,e){Q(2,arguments);var t=G(n),r=Oe(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(r),t)}const i1=n=>{const[e,t]=x.useState(!0),[r,s]=x.useState(null),[o,i]=x.useState(null);return x.useEffect(()=>{n&&(async()=>{t(!0);try{const c=await zi(`/api/invoice/${n}`);s(c.invoice)}catch(c){console.error("Error fetching invoice:",c),i(c.message),oc({open:!0,message:"Error fetching invoice data.",variant:"alert",alert:{color:"error"},close:!1})}finally{t(!1)}})()},[n]),{loading:e,invoiceData:r,error:o,refetchInvoiceData:async()=>{try{t(!0);const l=await zi(`/api/invoice/${n}`);s(l.invoice),t(!1)}catch(l){console.error("Error refetching invoice:",l),i(l.message),oc({open:!0,message:"Error refetching invoice data.",variant:"alert",alert:{color:"error"},close:!1}),t(!1)}}}},Wf=({client:n,invoiceData:e})=>{if(!n)return null;const t=e.date?Zr(new Date(e.date),"yyyy/MM/dd"):"",r=(s,o,i=!0)=>d.jsx(we,{fullWidth:i,value:o||"",label:s,variant:"outlined",sx:{"& .MuiInputBase-inputSizeSmall":{fontSize:"medium"},"& .MuiInputLabel-root":{fontSize:"1rem",color:o?"black":"#2196f3"},"& .MuiOutlinedInput-input.Mui-disabled":{WebkitTextFillColor:"#4C9EF5"}},disabled:!0,size:"small"});return d.jsx($e,{children:d.jsx(W,{container:!0,spacing:tm,children:d.jsx(W,{item:!0,xs:12,children:d.jsxs($e,{sx:{border:"1px solid #ccc",p:2,borderRadius:1,mb:2},children:[d.jsx($e,{sx:{fontWeight:"bold",mb:1,backgroundColor:"#ede7f66b",p:1,borderRadius:"4px"},children:""}),d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:3,children:r(" ",e.reference_number)}),d.jsx(W,{item:!0,xs:3,children:r(" ",t)}),d.jsx(W,{item:!0,xs:3,children:r(" ",e.status)}),d.jsx(W,{item:!0,xs:3,children:r(" ",e.paymentStatus)}),d.jsx(W,{item:!0,xs:8,children:r("",n.address)}),d.jsx(W,{item:!0,xs:4,children:r(" ",n.vat)})]})]})})})})};Wf.propTypes={client:se.shape({id:se.string,name:se.string,email:se.string,phone:se.string,location:se.string,category:se.string}),invoiceData:se.shape({invoice_id:se.string,date:se.oneOfType([se.string,se.instanceOf(Date)]),MobileNumber:se.string,status:se.string,paymentStatus:se.string})};const Uf=({invoiceData:n,orderTypeConfig:e,setShowStores:t,showStores:r})=>{const{control:s,setValue:o,formState:{errors:i}}=kd(),[a,l]=x.useState(null),[c,u]=x.useState(null),f=x.useCallback(async m=>{try{const g=await zi(`/api/client/${m}`);l(g),o("ClientID",g.ClientID),o("customerName",g.name),o("customerPhone",g.phone),o("customerAddress",g.address)}catch(g){console.error("Error fetching client data:",g)}},[o]),h=x.useCallback(m=>{m?(console.log("Selected client:",m),o("ClientID",m.ID),o("customerName",m.Name),e.settings.showClient&&f(m.ID)):(console.log("No client selected"),o("ClientID",null),o("customerName",""),o("customerEmail",""),o("customerPhone",""),o("customerAddress",""),l(null))},[o,f]),p=x.useCallback(({field:m,label:g,placeholder:y})=>d.jsx(we,{...m,size:"small",label:g,placeholder:y,fullWidth:!0,sx:{"& .MuiInputBase-inputSizeSmall":{fontSize:"medium"},"& .MuiInputLabel-root":{fontSize:"1rem",color:"black"}},InputLabelProps:{style:{fontSize:"1rem",color:"black"}}}),[]);return x.useMemo(()=>{n&&(console.log("invoiceData",n),u({ID:n.FTStore,Name:n.FTStoreName}),e.settings.showClient&&f(n.ClientID))},[n,f]),d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:12,md:3,children:d.jsx($e,{sx:{border:"0px solid #ccc",p:0,borderRadius:1,mb:2},children:d.jsxs(W,{container:!0,spacing:2,children:[e.settings.showClient&&d.jsxs(d.Fragment,{children:[d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"ClientID",control:s,render:({field:m})=>d.jsx(Vi,{...m,placeholder:"   "+e.settings.clientType,noOptionsText:"  ",onOptionSelect:h,value:a?{ID:a.ClientID,Name:a.name}:null,type:"Supplier"})})}),e.settings.isSupplier&&d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"SupplierInvoiceNumber",control:s,render:({field:m})=>p({field:m,label:"  ",placeholder:"   "})})})]}),e.settings.showStore&&d.jsxs(W,{item:!0,xs:12,children:[d.jsx(Ce,{name:"FTStore",control:s,render:({field:m})=>d.jsxs(d.Fragment,{children:[!r&&d.jsx(Vi,{...m,onOptionSelect:g=>{u(g),m.onChange(g.ID)},placeholder:"  ",type:"Store",LoadAllData:!0,value:c}),e.settings.showMultipleStores&&d.jsx(Dr,{size:"small",onClick:()=>t(!r),color:"primary",tabIndex:-1,children:d.jsx("span",{style:{fontSize:"14px",fontWeight:"bold"},children:r?" ":" "})})]})}),i.store&&d.jsx(Sm,{error:!0,children:i.store.message})]})]})})}),d.jsx(W,{item:!0,xs:12,md:3,children:d.jsx($e,{sx:{border:"0px solid #ccc",p:0,borderRadius:1,mb:2},children:d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"Comment",control:s,render:({field:m})=>d.jsx(we,{...m,fullWidth:!0,label:"",multiline:!0,rows:e.settings.showClient?6:1,size:"small",placeholder:" ",sx:{"& .MuiInputBase-inputSizeSmall":{fontSize:"medium"},"& .MuiInputLabel-root":{fontSize:"1rem",color:"black"}}})})})})}),e.settings.showClient&&d.jsx(W,{item:!0,xs:12,md:6,children:d.jsx(Wf,{client:a||{},invoiceData:n})})]})};Uf.propTypes={invoiceData:se.object};let In=null,fr=!1,gi=null;const qf=()=>{const[,n]=x.useState(),e=x.useCallback(()=>!In&&!fr?(fr=!0,n({}),nm().then(r=>(In=r,fr=!1,gi=null,n({}),r)).catch(r=>{throw gi=r,fr=!1,In=null,n({}),r})):Promise.resolve(In),[]),t=x.useCallback(()=>(In=null,e()),[e]);return!In&&!fr&&e(),{products:In,isLoading:fr,error:gi,reloadProducts:t}},Ol=({open:n,onClose:e,onSelect:t})=>{const{products:r,isLoading:s,error:o,reloadProducts:i}=qf(),[a,l]=x.useState(null),[c,u]=x.useState(0),f=x.useMemo(()=>[{headerName:" ",field:"BarCodeNo",flex:1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:" ",field:"Supplier_Item_ID",flex:1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"",field:"name",flex:1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"",field:"offerPrice",flex:1,filter:"agNumberColumnFilter",floatingFilter:!0},{headerName:"",field:"ClientName",flex:1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"",field:"CategoryName",flex:1,filter:"agTextColumnFilter",floatingFilter:!0}],[]),h=x.useMemo(()=>({sortable:!0,filter:!0,resizable:!0,floatingFilter:!0}),[]),p=x.useCallback(g=>{l(g.api)},[]),m=x.useCallback(g=>{const y=new Date().getTime();y-c>300&&(t(g.data.itemid),e(),a&&a.deselectAll()),u(y)},[t,a,c,e]);return d.jsxs(tr,{open:n,onClose:e,maxWidth:"md",fullWidth:!0,children:[d.jsxs(rr,{children:["  ",d.jsx(Dr,{"aria-label":"close",onClick:e,sx:{position:"absolute",right:8,top:8,color:g=>g.palette.grey[500]},children:d.jsx(gd,{})})]}),d.jsx(nr,{children:d.jsx($e,{sx:{height:"100%",width:"100%"},children:d.jsx("div",{className:"ag-theme-alpine",style:{height:350,width:"100%",direction:"rtl"},children:d.jsx(Sd,{rowData:r,columnDefs:f,defaultColDef:h,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:[5],onRowClicked:m,onGridReady:p,enableRtl:!0,domLayout:"autoHeight",rowSelection:"single"})})})})]})};Ol.propTypes={open:se.bool.isRequired,onClose:se.func.isRequired,onSelect:se.func.isRequired};var Nl={},a1=$a;Object.defineProperty(Nl,"__esModule",{value:!0});var Yf=Nl.default=void 0,l1=a1(Fa()),c1=d;Yf=Nl.default=(0,l1.default)((0,c1.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");const u1=en(n=>d.jsx(zx,{disableGutters:!0,elevation:0,square:!0,...n}))(({theme:n})=>({border:`1px solid ${n.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&::before":{display:"none"}})),d1=en(n=>d.jsx(tb,{expandIcon:d.jsx(Yf,{sx:{fontSize:"0.9rem"}}),...n}))(({theme:n,customBackgroundColor:e})=>({backgroundColor:e||(n.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgb(227 242 253 / 30%)"),flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:n.spacing(1)}})),f1=en(ws)(({theme:n})=>({padding:n.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"})),zr=({title:n,children:e,expanded:t,onChange:r,customBackgroundColor:s,customTextColor:o})=>d.jsxs(u1,{expanded:t,onChange:r,children:[d.jsx(d1,{customBackgroundColor:s,children:d.jsx(dt,{sx:{color:o||"inherit"},children:n})}),d.jsx(f1,{children:e})]});var Il={},h1=$a;Object.defineProperty(Il,"__esModule",{value:!0});var Kf=Il.default=void 0,p1=h1(Fa()),m1=d;Kf=Il.default=(0,p1.default)((0,m1.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");var Al={},g1=$a;Object.defineProperty(Al,"__esModule",{value:!0});var Gf=Al.default=void 0,y1=g1(Fa()),x1=d;Gf=Al.default=(0,y1.default)((0,x1.jsx)("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Percent");const b1=({units:n=[],categories:e=[],products:t=[],onUnitChange:r,onCategoryChange:s,onMarginChange:o,onProductSelect:i,onQuantityChange:a,handleOpenPopup:l,handleAddNewRow:c,handleDeleteClick:u,handleEditClick:f,selectedRowId:h,orderTypeConfig:p})=>{const[m,g]=x.useState(""),[y,b]=x.useState(1),[v,w]=x.useState(""),[k,M]=x.useState(1),[C,T]=x.useState(!1),[E,N]=x.useState(0),[F,z]=x.useState(!1),V=x.useRef(null),B=x.useMemo(()=>m!=="",[m]);x.useMemo(()=>e,[e]);const D=x.useCallback(ee=>{ee.key==="F9"&&(ee.preventDefault(),T(!0))},[]),P=x.useCallback(ee=>{const oe=parseFloat(ee.target.value)||0;N(oe),o(oe)},[o]),R=x.useCallback(()=>{A(),z(!0),setTimeout(()=>{V.current&&(V.current.focus(),V.current.select())},0)},[]),A=()=>{const ee=new(window.AudioContext||window.webkitAudioContext),oe=ee.createOscillator(),fe=ee.createGain();oe.connect(fe),fe.connect(ee.destination),oe.type="square",oe.frequency.setValueAtTime(440,ee.currentTime),fe.gain.setValueAtTime(1,ee.currentTime),oe.start(ee.currentTime),oe.stop(ee.currentTime+.1)},_=x.useCallback(ee=>{const oe=ee.target.value;if(g(oe),ee.key==="Enter")if(ee.preventDefault(),oe.trim()==="")R();else{const fe=t.find(re=>{var pe;return((pe=re.BarCodeNo)==null?void 0:pe.toLowerCase())===oe.toLowerCase()});fe?(i(fe.itemid),g("")):R()}},[t,i,R]),Y=x.useCallback(()=>{g("")},[]),$=x.useCallback(ee=>{const oe=ee.target.value;b(oe),r(oe)},[r]),O=x.useCallback((ee,oe)=>{const fe=oe?oe.CategoryID:"";w(fe),s(fe)},[s]),ae=x.useCallback(ee=>{const oe=parseInt(ee.target.value,10);M(oe),a(oe)},[a]),ve=x.useCallback(()=>T(!0),[]),De=x.useCallback(()=>T(!1),[]),J=x.useCallback(()=>z(!1),[]);return Ee.useEffect(()=>(window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)),[D]),d.jsxs($e,{display:"flex",flexDirection:"column",gap:2,children:[d.jsx($e,{children:d.jsxs(yd,{direction:"row",spacing:2,alignItems:"center",children:[d.jsx(Qe,{color:"primary",startIcon:d.jsx(Ui,{}),onClick:c,children:" "}),d.jsx(Qe,{color:"error",startIcon:d.jsx(Em,{}),onClick:u,disabled:h===null,children:" "}),p.settings.addItem&&d.jsxs(d.Fragment,{children:[d.jsx(Qe,{color:"primary",startIcon:d.jsx(Ui,{}),onClick:l,children:" "}),d.jsx(Qe,{color:"primary",startIcon:d.jsx(_a,{}),onClick:f,disabled:h===null,children:" "})]})]})}),d.jsxs($e,{display:"flex",flexDirection:"row",gap:2,alignItems:"center",children:[d.jsx(dn,{sx:{margin:0},children:d.jsx(we,{size:"small",variant:"outlined",placeholder:"  ",value:m,onChange:_,onKeyDown:_,inputRef:V,InputProps:{startAdornment:d.jsx(es,{position:"start",onClick:ve,sx:{cursor:"pointer"},children:d.jsx(Dm,{})}),endAdornment:B&&d.jsx(es,{position:"end",sx:{cursor:"pointer"},onClick:Y,children:d.jsx(Kf,{})})},error:F,helperText:F?"  .":""})}),d.jsx(dn,{sx:{width:"150px"},children:d.jsx(we,{label:" ",variant:"outlined",type:"tel",value:E,onChange:P,size:"small",InputProps:{endAdornment:d.jsx(es,{position:"end",children:d.jsx(Gf,{})}),sx:{"& .MuiInputBase-input":{paddingLeft:"0px"}}}})}),d.jsx(dn,{sx:{width:"100px"},children:d.jsx(we,{label:"",variant:"outlined",type:"number",value:k,onChange:ae,size:"small"})}),d.jsxs(dn,{sx:{minWidth:120},children:[d.jsx(Wi,{id:"unit-select-label",children:""}),d.jsx(Hi,{labelId:"unit-select-label",value:y,onChange:$,label:"",size:"small",children:n.map(ee=>d.jsx(qi,{value:ee.UnitID,children:ee.Unit_Name},ee.UnitID))})]}),d.jsx(dn,{sx:{minWidth:250},children:d.jsx(Vi,{onOptionSelect:O,placeholder:"  ",type:"Category",getOptionLabel:ee=>`${ee.Name}`,LoadAllData:!0})})]}),d.jsx(Ol,{open:C,onClose:De,onSelect:i}),d.jsx(xd,{open:F,autoHideDuration:3e3,onClose:J,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:d.jsx(bd,{onClose:J,severity:"error",children:"  !"})})]})},v1=Ee.memo(b1),Jf=({open:n,onClose:e,onConfirm:t,message:r})=>d.jsxs(tr,{open:n,onClose:e,maxWidth:"xs",fullWidth:!0,children:[d.jsx(rr,{children:" "}),d.jsx(nr,{children:d.jsx(dt,{variant:"body1",children:r})}),d.jsxs(gs,{children:[d.jsx(Qe,{onClick:e,color:"primary",children:""}),d.jsx(Qe,{onClick:t,color:"secondary",children:""})]})]});Jf.propTypes={open:se.bool.isRequired,onClose:se.func.isRequired,onConfirm:se.func.isRequired,message:se.string.isRequired};const Ps={stores:[],categories:[],units:[],image_types:[]},w1=()=>{const[n,e]=x.useState(Ps),[t,r]=x.useState(!1),[s,o]=x.useState(null),i=x.useCallback(()=>t?Promise.resolve(n):(r(!0),o(null),Om().then(l=>(e(l||Ps),r(!1),l)).catch(l=>{o(l),r(!1),e(Ps),console.error("Error loading section data:",l)})),[t,n]),a=x.useCallback(()=>(e(Ps),i()),[i]);return!t&&!n.categories.length&&!n.stores.length&&!n.units.length&&!n.image_types&&i(),{sectionData:n,isLoading:t,error:s,reloadSectionData:a}},C1=Ee.memo(zr),k1=Ee.memo(v1),S1=Ee.memo(Mm),M1=Ee.memo(Tm),T1=Ee.memo(Jf),Pl=({orderEntries:n,onOrderEntriesChange:e,setValue:t,ClientID:r,orderTypeConfig:s,showStores:o})=>{var sc;const[i,a]=x.useState([]),[l,c]=x.useState(),[u,f]=x.useState(""),[h,p]=x.useState(),[m,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),[k,M]=x.useState(1),[C,T]=x.useState(!1),[E,N]=x.useState(!1),[F,z]=x.useState(null),[V,B]=x.useState(null),D=x.useRef(null),P=x.useRef(1),R=x.useRef(!1),{products:A,isLoading:_,error:Y,reloadProducts:$}=qf(),{sectionData:O,isLoading:ae,error:ve,reloadSectionData:De}=w1();x.useEffect(()=>{(async()=>{if(!R.current)try{if(!A){console.log("Product data not yet available. Retrying...");return}De();const I=n.length>0?n.map(L=>{var X;return{...L,id:P.current++,ItemID:((X=A.find(le=>le.itemid===L.ItemID))==null?void 0:X.itemid)||""}}):[{id:-1,BarCodeNo:"",Supplier_Item_ID:"",name:"",CategoryID:u||0,offerPrice:0,Cost:0,Quantity:k||1,UnitID:l||1,unitPrice:0,total:0}];a(I),e(I.filter(L=>L.id!==-1)),R.current=!0}catch(I){console.error("Error fetching data:",I)}})()},[A,De,$]),x.useEffect(()=>{const S=I=>{I.key==="F2"&&dr()};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[v]);const J=x.useCallback(async S=>{const I={...S.data};if(I.BarCodeNo==="/"){const X=S.node.rowIndex,le={...I,newRowIndex:X};z(le),N(!0);return}else if(I.BarCodeNo==="0"){const X=S.node.rowIndex,le={...I,newRowIndex:X,NewItem:!0};B(le),dr();return}const L=A.find(X=>X.BarCodeNo===I.BarCodeNo);if(L){const X={...I.id===-1?{}:I,id:I.id===-1?P.current++:I.id,ItemID:L.itemid,BarCodeNo:L.BarCodeNo,Supplier_Item_ID:L.Supplier_Item_ID,name:L.name,CategoryID:L.CategoryID,offerPrice:L.offerPrice,Cost:L.Cost,ClientID:r,Quantity:I.Quantity||1,UnitID:I.UnitID||l||1,unitPrice:re(L)||0,total:L.unitPrice*(I.Quantity||1)};if(pe(le=>{const Me=le.map(ut=>ut.id===I.id?X:ut);return I.id===-1&&Me.push({id:-1,BarCodeNo:"",Supplier_Item_ID:"",name:"",CategoryID:u||"",offerPrice:0,Cost:0,Quantity:k||1,UnitID:l||1,unitPrice:0,total:0,ClientID:r}),Me}),D.current){const le=S.node.rowIndex;setTimeout(()=>{D.current.api.ensureIndexVisible(le),s.settings.editPrice?D.current.api.setFocusedCell(le,"unitPrice"):D.current.api.setFocusedCell(le,"Quantity")},0)}S.api&&S.api.refreshCells({rowNodes:[S.node],columns:["Supplier_Item_ID","name","CategoryID","Cost","offerPrice","UnitID","unitPrice","total"]})}else{const X={...I,ItemID:"",Supplier_Item_ID:"",name:"",CategoryID:"",offerPrice:0,Cost:0,unitPrice:0,total:0};pe(le=>le.map(Me=>Me.id===I.id?X:Me))}},[A,u,l,r,k]),ee=x.useCallback((S,I)=>{if(S&&S.CategoryID){pe(X=>X.map((le,Me)=>Me===I?{...le,CategoryID:S.CategoryID}:le));const L=D.current.api.getDisplayedRowAtIndex(I).data;He(L)}},[O.categories]),oe=S=>d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{children:S.displayName}),d.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:S.subText})]}),fe=x.useMemo(()=>[{headerName:" ",field:"BarCodeNo",rowDrag:!0,editable:!0,cellStyle:S=>S.value&&!S.data.ItemID?{border:"1px solid #ff0000"}:null,onCellValueChanged:S=>{J(S)}},{headerName:" ",field:"Supplier_Item_ID",editable:S=>S.data.id!==-1,cellDataType:"text",onCellValueChanged:S=>He(S.data.id)},{headerName:"",field:"name",editable:S=>S.data.id!==-1,flex:2,onCellValueChanged:S=>He(S.data.id)},...s.settings.addItem?[{headerName:"",field:"CategoryID",editable:S=>S.data.id!==-1,flex:1.5,cellEditor:Nm,cellEditorParams:S=>{const I=O.categories.find(X=>X.CategoryID===S.value);return{value:I?`${I.Name}`:"",options:O.categories,getOptionLabel:X=>`${X.Name}`,api:S.api,rowIndex:S.node.rowIndex,column:S.column,onCategoryChange:ee}},suppressKeyboardEvent:S=>S.event.key==="Enter"&&S.editing,valueFormatter:S=>{const I=O.categories.find(L=>L.CategoryID===S.value);return I?`${I.Name}`:""}},{headerName:"",field:"Cost",editable:!1,flex:1.5,cellStyle:{color:"#1e88e5"},valueGetter:S=>{var X;const I=(S.data.unitPrice/(((X=O.units.find(le=>le.UnitID===S.data.UnitID))==null?void 0:X.Quantity)||1)).toFixed(2),L=parseFloat(I);return isNaN(L)||L===0?S.data.Cost||0:L}},{headerName:" ",field:"offerPrice",cellDataType:"float",editable:S=>S.data.id!==-1,onCellValueChanged:S=>{let I=parseFloat(S.newValue);if(I<0&&(I=0,S.data.offerPrice=I,S.api.refreshCells({rowNodes:[S.node],columns:["offerPrice"],force:!0})),I===0){const L=parseFloat(S.data.Cost)||0,X=L*h/100+L||0;S.data.offerPrice=X.toFixed(2),pe(le=>le.map(Me=>Me.id===S.data.id?{...Me,offerPrice:X.toFixed(2)}:Me)),S.api.refreshCells({rowNodes:[S.node],force:!0})}He(S.data.id)}}]:[],{headerName:"",field:"Quantity",cellDataType:"number",editable:S=>S.data.id!==-1,valueSetter:S=>{const I=parseFloat(S.newValue);if(!s.settings.acceptNegativeQTY&&I<0?S.data.Quantity=0:S.data.Quantity=I||0,S.data.total=(S.data.unitPrice*S.data.Quantity).toFixed(2),He(S.data.id),!s.settings.editPrice){const L=S.node.rowIndex+1;D.current&&setTimeout(()=>{D.current.api.ensureIndexVisible(L),D.current.api.setFocusedCell(L,"BarCodeNo")},0)}return!0}},{headerName:"",field:"UnitID",cellDataType:"float",editable:S=>S.data.id!==-1,valueFormatter:S=>{const I=O.units.find(L=>L.UnitID===S.value);return I?I.Unit_Name:""},cellEditor:"agSelectCellEditor",cellEditorParams:{values:O.units.map(S=>S.UnitID),formatValue:S=>{const I=O.units.find(L=>L.UnitID===S);return I?I.Unit_Name:""}},onCellValueChanged:S=>{const I=S.newValue,L=O.units.find(X=>X.UnitID===I);if(L){const X=(S.data.unitPrice/(L.Quantity||1)).toFixed(2);pe(le=>le.map(Me=>Me.id===S.data.id?{...Me,UnitID:I,Cost:X}:Me)),S.api.refreshCells({rowNodes:[S.node],columns:["UnitID","Cost","Sell"]}),He(S.data.id)}}},{headerName:"",field:"unitPrice",editable:S=>S.data.id!==-1&&s.settings.editPrice,cellStyle:S=>(S.value===0||S.value===void 0)&&S.data.ItemID?{border:"1px solid #ff0000"}:null,valueGetter:S=>{const I=s.settings.price,L=parseFloat(S.data.Cost)||0,X=parseFloat(S.data.offerPrice)||0,le=parseFloat(S.data.unitPrice)||0;switch(I){case"PUPrice":return le.toFixed(2);case"SEPrice":return X.toFixed(2);case"COPrice":return L.toFixed(2);case"STPrice":return Math.min(X,L).toFixed(2);default:return le.toFixed(2)}},valueSetter:S=>{var L;let I=parseFloat(S.newValue);return(isNaN(I)||I<0)&&(I=0),S.data.unitPrice=I,S.data.Cost=(I/(((L=O.units.find(X=>X.UnitID===S.data.UnitID))==null?void 0:L.Quantity)||1)).toFixed(2),S.data.total=(I*S.data.Quantity).toFixed(2),S.api.refreshCells({rowNodes:[S.node],columns:["unitPrice","Cost","total","offerPrice"]}),He(S.data.id),!0},onCellValueChanged:S=>{if(parseFloat(S.data.offerPrice)===0){const L=parseFloat(S.data.Cost)||0,X=L*h/100+L||0;S.data.offerPrice=X.toFixed(2),pe(le=>le.map(Me=>Me.id===S.data.id?{...Me,offerPrice:X.toFixed(2)}:Me)),S.api.refreshCells({rowNodes:[S.node],force:!0})}ur();const I=S.node.rowIndex+1;D.current&&setTimeout(()=>{D.current.api.ensureIndexVisible(I),D.current.api.setFocusedCell(I,"BarCodeNo")},0),He(S.data.id)}},{headerName:"",field:"total",editable:!1,valueGetter:S=>(parseFloat(S.data.unitPrice||0)*parseFloat(S.data.Quantity||0)).toFixed(2),cellStyle:{color:"#1e88e5"}},...s.settings.showVat?[{headerName:"  ",field:"totalIncVat",editable:!1,headerComponent:oe,headerComponentParams:{displayName:"",subText:" "},valueGetter:S=>{const I=parseFloat(S.data.unitPrice||0)*parseFloat(S.data.Quantity||0);return(I+I*.15).toFixed(2)},cellStyle:{color:"#4caf50"}}]:[],...o?[{headerName:"",field:"LStoreID",cellDataType:"float",editable:S=>S.data.id!==-1,valueFormatter:S=>{const I=O.stores.find(L=>L.StoreID===S.value);return I?I.StoreName:""},cellEditor:"agSelectCellEditor",cellEditorParams:{values:O.stores.map(S=>S.StoreID),formatValue:S=>{const I=O.stores.find(L=>L.StoreID===S);return I?I.StoreName:""}},cellStyle:S=>!S.value&&S.data.ItemID?{border:"1px solid #ff0000"}:null,onCellValueChanged:S=>{const I=S.newValue;O.stores.find(X=>X.StoreID===I)&&(pe(X=>X.map(le=>le.id===S.data.id?{...le,LStoreID:I}:le)),S.api.refreshCells({rowNodes:[S.node],columns:["LStoreID"]}),He(S.data.id))}}]:[]],[J,O.categories,O.units,h,o]);function re(S){const I=parseFloat(S.Cost)||0,L=parseFloat(S.offerPrice)||0,X=parseFloat(S.unitPrice)||0;switch(s.settings.price){case"PUPrice":return X||0;case"SEPrice":return L||0;case"COPrice":return I||0;case"STPrice":return Math.min(L,I)||0;default:return X||0}}const pe=x.useCallback(S=>{a(I=>{let L;return typeof S=="function"?L=S(I):L=S,L.some(le=>le.id===-1)&&(L=L.filter((le,Me,ut)=>le.id!==-1||Me===ut.findIndex(Rt=>Rt.id===-1))),e(L),L})},[e]),yt=()=>{if(D.current&&D.current.api){const S=D.current.api,I=S.getDisplayedRowCount();S.ensureIndexVisible(I-1,"bottom")}},Mt=S=>{const I=A.find(L=>L.itemid===S);if(F&&S){const L={...F,BarCodeNo:I.BarCodeNo};J({data:L}),z(null),N(!1)}},He=x.useCallback(S=>{pe(I=>I.map(X=>{if(X.id===S){const le=O.units.find(Me=>Me.UnitID===X.UnitID);le&&X.unitPrice&&(X.Cost=(X.unitPrice/(le.Quantity||1)).toFixed(2)),X.total=(X.unitPrice*X.Quantity).toFixed(2)}return X}))},[O.units,t]),je=()=>{v!==null&&T(!0)},rn=()=>{pe(S=>S.filter(I=>I.id!==v)),w(null),T(!1)},Wr=()=>{T(!1)},ar=()=>{v!==null&&g(!0)},lr=()=>{g(!1)},cr=S=>{console.log(S),console.log(i),pe(I=>I.map(L=>L.id===v?{...L,...S,ItemID:S.ID}:L)),g(!1)},ur=()=>{if(!i.some(S=>S.id===-1)){const S={id:-1,ItemID:"",Supplier_Item_ID:"",BarCodeNo:"",name:"",CategoryID:u||"",offerPrice:0,Cost:0,Quantity:k||1,UnitID:l||1,unitPrice:0,total:0,ClientID:r};pe(I=>[...I,S])}},dr=()=>{b(!0)},Ts=()=>{B(null),b(!1)},Nn=S=>{if(V!==null){const I={...V,...S.item};J(I);return}pe(I=>{const L=I.filter(ut=>ut.id!==-1);let X;if(S.item.name!=="0")X={id:P.current++,ItemID:S.item.ItemID,BarCodeNo:S.item.BarCodeNo,Supplier_Item_ID:S.item.ItemLookupCode,name:S.item.name,CategoryID:u||0,offerPrice:0,Cost:0,Quantity:k||1,UnitID:l||1,unitPrice:0,total:0,ClientID:r};else if(v){const ut=L.find(Rt=>Rt.id===v);if(ut)X={...ut,id:Math.min(...L.map(Rt=>Rt.id),0)-1,ItemID:S.item.ItemID,BarCodeNo:S.item.BarCodeNo,Supplier_Item_ID:S.item.ItemLookupCode};else return console.error("Selected row not found."),L}else{const ut=Math.max(...L.map(Ur=>Ur.id),0),Rt=L.find(Ur=>Ur.id===ut);if(Rt)X={...Rt,id:Math.min(...L.map(Ur=>Ur.id),0)-1,ItemID:S.item.ItemID,BarCodeNo:S.item.BarCodeNo,Supplier_Item_ID:S.item.ItemLookupCode,ClientID:r};else return console.error("No row found with the largest ID."),L}const le=[...L,X],Me=le.length-1;return D.current&&setTimeout(()=>{D.current.api.ensureIndexVisible(Me),s.settings.editPrice?D.current.api.setFocusedCell(Me,"unitPrice"):D.current.api.setFocusedCell(Me,"Quantity")},0),le})},Bp=(S,I)=>{const L=A.find(X=>X.itemid===S);L&&pe(X=>{const le=X.filter(Rt=>Rt.id!==-1),Me={id:P.current++,ItemID:L.itemid,Supplier_Item_ID:L.Supplier_Item_ID,BarCodeNo:L.BarCodeNo,name:L.name,CategoryID:L.CategoryID||u||0,offerPrice:L.offerPrice||0,Cost:L.Cost||0,Quantity:k||1,UnitID:l||1,unitPrice:re(L),total:(L.unitPrice||0)*(k||1),ClientID:r},ut=[...le,Me];return setTimeout(()=>{yt()},20),ut})},_p=x.useCallback(S=>{const I=[];S.api.forEachNode(L=>{I.push(L.data)}),a(I),e(I)},[e]),zp=S=>{const I=S.api.getSelectedRows()[0];I&&w(I.id)};return d.jsxs(d.Fragment,{children:[d.jsx($e,{mb:2,style:{marginBottom:"0px",PaddingTop:"10px"},children:d.jsx(C1,{title:" ",children:d.jsx(k1,{units:O.units,onUnitChange:c,categories:O.categories,onMarginChange:p,onProductSelect:(S,I)=>Bp(S),onCategoryChange:f,onQuantityChange:M,products:A,handleOpenPopup:dr,handleAddNewRow:ur,handleDeleteClick:je,handleEditClick:ar,selectedRowId:v,orderTypeConfig:s})})}),d.jsx("div",{className:"ag-theme-alpine",style:{height:300,width:"100%"},children:d.jsx(Sd,{ref:D,rowData:i,columnDefs:fe,defaultColDef:{sortable:!0,flex:1,minWidth:100,filter:!0},rowSelection:"single",enableRtl:!0,onSelectionChanged:zp,deltaRowDataMode:!0,getRowNodeId:S=>S.id,suppressScrollOnNewData:!0,rowDragManaged:!0,onRowDragEnd:_p})}),s.settings.addItem&&d.jsxs(d.Fragment,{children:[d.jsx(S1,{open:y,onClose:Ts,onAddItem:Nn}),d.jsx(M1,{open:m,onClose:lr,selectedSubRowId:((sc=i.find(S=>S.id===v))==null?void 0:sc.ItemID)||void 0,onUpdate:cr})]}),d.jsx(T1,{open:C,onClose:Wr,onConfirm:rn,message:"     "}),d.jsx(Ol,{open:E,onClose:()=>N(!1),onSelect:Mt})]})};Pl.propTypes={orderEntries:se.array,defaultUnit:se.number,defaultMargin:se.number};Pl.defaultProps={orderEntries:[],defaultUnit:1,defaultMargin:0};const D1=Ee.memo(Pl),E1=({discountAmount:n,subTotal:e,setTaxAmount:t,orderTypeConfig:r})=>{const[s,o]=x.useState(!1),[i,a]=x.useState(0),[l,c]=x.useState(0),u=.15;x.useEffect(()=>{console.log("subTotal",e,"discountAmount",n);const p=parseFloat(e)||0,m=parseFloat(n)||0,g=p-m;let y=0;r.settings.showVat&&(y=g*u);const b=g+y;a(y),c(b),t(y)},[n,e,t,r.settings.showVat]);const f=()=>{o(!s)},h=()=>r.settings.showVat?s?" (  )":" ( )":"";return d.jsx(zr,{expanded:s,onChange:f,customBackgroundColor:"rgb(227 242 253 / 90%)",customTextColor:"#2196f3",title:d.jsx(W,{item:!0,container:!0,xs:12,children:d.jsxs(W,{container:!0,alignItems:"center",children:[d.jsx(W,{item:!0,xs:10,children:d.jsx(dt,{children:h()})}),d.jsx(W,{item:!0,xs:2,children:d.jsxs(dt,{children:["$",s?(l-i).toFixed(2):l.toFixed(2)]})})]})}),children:d.jsx(ws,{children:d.jsxs(W,{container:!0,spacing:1,children:[n>0&&d.jsxs(W,{item:!0,container:!0,xs:12,children:[d.jsxs(W,{item:!0,xs:2,children:[d.jsx(dt,{variant:"body2",children:" :"}),d.jsx(ln,{})]}),d.jsx(W,{item:!0,xs:1,children:d.jsxs(dt,{variant:"body2",children:["-$",parseFloat(n).toFixed(2),d.jsx(ln,{})]})})]}),r.settings.showVat&&d.jsxs(W,{item:!0,container:!0,xs:12,children:[d.jsxs(W,{item:!0,xs:2,children:[d.jsx(dt,{variant:"body2",children:" (15%)"}),d.jsx(ln,{})]}),d.jsxs(W,{item:!0,xs:1,children:[d.jsxs(dt,{variant:"body2",children:["$",i.toFixed(2)]}),d.jsx(ln,{})]})]}),d.jsxs(W,{item:!0,container:!0,xs:12,children:[d.jsxs(W,{item:!0,xs:2,children:[d.jsx(dt,{variant:"body1",children:r.settings.showVat?" ( )":""}),d.jsx(ln,{})]}),d.jsxs(W,{item:!0,xs:1,children:[d.jsxs(dt,{variant:"body1",children:["$",l.toFixed(2)]}),d.jsx(ln,{})]})]})]})})})},O1=({control:n,setValue:e,subTotal:t,currentDiscount:r})=>{const[s,o]=x.useState("fixed"),[i,a]=x.useState("");x.useEffect(()=>{s==="fixed"&&(a(r.toString()),e("discountValue",r.toString()))},[s,r,e]);const l=f=>{const h=f.target.value;if(o(h),h==="percentage"){const p=parseFloat(i),m=parseFloat(t);if(!isNaN(p)&&m>0){const g=p/m*100;a(Math.min(g,100).toString())}}else h==="fixed"&&(a(r.toString()),e("discountValue",r.toString()))},c=f=>{let h=parseFloat(f.target.value);if(s==="percentage"){h=Math.min(h,100);const p=u(h);a(h.toString()),e("discountValue",p)}else h=Math.min(h,t),a(h.toString()),e("discountValue",h.toString())},u=f=>{if(!f)return"0.00";const h=parseFloat(f);return s==="percentage"?(h/100*t).toFixed(2):h.toFixed(2)};return d.jsx(zr,{title:"",children:d.jsx(ws,{children:d.jsxs(dn,{component:"fieldset",fullWidth:!0,children:[d.jsxs(W,{container:!0,alignItems:"center",spacing:2,children:[d.jsx(W,{item:!0,xs:4,children:d.jsx(dt,{variant:"subtitle1",children:" :"})}),d.jsx(W,{item:!0,xs:8,children:d.jsxs(Im,{row:!0,"aria-label":"discount",name:"discount",value:s,onChange:l,children:[d.jsx(dc,{value:"percentage",control:d.jsx(uc,{}),label:""}),d.jsx(dc,{value:"fixed",control:d.jsx(uc,{}),label:"",sx:{marginLeft:"80px"}})]})})]}),d.jsx($e,{mt:2,children:d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:4}),d.jsxs(W,{item:!0,xs:4,children:[d.jsx(we,{label:s==="percentage"?" ":" ",type:"number",value:i,onChange:c,margin:"normal",sx:{width:"100%"}}),s==="percentage"&&d.jsxs(dt,{variant:"body2",color:"textSecondary",children:[": ",u(i)]})]})]})})]})})})};var aa={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(l,c){switch(l){case"P":return c.date({width:"short"});case"PP":return c.date({width:"medium"});case"PPP":return c.date({width:"long"});case"PPPP":default:return c.date({width:"full"})}},r=function(l,c){switch(l){case"p":return c.time({width:"short"});case"pp":return c.time({width:"medium"});case"ppp":return c.time({width:"long"});case"pppp":default:return c.time({width:"full"})}},s=function(l,c){var u=l.match(/(P+)(p+)?/)||[],f=u[1],h=u[2];if(!h)return t(l,c);var p;switch(f){case"P":p=c.dateTime({width:"short"});break;case"PP":p=c.dateTime({width:"medium"});break;case"PPP":p=c.dateTime({width:"long"});break;case"PPPP":default:p=c.dateTime({width:"full"});break}return p.replace("{{date}}",t(f,c)).replace("{{time}}",r(h,c))},o={p:r,P:s},i=o;e.default=i,n.exports=e.default})(aa,aa.exports);var N1=aa.exports;const I1=rm(N1),A1={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},P1={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class R1{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=A1,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(a=>{const l=a[0];if(l==="p"||l==="P"){const c=this.longFormatters[l];return c(a,this.locale.formatLong)}return a}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:t,formats:r,longFormatters:s}=e;this.locale=t,this.formats=ft({},P1,r),this.longFormatters=s}}class Rl extends R1{constructor({locale:e,formats:t}={}){if(typeof Ys!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:e??Cd,formats:t,longFormatters:I1}),this.parseISO=r=>Fv(r),this.toISO=r=>Sb(r,{format:"extended"}),this.parse=(r,s)=>r===""?null:Iv(r,s,new Date,{locale:this.locale}),this.isValid=r=>xm(this.date(r)),this.format=(r,s)=>this.formatByString(r,this.formats[s]),this.formatByString=(r,s)=>Zr(r,s,{locale:this.locale}),this.getDiff=(r,s,o)=>{switch(o){case"years":return wb(r,this.date(s));case"quarters":return xb(r,this.date(s));case"months":return Lf(r,this.date(s));case"weeks":return vb(r,this.date(s));case"days":return jf(r,this.date(s));case"hours":return mb(r,this.date(s));case"minutes":return gb(r,this.date(s));case"seconds":return bb(r,this.date(s));default:return Ho(r,this.date(s))}},this.isEqual=(r,s)=>r===null&&s===null?!0:Lb(r,s),this.isSameYear=(r,s)=>jv(r,s),this.isSameMonth=(r,s)=>Rv(r,s),this.isSameDay=(r,s)=>db(r,s),this.isSameHour=(r,s)=>Pv(r,s),this.isAfter=(r,s)=>pi(r,s),this.isAfterYear=(r,s)=>pi(r,fi(s)),this.isAfterDay=(r,s)=>pi(r,oa(s)),this.isBefore=(r,s)=>Yr(r,s),this.isBeforeYear=(r,s)=>Yr(r,Is(s)),this.isBeforeDay=(r,s)=>Yr(r,Or(s)),this.isWithinRange=(r,[s,o])=>Lv(r,{start:s,end:o}),this.startOfYear=r=>Is(r),this.startOfMonth=r=>Kc(r),this.startOfWeek=r=>zn(r,{locale:this.locale}),this.startOfDay=r=>Or(r),this.endOfYear=r=>fi(r),this.endOfMonth=r=>ia(r),this.endOfWeek=r=>hi(r,{locale:this.locale}),this.endOfDay=r=>oa(r),this.addYears=(r,s)=>Uc(r,s),this.addMonths=(r,s)=>Ks(r,s),this.addWeeks=(r,s)=>cb(r,s),this.addDays=(r,s)=>Ys(r,s),this.addHours=(r,s)=>rb(r,s),this.addMinutes=(r,s)=>ab(r,s),this.addSeconds=(r,s)=>lb(r,s),this.getYear=r=>jb(r),this.getMonth=r=>Ob(r),this.getDate=r=>Mb(r),this.getHours=r=>Tb(r),this.getMinutes=r=>Eb(r),this.getSeconds=r=>Nb(r),this.getMilliseconds=r=>Db(r),this.setYear=(r,s)=>o1(r,s),this.setMonth=(r,s)=>Zv(r,s),this.setDate=(r,s)=>e1(r,s),this.setHours=(r,s)=>t1(r,s),this.setMinutes=(r,s)=>r1(r,s),this.setSeconds=(r,s)=>s1(r,s),this.setMilliseconds=(r,s)=>n1(r,s),this.getDaysInMonth=r=>Ff(r),this.getNextMonth=r=>Ks(r,1),this.getPreviousMonth=r=>Ks(r,-1),this.getMonthArray=r=>{const o=[Is(r)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(r,s)=>this.setSeconds(this.setMinutes(this.setHours(r,this.getHours(s)),this.getMinutes(s)),this.getSeconds(s)),this.getWeekdays=()=>{const r=new Date;return Cb({start:zn(r,{locale:this.locale}),end:hi(r,{locale:this.locale})}).map(s=>this.formatByString(s,"EEEEEE"))},this.getWeekArray=r=>{const s=zn(Kc(r),{locale:this.locale}),o=hi(ia(r),{locale:this.locale});let i=0,a=s;const l=[];for(;Yr(a,o);){const c=Math.floor(i/7);l[c]=l[c]||[],l[c].push(a),a=Ys(a,1),i+=1}return l},this.getWeekNumber=r=>Rb(r,{locale:this.locale}),this.getYearRange=(r,s)=>{const o=Is(r),i=fi(s),a=[];let l=o;for(;Yr(l,i);)a.push(l),l=Uc(l,1);return a}}}const Qf=({open:n,onClose:e,clientId:t,invoiceId:r,onPaymentSubmit:s,dAmount:o})=>{const{handleSubmit:i,control:a,reset:l,setValue:c}=Mo({defaultValues:{amount:o||0,method:"",reference:r,date:new Date,note:""}}),[u,f]=x.useState([]),[h,p]=x.useState([]),[m,g]=x.useState(!1),[y,b]=x.useState(""),[v,w]=x.useState("success");x.useEffect(()=>{(async()=>{try{const C=await Am(),T=C.safes.filter(E=>parseInt(t)===1||parseInt(t)===2?!E.isBank:E.isBank);f(T),p(C.paymentMethods),T.length>0&&(c("safe",T[0].safeID),c("method",T[0].safePD))}catch(C){console.error("Failed to fetch safes:",C)}})()},[t,c]);const k=async()=>{var C,T;const M={clientID:t,SandType:3,amount:o||0,date:new Date,reference:r,paymentMethod:((C=u[0])==null?void 0:C.safePD)||"",safe:((T=u[0])==null?void 0:T.safeID)||"",payment_image:"",comment:"",note:"",account:"",transactions:[{invoiceId:r,paymentID:"",amount:o||0,note:""}]};try{const E=await Pm(M);console.log("Payment created successfully:",E),s(E),b("   "),w("success"),g(!0),e()}catch(E){console.error("Error creating payment:",E),b("    "),w("error"),g(!0)}};return d.jsxs(tr,{open:n,onClose:e,fullWidth:!0,maxWidth:"sm",children:[d.jsx(rr,{children:""}),d.jsxs("form",{children:[d.jsxs(nr,{children:[d.jsx(Ce,{name:"amount",control:a,rules:{required:"Amount is required"},render:({field:M,fieldState:{error:C}})=>d.jsx(we,{...M,label:"",fullWidth:!0,margin:"dense",size:"small",type:"number",error:!!C,helperText:C?C.message:""})}),d.jsx(W,{item:!0,xs:12,children:d.jsxs(dn,{fullWidth:!0,margin:"dense",children:[" ",d.jsx(Wi,{id:"safe-select-label",size:"small",children:parseInt(t)===1||parseInt(t)===2?"":""}),d.jsx(Ce,{name:"safe",control:a,render:({field:M})=>d.jsx(Hi,{...M,labelId:"safe-select-label",label:parseInt(t)===1||parseInt(t)===2?"":"",size:"small",fullWidth:!0,children:u.map(C=>d.jsx(qi,{value:C.safeID,children:C.safeName},C.safeID))})})]})}),d.jsx(W,{item:!0,xs:12,children:d.jsxs(dn,{fullWidth:!0,margin:"dense",children:[" ",d.jsx(Wi,{id:"payment-method-label",size:"small",children:" "}),d.jsx(Ce,{name:"method",control:a,render:({field:M})=>d.jsx(Hi,{...M,labelId:"payment-method-label",label:" ",size:"small",fullWidth:!0,children:h.map(C=>d.jsx(qi,{value:C.paymentMethodID,children:C.paymentMethodName},C.paymentMethodID))})})]})}),d.jsx(Ce,{name:"reference",control:a,render:({field:M})=>d.jsx(we,{...M,label:"",fullWidth:!0,size:"small",margin:"dense"})}),d.jsx(Ce,{name:"note",control:a,render:({field:M})=>d.jsx(we,{...M,label:"",fullWidth:!0,size:"small",margin:"dense",multiline:!0,rows:3})}),d.jsx(za,{dateAdapter:Rl,children:d.jsx(Ce,{name:"date",control:a,render:({field:M})=>d.jsx(Ha,{...M,label:" ",inputFormat:"dd/MM/yyyy",slots:{textField:C=>d.jsx(we,{...C,fullWidth:!0,margin:"dense",size:"small"})}})})})]}),d.jsxs(gs,{children:[d.jsx(Qe,{onClick:e,color:"secondary",children:""}),d.jsx(Qe,{color:"primary",onClick:k,children:" "})]})]}),d.jsx(xd,{open:m,autoHideDuration:6e3,onClose:()=>g(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:d.jsx(bd,{onClose:()=>g(!1),severity:v,sx:{width:"100%"},children:y})})]})};Qf.propTypes={open:se.bool.isRequired,onClose:se.func.isRequired,clientId:se.string.isRequired,invoiceId:se.string.isRequired,onPaymentSubmit:se.func.isRequired};const j1=(n,e)=>{var t;return{components:{MuiDataGrid:{defaultProps:{localeText:ft({},n,{MuiTablePagination:(e==null||(t=e.components)==null||(t=t.MuiTablePagination)==null?void 0:t.defaultProps)||{}})}}}}},L1={noRowsLabel:"  ",noResultsOverlayLabel:"    .",toolbarDensity:"",toolbarDensityLabel:"",toolbarDensityCompact:"",toolbarDensityStandard:"",toolbarDensityComfortable:"",toolbarColumns:"",toolbarColumnsLabel:" ",toolbarFilters:"",toolbarFiltersLabel:" ",toolbarFiltersTooltipHide:" ",toolbarFiltersTooltipShow:" ",toolbarFiltersTooltipActive:n=>n!==1?`${n}   `:" ",toolbarQuickFilterPlaceholder:"...",toolbarQuickFilterLabel:"",toolbarQuickFilterDeleteIconLabel:"",toolbarExport:"",toolbarExportLabel:"",toolbarExportCSV:"  CSV",toolbarExportPrint:"",toolbarExportExcel:"  ",columnsPanelTextFieldLabel:"  ",columnsPanelTextFieldPlaceholder:" ",columnsPanelDragIconLabel:"  ",columnsPanelShowAllButton:" ",columnsPanelHideAllButton:" ",filterPanelAddFilter:" ",filterPanelRemoveAll:" ",filterPanelDeleteIconLabel:"",filterPanelLogicOperator:" ",filterPanelOperator:"",filterPanelOperatorAnd:"",filterPanelOperatorOr:"",filterPanelColumns:"",filterPanelInputLabel:"",filterPanelInputPlaceholder:" ",filterOperatorContains:"",filterOperatorEquals:"",filterOperatorStartsWith:" ",filterOperatorEndsWith:" ",filterOperatorIs:"",filterOperatorNot:"",filterOperatorAfter:"",filterOperatorOnOrAfter:"  ",filterOperatorBefore:"",filterOperatorOnOrBefore:"  ",filterOperatorIsEmpty:"",filterOperatorIsNotEmpty:" ",filterOperatorIsAnyOf:" ","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:" ",headerFilterOperatorEquals:"",headerFilterOperatorStartsWith:" ",headerFilterOperatorEndsWith:" ",headerFilterOperatorIs:"",headerFilterOperatorNot:" ",headerFilterOperatorAfter:" ",headerFilterOperatorOnOrAfter:"   ",headerFilterOperatorBefore:" ",headerFilterOperatorOnOrBefore:"   ",headerFilterOperatorIsEmpty:" ",headerFilterOperatorIsNotEmpty:"  ",headerFilterOperatorIsAnyOf:"  ","headerFilterOperator=":"","headerFilterOperator!=":" ","headerFilterOperator>":" ","headerFilterOperator>=":"   ","headerFilterOperator<":" ","headerFilterOperator<=":"   ",filterValueAny:"",filterValueTrue:"",filterValueFalse:"",columnMenuLabel:"",columnMenuShowColumns:" ",columnMenuManageColumns:" ",columnMenuFilter:"",columnMenuHideColumn:"",columnMenuUnsort:" ",columnMenuSortAsc:" ",columnMenuSortDesc:" ",columnHeaderFiltersTooltipActive:n=>n!==1?`${n}   `:" ",columnHeaderFiltersLabel:" ",columnHeaderSortIconLabel:"",footerRowSelected:n=>n!==1?`  ${n.toLocaleString()}  `:"   ",footerTotalRows:" :",footerTotalVisibleRows:(n,e)=>`${n.toLocaleString()}  ${e.toLocaleString()}`,checkboxSelectionHeaderName:"  ",checkboxSelectionSelectAllRows:"  ",checkboxSelectionUnselectAllRows:"   ",checkboxSelectionSelectRow:" ",checkboxSelectionUnselectRow:"  ",booleanCellTrueLabel:"",booleanCellFalseLabel:"",actionsCellMore:"",pinToLeft:" ",pinToRight:" ",unpin:" ",treeDataGroupingHeaderName:"",treeDataExpand:" ",treeDataCollapse:" ",groupingColumnHeaderName:"",groupColumn:n=>`  ${n}`,unGroupColumn:n=>`   ${n}`,detailPanelToggle:"/  ",expandDetailPanel:"",collapseDetailPanel:"",rowReorderingHeaderName:"  ",aggregationMenuItemHeader:" ",aggregationFunctionLabelSum:"",aggregationFunctionLabelAvg:"",aggregationFunctionLabelMin:" ",aggregationFunctionLabelMax:" ",aggregationFunctionLabelSize:""},F1=j1(L1,sm),Xf=({invoiceId:n,open:e,onClose:t})=>{const[r,s]=x.useState([]),[o,i]=x.useState(!1),a=vd(),l=om();x.useEffect(()=>{e&&(async()=>{i(!0);try{const p=(await vm(n)).map(m=>({id:m.paymentID,paymentNumber:m.paymentID,paymentAmount:m.amount,paymentDate:m.date,paymentReference:m.reference}));s(p)}catch(h){console.error("Failed to fetch transactions",h)}finally{i(!1)}})()},[n,e]);const c=[{field:"paymentNumber",headerName:" ",flex:1},{field:"paymentAmount",headerName:"",flex:1},{field:"paymentDate",headerName:"",flex:1},{field:"paymentReference",headerName:"",flex:1},{field:"actions",headerName:"",flex:.5,renderCell:f=>d.jsx(Dr,{color:"primary",onClick:()=>a(`/apps/invoice/payment/payment-edit/${f.id}`),children:d.jsx(_a,{})})}],u=Ee.useMemo(()=>im({},F1,l,{direction:"rtl"}),[l]);return d.jsxs(tr,{open:e,onClose:t,fullWidth:!0,maxWidth:"md",children:[d.jsx(rr,{children:" "}),d.jsx(nr,{children:d.jsx(am,{theme:u,children:o?d.jsx($e,{display:"flex",justifyContent:"center",alignItems:"center",children:d.jsx(Va,{})}):d.jsx($e,{sx:{height:400,width:"100%"},children:d.jsx(Rm,{rows:r,columns:c,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0})})})}),d.jsx(gs,{children:d.jsx(Qe,{onClick:t,color:"primary",children:""})})]})};Xf.propTypes={invoiceId:se.string.isRequired,open:se.bool.isRequired,onClose:se.func.isRequired};const $1=({open:n,onClose:e,imageID:t})=>{const[r,s]=x.useState(null),[o,i]=x.useState(!0),[a,l]=x.useState(!1),[c,u]=x.useState(!1);x.useEffect(()=>(n&&(async()=>{if(!t){console.error("No imageID provided!");return}console.log("Fetching file with imageID:",t),i(!0),l(!1),u(!1);try{const m=await lm.get(`/api/invoice/file/${t}`,{responseType:"blob",validateStatus:function(y){return y===200}}),g=URL.createObjectURL(m.data);s(g)}catch(m){console.error("Error fetching file:",m),l(!0)}finally{i(!1)}})(),()=>{r&&URL.revokeObjectURL(r)}),[t,n]);const f=()=>{u(!0)},h=()=>{l(!0),u(!1)};return d.jsxs(tr,{open:n,onClose:e,maxWidth:"md",fullWidth:!0,children:[d.jsxs(rr,{children:[" ",d.jsx(Dr,{"aria-label":"close",onClick:e,sx:{position:"absolute",right:8,top:8},children:d.jsx(gd,{})})]}),d.jsx(nr,{dividers:!0,style:{minHeight:"600px",display:"flex",justifyContent:"center",alignItems:"center"},children:o?d.jsx(Va,{}):a?d.jsx(dt,{color:"error",children:"An error occurred while loading the file. Please verify that the file exists and try again."}):d.jsx("div",{style:{textAlign:"center",width:"100%"},children:d.jsx("embed",{src:r,type:"application/pdf",width:"100%",height:"600px",style:{border:"1px solid #ddd"},onLoad:f,onError:h})})})]})},Zf=({control:n,setValue:e,watch:t,clientId:r,invoiceId:s,subTotal:o})=>{const i=t("paid"),a=t("balance"),[l,c]=x.useState(!1),[u,f]=x.useState(!1),[h,p]=x.useState(!1);x.useEffect(()=>{e("paymentStatus",a===0?"":" ")},[a,e]);const m=()=>{c(!0)},g=y=>{console.log("Payment submitted:",y)};return d.jsx(zr,{title:"",children:d.jsxs(ws,{children:[d.jsxs($e,{display:"flex",justifyContent:"flex-start",mb:2,children:[d.jsx(Qe,{variant:"contained",color:"primary",onClick:m,sx:{mr:1},children:""}),d.jsx(Qe,{variant:"outlined",color:"secondary",onClick:()=>f(!0),children:" "})]}),d.jsxs(yd,{spacing:2,mt:2,children:[d.jsx(Ce,{name:"paymentStatus",control:n,render:({field:y})=>d.jsx(we,{...y,label:" ",value:y.value||"",fullWidth:!0,size:"small",InputProps:{readOnly:!0}})}),d.jsx(Ce,{name:"paid",control:n,render:({field:y})=>d.jsx(we,{...y,label:" ",value:i||0,fullWidth:!0,size:"small",type:"number",InputProps:{readOnly:!0}})}),d.jsx(Ce,{name:"balance",control:n,render:({field:y})=>(o&&i!==null&&(o+o*.15-i).toFixed(2),d.jsx(we,{...y,label:" ",value:a||"",fullWidth:!0,size:"small",type:"number",InputProps:{readOnly:!0}}))}),d.jsx(za,{dateAdapter:Rl,children:d.jsx(Ce,{name:"dueDate",control:n,render:({field:y})=>d.jsx(Ha,{...y,label:" ",format:"dd/MM/yyyy",value:y.value||null,onChange:b=>e("dueDate",b),slots:{textField:b=>d.jsx(we,{...b,fullWidth:!0,size:"small"})}})})})]}),d.jsx(Qf,{open:l,onClose:()=>c(!1),clientId:r,invoiceId:s,onPaymentSubmit:g,dAmount:a}),d.jsx(Xf,{invoiceId:s,open:u,onClose:()=>f(!1)}),d.jsx($1,{open:h,onClose:()=>p(!1),invoiceId:s})]})})};Zf.propTypes={control:se.object.isRequired,setValue:se.func.isRequired,watch:se.func.isRequired,clientId:se.string.isRequired,invoiceId:se.string.isRequired,subTotal:se.number.isRequired};const eh=({open:n,handleClose:e,onCompanyAdded:t})=>{const{handleSubmit:r,control:s,formState:{errors:o},reset:i}=Mo(),[a,l]=x.useState(!1),c=async u=>{l(!0);try{const f=await wm(u);console.log("Added shipping company:",f,f.new_ship_id),t(f.new_ship_id),i(),e()}catch(f){console.error("Error adding new shipping company:",f)}finally{l(!1)}};return d.jsxs(tr,{open:n,onClose:e,fullWidth:!0,maxWidth:"sm",children:[d.jsx(rr,{children:"   "}),d.jsx(nr,{children:d.jsx("form",{onSubmit:r(c),children:d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipName",control:s,rules:{required:"   "},render:({field:u})=>{var f;return d.jsx(we,{...u,label:"  ",fullWidth:!0,size:"small",error:!!o.shipName,helperText:(f=o.shipName)==null?void 0:f.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipVat",control:s,rules:{required:"  "},render:({field:u})=>{var f;return d.jsx(we,{...u,label:" ",fullWidth:!0,size:"small",error:!!o.shipVat,helperText:(f=o.shipVat)==null?void 0:f.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipTel",control:s,rules:{required:"  "},render:({field:u})=>{var f;return d.jsx(we,{...u,label:" ",fullWidth:!0,size:"small",error:!!o.shipTel,helperText:(f=o.shipTel)==null?void 0:f.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipAddress",control:s,rules:{required:" "},render:({field:u})=>{var f;return d.jsx(we,{...u,label:"",fullWidth:!0,size:"small",error:!!o.shipAddress,helperText:(f=o.shipAddress)==null?void 0:f.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"DeliveryTime",control:s,rules:{required:"  "},render:({field:u})=>{var f;return d.jsx(we,{...u,label:" ",size:"small",fullWidth:!0,error:!!o.DeliveryTime,helperText:(f=o.DeliveryTime)==null?void 0:f.message})}})})]})})}),d.jsxs(gs,{children:[d.jsx(Qe,{onClick:e,color:"secondary",children:""}),d.jsx(Qe,{onClick:r(c),color:"primary",variant:"contained",disabled:a,children:a?" ...":""})]})]})};eh.propTypes={open:se.bool.isRequired,handleClose:se.func.isRequired,onCompanyAdded:se.func.isRequired};const th=({open:n,handleClose:e,shippingCompanyData:t,onCompanyEdited:r})=>{const{handleSubmit:s,control:o,formState:{errors:i},reset:a,setValue:l}=Mo(),[c,u]=x.useState(!1);x.useEffect(()=>{t&&(console.log("Setting initial form values:",t),l("shipName",t.label),l("shipVat",t.shipVat),l("shipTel",t.shipTel),l("shipAddress",t.shipAddress),l("DeliveryTime",t.DeliveryTime))},[t,l]);const f=async h=>{u(!0);try{const p=await Cm(t.id,h);console.log("Edited shipping company:",p),r(t.id),a(),e()}catch(p){console.error("Error updating shipping company:",p)}finally{u(!1)}};return d.jsxs(tr,{open:n,onClose:e,fullWidth:!0,maxWidth:"sm",children:[d.jsx(rr,{children:"  "}),d.jsx(nr,{children:d.jsx("form",{onSubmit:s(f),children:d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipName",control:o,rules:{required:"   "},render:({field:h})=>{var p;return d.jsx(we,{...h,label:"  ",fullWidth:!0,size:"small",error:!!i.shipName,helperText:(p=i.shipName)==null?void 0:p.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipVat",control:o,rules:{required:"  "},render:({field:h})=>{var p;return d.jsx(we,{...h,label:" ",fullWidth:!0,size:"small",error:!!i.shipVat,helperText:(p=i.shipVat)==null?void 0:p.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipTel",control:o,rules:{required:"  "},render:({field:h})=>{var p;return d.jsx(we,{...h,label:" ",fullWidth:!0,size:"small",error:!!i.shipTel,helperText:(p=i.shipTel)==null?void 0:p.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"shipAddress",control:o,rules:{required:" "},render:({field:h})=>{var p;return d.jsx(we,{...h,label:"",fullWidth:!0,size:"small",error:!!i.shipAddress,helperText:(p=i.shipAddress)==null?void 0:p.message})}})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(Ce,{name:"DeliveryTime",control:o,rules:{required:"  "},render:({field:h})=>{var p;return d.jsx(we,{...h,label:" ",size:"small",fullWidth:!0,error:!!i.DeliveryTime,helperText:(p=i.DeliveryTime)==null?void 0:p.message})}})})]})})}),d.jsxs(gs,{children:[d.jsx(Qe,{onClick:e,color:"secondary",children:""}),d.jsx(Qe,{onClick:s(f),color:"primary",variant:"contained",disabled:c,children:c?" ...":""})]})]})};th.propTypes={open:se.bool.isRequired,handleClose:se.func.isRequired,shippingCompanyData:se.object.isRequired,onCompanyEdited:se.func.isRequired};const B1=({invoiceData:n,setInvoiceValue:e})=>{const{control:t,setValue:r}=kd(),[s,o]=x.useState([]),[i,a]=x.useState(null),[l,c]=x.useState(!1),[u,f]=x.useState(!1),[h,p]=x.useState(null);x.useEffect(()=>{(async()=>{try{const M=(await cc()).shipping_companies.map(C=>({label:C.shipName,id:C.shipID,DeliveryTime:C.DeliveryTime,shipTel:C.shipTel,shipVat:C.shipVat,shipAddress:C.shipAddress}));if(o(M),n.shipping_service_id){const C=M.find(T=>T.id===n.shipping_service_id);C&&(a(C),r("shippingCompany",C),r("shippingCompanyNumber",C.shipTel),r("vatNumber",C.shipVat),r("estimatedShippingTime",C.DeliveryTime))}r("shippingFees",n.shipping_charge_on_order||""),r("shippingTrackingNumber",n.shipping_tracking_number||""),r("DeliveryDate",n.delivery_date),e("shipping_service_id",n.shipping_service_id||"")}catch(k){console.error("Failed to fetch shipping companies:",k)}})()},[r,e,n]);const m=(w,k)=>{a(k),k?(r("shippingCompany",k),r("shippingCompanyNumber",k.shipTel),r("vatNumber",k.shipVat),r("estimatedShippingTime",k.DeliveryTime),e("shipping_service_id",k.id)):(r("shippingCompanyNumber",""),r("vatNumber",""),r("estimatedShippingTime",""),e("shipping_service_id",""))},g=()=>{c(!0)},y=()=>{c(!1)},b=async w=>{try{const M=(await cc()).shipping_companies.map(T=>({label:T.shipName,id:T.shipID,DeliveryTime:T.DeliveryTime,shipTel:T.shipTel,shipVat:T.shipVat,shipAddress:T.shipAddress}));o(M);const C=M.find(T=>T.id===w);C&&(a(C),r("shippingCompany",C),r("shippingCompanyNumber",C.shipTel),r("vatNumber",C.shipVat),r("estimatedShippingTime",C.DeliveryTime),e("shipping_service_id",C.id)),c(!1)}catch(k){console.error("Failed to refetch shipping companies:",k)}},v=()=>{i&&(p(i),f(!0))};return d.jsxs(d.Fragment,{children:[d.jsx(zr,{title:" ",children:d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:12,md:6,children:d.jsxs($e,{sx:{border:"1px solid #ccc",p:2,borderRadius:1,mb:2},children:[d.jsx($e,{sx:{fontWeight:"bold",mb:1,backgroundColor:"#ede7f66b",p:1,borderRadius:"4px"},children:""}),d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:4,children:d.jsx(Ce,{name:"shippingCompany",control:t,render:({field:{onChange:w,value:k,...M}})=>d.jsx(jm,{...M,options:s,getOptionLabel:C=>C.label||"",isOptionEqualToValue:(C,T)=>C.id===T.id,onChange:(C,T)=>{w(T),m(C,T)},value:k||i||null,renderInput:C=>d.jsx(we,{...C,label:"  ",size:"small",variant:"outlined",fullWidth:!0,required:!0,InputProps:{...C.InputProps,style:{padding:"8px 0px"},startAdornment:d.jsx(es,{position:"start",children:d.jsx(Dr,{size:"small",onClick:v,children:d.jsx(_a,{sx:{color:"#2196f3"}})})}),endAdornment:d.jsx(es,{position:"end",children:d.jsx(Dr,{size:"small",onClick:g,children:d.jsx(Ui,{sx:{color:"#2196f3"}})})})}})})})}),d.jsx(W,{item:!0,xs:4,children:d.jsx(Ce,{name:"shippingFees",control:t,render:({field:{value:w,onChange:k,...M}})=>d.jsx(we,{...M,label:" ",size:"small",variant:"outlined",fullWidth:!0,value:w||"",onChange:C=>{k(C),e("shipping_charge_on_order",C.target.value)}})})}),d.jsx(W,{item:!0,xs:4,children:d.jsx(Ce,{name:"shippingTrackingNumber",control:t,render:({field:{value:w,onChange:k,...M}})=>d.jsx(we,{...M,label:" ",size:"small",variant:"outlined",fullWidth:!0,value:w||"",onChange:C=>{k(C),e("shipping_tracking_number",C.target.value)}})})})]})]})}),d.jsx(W,{item:!0,xs:12,md:6,children:d.jsxs($e,{sx:{border:"1px solid #ccc",p:2,borderRadius:1,mb:2},children:[d.jsx($e,{sx:{fontWeight:"bold",mb:1,backgroundColor:"#ede7f66b",p:1,borderRadius:"4px"},children:" "}),d.jsxs(W,{container:!0,spacing:2,children:[d.jsx(W,{item:!0,xs:3,children:d.jsx(Ce,{name:"shippingCompanyNumber",control:t,render:({field:{value:w,...k}})=>d.jsx(we,{...k,label:" ",size:"small",variant:"outlined",fullWidth:!0,sx:{"& .MuiInputLabel-root":{color:w?"black":"#2196f3"},"& .MuiOutlinedInput-input.Mui-disabled":{WebkitTextFillColor:"#4C9EF5"}},value:w||"",disabled:!0})})}),d.jsx(W,{item:!0,xs:3,children:d.jsx(Ce,{name:"vatNumber",control:t,render:({field:{value:w,...k}})=>d.jsx(we,{...k,label:" ",size:"small",variant:"outlined",fullWidth:!0,value:w||"",sx:{"& .MuiInputLabel-root":{color:w?"black":"#2196f3"},"& .MuiOutlinedInput-input.Mui-disabled":{WebkitTextFillColor:"#4C9EF5"}},disabled:!0})})}),d.jsx(W,{item:!0,xs:2,children:d.jsx(Ce,{name:"estimatedShippingTime",control:t,render:({field:{value:w,...k}})=>d.jsx(we,{...k,label:" ",variant:"outlined",size:"small",type:"number",fullWidth:!0,sx:{"& .MuiInputLabel-root":{color:w?"black":"#2196f3"},"& .MuiOutlinedInput-input.Mui-disabled":{WebkitTextFillColor:"#4C9EF5"}},value:w||"",disabled:!0})})}),d.jsx(W,{item:!0,xs:4,children:d.jsx(za,{dateAdapter:Rl,children:d.jsx(Ce,{name:"DeliveryDate",control:t,render:({field:w})=>{const k=w.value?new Date(w.value):null,M=k instanceof Date&&!isNaN(k)?k:null;return d.jsx(Ha,{...w,label:" ",format:"dd/MM/yyyy",value:M,onChange:C=>e("delivery_date",C),slots:{textField:C=>d.jsx(we,{...C,fullWidth:!0,size:"small"})}})}})})})]})]})})]})}),d.jsx(eh,{open:l,handleClose:y,onCompanyAdded:b}),d.jsx(th,{open:u,handleClose:()=>f(!1),shippingCompanyData:h,onCompanyEdited:b})]})};en("input")({position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",whiteSpace:"nowrap",clipPath:"inset(100%)",clip:"rect(0 0 0 0)",overflow:"hidden"});function Ke(n){this.content=n}Ke.prototype={constructor:Ke,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Ke(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ke(t)},addToStart:function(n,e){return new Ke([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ke(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Ke(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ke.from(n),n.size?new Ke(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ke.from(n),n.size?new Ke(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ke.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ke.from=function(n){if(n instanceof Ke)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ke(e)};function nh(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)t++;return t}if(s.content.size||o.content.size){let i=nh(s.content,o.content,t+1);if(i!=null)return i}t+=s.nodeSize}}function rh(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let i=n.child(--s),a=e.child(--o),l=i.nodeSize;if(i==a){t-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:t,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(i.content.size||a.content.size){let c=rh(i.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class j{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let i=0,a=0;a<t;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,s+a,o||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",i=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new j(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,i=0;i<t;o++){let a=this.content[o],l=i+a.nodeSize;l>e&&((i<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),r.push(a),s+=a.nodeSize),i=l}return new j(r,s)}cutByIndex(e,t){return e==t?j.empty:e==0&&t==this.content.length?this:new j(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new j(s,o)}addToStart(e){return new j([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new j(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return nh(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return rh(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Rs(0,e);if(e==this.size)return Rs(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let o=this.child(r),i=s+o.nodeSize;if(i>=e)return i==e||t>0?Rs(r+1,i):Rs(r,s);s=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return j.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new j(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return j.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new j(t||e,r)}static from(e){if(!e)return j.empty;if(e instanceof j)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new j([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}j.empty=new j([],0);const yi={index:0,offset:0};function Rs(n,e){return yi.index=n,yi.offset=e,yi}function lo(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!lo(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!lo(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Te=class la{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&lo(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return la.none;if(e instanceof la)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Te.none=[];class co extends Error{}class U{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=oh(this.content,e+this.openStart,t);return r&&new U(r,this.openStart,this.openEnd)}removeBetween(e,t){return new U(sh(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return U.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new U(j.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new U(e,r,s)}}U.empty=new U(j.empty,0,0);function sh(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:i,offset:a}=n.findIndex(t);if(s==e||o.isText){if(a!=t&&!n.child(i).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=i)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(sh(o.content,e-s-1,t-s-1)))}function oh(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),i=n.maybeChild(s);if(o==e||i.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=oh(i.content,e-o-1,t);return a&&n.replaceChild(s,i.copy(a))}function _1(n,e,t){if(t.openStart>n.depth)throw new co("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new co("Inconsistent open depths");return ih(n,e,t,0)}function ih(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let i=ih(n,e,t,r+1);return o.copy(o.content.replaceChild(s,i))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let i=n.parent,a=i.content;return Vn(i,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=z1(t,n);return Vn(o,lh(n,i,a,e,r))}else return Vn(o,uo(n,e,r))}function ah(n,e){if(!e.type.compatibleContent(n.type))throw new co("Cannot join "+e.type.name+" onto "+n.type.name)}function ca(n,e,t){let r=n.node(t);return ah(r,e.node(t)),r}function Hn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ns(n,e,t,r){let s=(e||n).node(t),o=0,i=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Hn(n.nodeAfter,r),o++));for(let a=o;a<i;a++)Hn(s.child(a),r);e&&e.depth==t&&e.textOffset&&Hn(e.nodeBefore,r)}function Vn(n,e){return n.type.checkContent(e),n.copy(e)}function lh(n,e,t,r,s){let o=n.depth>s&&ca(n,e,s+1),i=r.depth>s&&ca(t,r,s+1),a=[];return ns(null,n,s,a),o&&i&&e.index(s)==t.index(s)?(ah(o,i),Hn(Vn(o,lh(n,e,t,r,s+1)),a)):(o&&Hn(Vn(o,uo(n,e,s+1)),a),ns(e,t,s,a),i&&Hn(Vn(i,uo(t,r,s+1)),a)),ns(r,null,s,a),new j(a)}function uo(n,e,t){let r=[];if(ns(null,n,t,r),n.depth>t){let s=ca(n,e,t+1);Hn(Vn(s,uo(n,e,t+1)),r)}return ns(e,null,t,r),new j(r)}function z1(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(j.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class ls{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Te.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new fo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(o),c=o-l;if(r.push(i,a,s+l),!c||(i=i.child(a),i.isText))break;o=c-1,s+=l+1}return new ls(t,r,o)}static resolveCached(e,t){let r=Zc.get(e);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==t)return i}else Zc.set(e,r=new H1);let s=r.elts[r.i]=ls.resolve(e,t);return r.i=(r.i+1)%V1,s}}class H1{constructor(){this.elts=[],this.i=0}}const V1=12,Zc=new WeakMap;class fo{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const W1=Object.create(null);let Wn=class ua{constructor(e,t,r,s=Te.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||j.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&lo(this.attrs,t||e.defaultAttrs||W1)&&Te.sameSet(this.marks,r||Te.none)}copy(e=null){return e==this.content?this:new ua(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ua(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return U.empty;let s=this.resolve(e),o=this.resolve(t),i=r?0:s.sharedDepth(t),a=s.start(i),c=s.node(i).content.cut(s.pos-a,o.pos-a);return new U(c,s.depth-i,o.depth-i)}replace(e,t,r){return _1(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return ls.resolveCached(this,e)}resolveNoCache(e){return ls.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ch(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=j.empty,s=0,o=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),i=o&&o.matchFragment(this.content,t);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Te.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Te.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=j.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Wn.prototype.text=void 0;class ho extends Wn{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ch(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ho(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ho(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ch(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Jn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new U1(e,t);if(r.next==null)return Jn.empty;let s=uh(r);r.next&&r.err("Unexpected trailing text");let o=X1(Q1(s));return Z1(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(i,a){let l=i.matchFragment(e,r);if(l&&(!t||l.validEnd))return j.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:f}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let h=o(f,a.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:l}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return o}).join(`
`)}}Jn.empty=new Jn(!0);class U1{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function uh(n){let e=[];do e.push(q1(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function q1(n){let e=[];do e.push(Y1(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Y1(n){let e=J1(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=K1(n,e);else break;return e}function eu(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function K1(n,e){let t=eu(n),r=t;return n.eat(",")&&(n.next!="}"?r=eu(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function G1(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let i=t[o];i.groups.indexOf(e)>-1&&s.push(i)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function J1(n){if(n.eat("(")){let e=uh(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=G1(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Q1(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function s(i,a){i.forEach(l=>l.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=o(i.exprs[l],a);if(l==i.exprs.length-1)return c;s(c,a=t())}else if(i.type=="star"){let l=t();return r(a,l),s(o(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=t();return s(o(i.expr,a),l),s(o(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=t();s(o(i.expr,l),u),l=u}if(i.max==-1)s(o(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=t();r(l,u),s(o(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function dh(n,e){return e-n}function tu(n,e){let t=[];return r(e),t.sort(dh);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let i=0;i<o.length;i++){let{term:a,to:l}=o[i];!a&&t.indexOf(l)==-1&&r(l)}}}function X1(n){let e=Object.create(null);return t(tu(n,0));function t(r){let s=[];r.forEach(i=>{n[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);tu(n,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Jn(r.indexOf(n.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(dh);o.next.push({type:s[i][0],next:e[a.join(",")]||t(a)})}return o}}function Z1(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];i.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function fh(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function hh(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function ph(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function mh(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new tw(n,r,e[r]);return t}let nu=class gh{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=mh(e,r.attrs),this.defaultAttrs=fh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Jn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:hh(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wn(this,this.computeAttrs(e),j.from(t),Te.setFrom(r))}createChecked(e=null,t,r){return t=j.from(t),this.checkContent(t),new Wn(this,this.computeAttrs(e),t,Te.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=j.from(t),t.size){let i=this.contentMatch.fillBefore(t);if(!i)return null;t=i.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(j.empty,!0);return o?new Wn(this,e,t.append(o),Te.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ph(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Te.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,i)=>r[o]=new gh(o,t,i));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ew(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class tw{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ew(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Vo{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=mh(e,s.attrs),this.excluded=null;let o=fh(this.attrs);this.instance=o?new Te(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Te(this,hh(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,i)=>r[o]=new Vo(o,s++,t,i)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ph(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class yh{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Ke.from(e.nodes),t.marks=Ke.from(e.marks||{}),this.nodes=nu.compile(this.spec.nodes,this),this.marks=Vo.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=Jn.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?ru(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:ru(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nu){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new ho(r,r.defaultAttrs,e,Te.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Wn.fromJSON(this,e)}markFromJSON(e){return Te.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ru(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],i=o;if(o)t.push(o);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function nw(n){return n.tag!=null}function rw(n){return n.style!=null}class xn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(nw(s))this.tags.push(s);else if(rw(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new ou(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ou(this,t,!0);return r.addAll(e,t.from,t.to),U.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(iw(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(e);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(i.getAttrs){let l=i.getAttrs(t);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<t.length;i++){let a=t[i];if((a.priority==null?50:a.priority)<o)break}t.splice(i,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=iu(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=iu(i)),i.node||i.ignore||i.mark||(i.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new xn(e,xn.schemaRules(e)))}}const xh={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},sw={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bh={ol:!0,ul:!0},po=1,mo=2,rs=4;function su(n,e,t){return e!=null?(e?po:0)|(e==="full"?mo:0):n&&n.whitespace=="pre"?po|mo:t&~rs}class js{constructor(e,t,r,s,o,i,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=s,this.solid=o,this.options=a,this.content=[],this.activeMarks=Te.none,this.stashMarks=[],this.match=i||(a&rs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(j.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&po)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=j.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(j.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let s=r[t];(this.type?this.type.allowsMarkType(s.type):aw(s.type,e))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xh.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ou{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let s=t.topNode,o,i=su(null,t.preserveWhitespace,0)|(r?rs:0);s?o=new js(s.type,s.attrs,Te.none,Te.none,!0,t.topMatch||s.type.contentMatch,i):r?o=new js(null,null,Te.none,Te.none,!0,null,i):o=new js(e.schema.topNodeType,null,Te.none,Te.none,!0,null,i),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.style;if(!r||!r.length)return t();let s=this.readStyles(e.style);if(!s)return;let[o,i]=s,a=this.top;for(let l=0;l<i.length;l++)this.removePendingMark(i[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);t();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<i.length;l++)this.addPendingMark(i[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&mo||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&po)r.options&mo?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),s;bh.hasOwnProperty(r)&&this.parser.normalizeLists&&ow(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,t));if(o?o.ignore:sw.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let i,a=this.top,l=this.needsBlock;if(xh.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),i=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),i&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?s:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Te.none,r=Te.none;if(e.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=e.getPropertyValue(o);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(o,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(c=>{l.clearMark(c)&&(r=c.addToSet(r))}):t=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(t),l.consuming===!1)a=l;else break}}return[t,r]}addElementByRule(e,t,r){let s,o,i;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):s=this.enter(o,t.attrs||null,t.preserveWhitespace)):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}s&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}addAll(e,t,r){let s=t||0;for(let o=t?e.childNodes[t]:e.firstChild,i=r==null?null:e.childNodes[r];o!=i;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o);this.findAtPoint(e,s)}findPlace(e){let t,r;for(let s=this.open;s>=0;s--){let o=this.nodes[s],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,r=o,!i.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let s=0;s<e.marks.length;s++)(!t.type||t.type.allowsMarkType(e.marks[s].type))&&(r=e.marks[s].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let s=this.findPlace(e.create(t));return s&&this.enterInner(e,t,!0,r),s}enterInner(e,t=null,r=!1,s){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let i=su(e,s,o.options);o.options&rs&&o.content.length==0&&(i|=rs),this.nodes.push(new js(e,t,o.activeMarks,o.pendingMarks,r,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=o;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=lw(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let s=this.nodes[r];if(s.pendingMarks.lastIndexOf(e)>-1)s.pendingMarks=e.removeFromSet(s.pendingMarks);else{s.activeMarks=e.removeFromSet(s.activeMarks);let i=s.popFromStashMark(e);i&&s.type&&s.type.allowsMarkType(i.type)&&(s.activeMarks=i.addToSet(s.activeMarks))}if(s==t)break}}}function ow(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&bh.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function iw(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function iu(n){let e={};for(let t in n)e[t]=n[t];return e}function aw(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],i=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}function lw(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class or{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=xi(t).createDocumentFragment());let s=r,o=[];return e.forEach(i=>{if(o.length||i.marks.length){let a=0,l=0;for(;a<o.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)s=o.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,t);u&&(o.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=Gs(xi(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&Gs(xi(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return Gs(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new or(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=au(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return au(e.marks)}}function au(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function xi(n){return n.document||window.document}const lu=new WeakMap;function cw(n){let e=lu.get(n);return e===void 0&&lu.set(n,e=uw(n)),e}function uw(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function Gs(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=cw(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(t=s.slice(0,i),s=s.slice(i+1));let a,l=t?n.createElementNS(t,s):n.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Gs(n,h,t,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const vh=65535,wh=Math.pow(2,16);function dw(n,e){return n+e*wh}function cu(n){return n&vh}function fw(n){return(n-(n&vh))/wh}const Ch=1,kh=2,Js=4,Sh=8;class da{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Sh)>0}get deletedBefore(){return(this.delInfo&(Ch|Js))>0}get deletedAfter(){return(this.delInfo&(kh|Js))>0}get deletedAcross(){return(this.delInfo&Js)>0}}class ht{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ht.empty)return ht.empty}recover(e){let t=0,r=cu(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+fw(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+i],f=l+c;if(e<=f){let h=c?e==l?-1:e==f?1:t:t,p=l+s+(h<0?0:u);if(r)return p;let m=e==(t<0?l:f)?null:dw(a/3,e-l),g=e==l?kh:e==f?Ch:Js;return(t<0?e!=l:e!=f)&&(g|=Sh),new da(p,g,m)}s+=u-c}return r?e+s:new da(e+s,0,null)}touches(e,t){let r=0,s=cu(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),l=i+(this.inverted?0:o),c=this.ranges[s+t],u=this.ranges[s+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new ht(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ht.empty:new ht(e<0?[0,-e,0]:[0,0,e])}}ht.empty=new ht([]);class kr{constructor(e=[],t,r=0,s=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=s}slice(e=0,t=this.maps.length){return new kr(this.maps,this.mirror,e,t)}copy(){return new kr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new kr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this.maps[o],a=i.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new da(e,s,null)}}const bi=Object.create(null);class tt{getMap(){return ht.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=bi[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in bi)throw new RangeError("Duplicate use of step JSON ID "+e);return bi[e]=t,t.prototype.jsonID=e,t}}class ze{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ze(e,null)}static fail(e){return new ze(null,e)}static fromReplace(e,t,r,s){try{return ze.ok(e.replace(t,r,s))}catch(o){if(o instanceof co)return ze.fail(o.message);throw o}}}function jl(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(jl(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return j.fromArray(r)}class mn extends tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new U(jl(t.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),t.openStart,t.openEnd);return ze.fromReplace(e,this.from,this.to,o)}invert(){return new Bt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new mn(t.pos,r.pos,this.mark)}merge(e){return e instanceof mn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new mn(t.from,t.to,e.markFromJSON(t.mark))}}tt.jsonID("addMark",mn);class Bt extends tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new U(jl(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return ze.fromReplace(e,this.from,this.to,r)}invert(){return new mn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bt(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bt(t.from,t.to,e.markFromJSON(t.mark))}}tt.jsonID("removeMark",Bt);class gn extends tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ze.fromReplace(e,this.pos,this.pos+1,new U(j.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new gn(this.pos,t.marks[s]);return new gn(this.pos,this.mark)}}return new Nr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new gn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gn(t.pos,e.markFromJSON(t.mark))}}tt.jsonID("addNodeMark",gn);class Nr extends tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ze.fromReplace(e,this.pos,this.pos+1,new U(j.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new gn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Nr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Nr(t.pos,e.markFromJSON(t.mark))}}tt.jsonID("removeNodeMark",Nr);class We extends tt{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&fa(e,this.from,this.to)?ze.fail("Structure replace would overwrite content"):ze.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ht([this.from,this.to-this.from,this.slice.size])}invert(e){return new We(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new We(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof We)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?U.empty:new U(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new We(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?U.empty:new U(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new We(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new We(t.from,t.to,U.fromJSON(e,t.slice),!!t.structure)}}tt.jsonID("replace",We);class Ue extends tt{constructor(e,t,r,s,o,i,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(e){if(this.structure&&(fa(e,this.from,this.gapFrom)||fa(e,this.gapTo,this.to)))return ze.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ze.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?ze.fromReplace(e,this.from,this.to,r):ze.fail("Content does not fit in gap")}getMap(){return new ht([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ue(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new Ue(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ue(t.from,t.to,t.gapFrom,t.gapTo,U.fromJSON(e,t.slice),t.insert,!!t.structure)}}tt.jsonID("replaceAround",Ue);function fa(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function hw(n,e,t,r){let s=[],o=[],i,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,t),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(i&&i.to==h&&i.mark.eq(f[g])?i.to=p:s.push(i=new Bt(h,p,f[g])));a&&a.to==h?a.to=p:o.push(a=new mn(h,p,r))}}),s.forEach(l=>n.step(l)),o.forEach(l=>n.step(l))}function pw(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(i,a)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof Vo){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,t);for(let u=0;u<l.length;u++){let f=l[u],h;for(let p=0;p<s.length;p++){let m=s[p];m.step==o-1&&f.eq(s[p].style)&&(h=m)}h?(h.to=c,h.step=o):s.push({style:f,from:Math.max(a,e),to:c,step:o})}}}),s.forEach(i=>n.step(new Bt(i.from,i.to,i.style)))}function Mh(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new We(a,u,U.empty));else{r=f;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new Bt(a,u,c.marks[h]));if(s&&c.isText&&t.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(c.text);)m||(m=new U(j.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),i.push(new We(a+h.index,a+h.index+h[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(j.empty,!0);n.replace(a,a,new U(l,0,0))}for(let l=i.length-1;l>=0;l--)n.step(i[l])}function mw(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Hr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),o=n.$from.index(r),i=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(o,i,t))return r;if(r==0||s.type.spec.isolating||!mw(s,o,i))break}return null}function gw(n,e,t){let{$from:r,$to:s,depth:o}=e,i=r.before(o+1),a=s.after(o+1),l=i,c=a,u=j.empty,f=0;for(let m=o,g=!1;m>t;m--)g||r.index(m)>0?(g=!0,u=j.from(r.node(m).copy(u)),f++):l--;let h=j.empty,p=0;for(let m=o,g=!1;m>t;m--)g||s.after(m+1)<s.end(m)?(g=!0,h=j.from(s.node(m).copy(h)),p++):c++;n.step(new Ue(l,c,i,a,new U(u.append(h),f,p),u.size-f,!0))}function Ll(n,e,t=null,r=n){let s=yw(n,e),o=s&&xw(r,e);return o?s.map(uu).concat({type:e,attrs:t}).concat(o.map(uu)):null}function uu(n){return{type:n,attrs:null}}function yw(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let i=o.length?o[0]:e;return t.canReplaceWith(r,s,i)?o:null}function xw(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),i=e.contentMatch.findWrapping(o.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:i}function bw(n,e,t){let r=j.empty;for(let i=t.length-1;i>=0;i--){if(r.size){let a=t[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=j.from(t[i].type.create(t[i].attrs,r))}let s=e.start,o=e.end;n.step(new Ue(s,o,s,o,new U(r,0,0),t.length,!0))}function vw(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(i,a)=>{if(i.isTextblock&&!i.hasMarkup(r,s)&&kw(n.doc,n.mapping.slice(o).map(a),r)){let l=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?l=!1:!h&&p&&(l=!0)}l===!1&&Cw(n,i,a,o),Mh(n,n.mapping.slice(o).map(a,1),r,void 0,l===null);let c=n.mapping.slice(o),u=c.map(a,1),f=c.map(a+i.nodeSize,1);return n.step(new Ue(u,f,u+1,f-1,new U(j.from(r.create(s,null,i.marks)),0,0),1,!0)),l===!0&&ww(n,i,a,o),!1}})}function ww(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let l=n.mapping.slice(r).map(t+1+o+i.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Cw(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=n.mapping.slice(r).map(t+1+o);n.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function kw(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function Sw(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let i=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ue(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new U(j.from(i),0,0),1,!0))}function Sr(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=t-2;c>o;c--,u--){let f=s.node(c),h=s.index(c);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||f;if(!f.canReplace(h+1,f.childCount)||!g.type.validContent(p))return!1}let a=s.indexAfter(o),l=r&&r[0];return s.node(o).canReplaceWith(a,a,l?l.type:s.node(o+1).type)}function Mw(n,e,t=1,r){let s=n.doc.resolve(e),o=j.empty,i=j.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){o=j.from(s.node(a).copy(o));let u=r&&r[c];i=j.from(u?u.type.create(u.attrs,i):s.node(a).copy(i))}n.step(new We(e,e,new U(o.append(i),t,t),!0))}function Mn(n,e){let t=n.resolve(e),r=t.index();return Th(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Th(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Wo(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):t>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&Th(o,i)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function Tw(n,e,t){let r=new We(e-t,e+t,U.empty,!0);n.step(r)}function Dw(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function Dh(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(o==1)u=c.canReplace(l,l,s);else{let f=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function Uo(n,e,t=e,r=U.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return Eh(s,o,r)?new We(e,t,r):new Ew(s,o,r).fit()}function Eh(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Ew{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=j.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=j.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let l=new U(o,i,a);return e>-1?new Ue(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new We(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=vi(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(t==1&&(i?c.matchType(i.type)||(f=c.fillBefore(j.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(t==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=vi(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new U(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=vi(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new U(Jr(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new U(Jr(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:f,type:h}=this.frontier[t];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));f=f.matchFragment(s)}let p=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),y=f.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(f=y,u.push(Oh(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=Qr(this.placed,t,j.from(u)),this.frontier[t].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<p;g++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=m?e==0?U.empty:new U(Jr(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new U(Jr(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!wi(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=wi(e,t,s,r,o);if(i){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=wi(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Qr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Qr(this.placed,this.depth,j.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(j.empty,!0);t.childCount&&(this.placed=Qr(this.placed,this.frontier.length,t))}}function Jr(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Jr(n.firstChild.content,e-1,t)))}function Qr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Qr(n.lastChild.content,e-1,t)))}function vi(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Oh(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Oh(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(j.empty,!0)))),n.copy(r)}function wi(n,e,t,r,s){let o=n.node(e),i=s?n.indexAfter(e):n.index(e);if(i==o.childCount&&!t.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!Ow(t,o.content,i)?a:null}function Ow(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Nw(n){return n.spec.defining||n.spec.definingForContent}function Iw(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(Eh(s,o,r))return n.step(new We(e,t,r));let i=Ih(s,n.doc.resolve(t));i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;i.indexOf(h)>-1?a=h:s.before(h)==p&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(c.push(m),p==r.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let p=c[h],m=Nw(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),m=c[p];if(m)for(let g=0;g<i.length;g++){let y=i[(g+l)%i.length],b=!0;y<0&&(b=!1,y=-y);let v=s.node(y-1),w=s.index(y-1);if(v.canReplaceWith(w,w,m.type,m.marks))return n.replace(s.before(y),b?o.after(y):t,new U(Nh(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let h=i.length-1;h>=0&&(n.replace(e,t,r),!(n.steps.length>f));h--){let p=i[h];p<0||(e=s.before(p),t=o.after(p))}}function Nh(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Nh(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),i=o.fillBefore(n).append(n);n=i.append(o.matchFragment(i).fillBefore(j.empty,!0))}return n}function Aw(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=Dw(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new U(j.from(r),0,0))}function Pw(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=Ih(r,s);for(let i=0;i<o.length;i++){let a=o[i],l=i==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return n.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(e-r.start(i)==r.depth-i&&t>r.end(i)&&s.end(i)-t!=s.depth-i)return n.delete(r.before(i),t);n.delete(e,t)}function Ih(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class Mr extends tt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return ze.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return ze.fromReplace(e,this.pos,this.pos+1,new U(j.from(s),0,t.isLeaf?0:1))}getMap(){return ht.empty}invert(e){return new Mr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Mr(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Mr(t.pos,t.attr,t.value)}}tt.jsonID("attr",Mr);class cs extends tt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return ze.ok(r)}getMap(){return ht.empty}invert(e){return new cs(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new cs(t.attr,t.value)}}tt.jsonID("docAttr",cs);let Ir=class extends Error{};Ir=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ir.prototype=Object.create(Error.prototype);Ir.prototype.constructor=Ir;Ir.prototype.name="TransformError";class Rw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new kr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ir(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=U.empty){let s=Uo(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new U(j.from(r),0,0))}delete(e,t){return this.replace(e,t,U.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Iw(this,e,t,r),this}replaceRangeWith(e,t,r){return Aw(this,e,t,r),this}deleteRange(e,t){return Pw(this,e,t),this}lift(e,t){return gw(this,e,t),this}join(e,t=1){return Tw(this,e,t),this}wrap(e,t){return bw(this,e,t),this}setBlockType(e,t=e,r,s=null){return vw(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return Sw(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Mr(e,t,r)),this}setDocAttribute(e,t){return this.step(new cs(e,t)),this}addNodeMark(e,t){return this.step(new gn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Te)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Nr(e,t)),this}split(e,t=1,r){return Mw(this,e,t,r),this}addMark(e,t,r){return hw(this,e,t,r),this}removeMark(e,t,r){return pw(this,e,t,r),this}clearIncompatible(e,t,r){return Mh(this,e,t,r),this}}const Ci=Object.create(null);class de{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new jw(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=U.empty){let r=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=r,r=r.lastChild;let o=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?U.empty:t),a==0&&hu(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),hu(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new ce(e):gr(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let i=t<0?gr(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):gr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Nt(e.node(0))}static atStart(e){return gr(e,e,0,0,1)||new Nt(e)}static atEnd(e){return gr(e,e,e.content.size,e.childCount,-1)||new Nt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ci[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ci)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ci[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}de.prototype.visible=!0;class jw{constructor(e,t){this.$from=e,this.$to=t}}let du=!1;function fu(n){!du&&!n.parent.inlineContent&&(du=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ce extends de{constructor(e,t=e){fu(e),fu(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return de.near(r);let s=e.resolve(t.map(this.anchor));return new ce(s.parent.inlineContent?s:r,r)}replace(e,t=U.empty){if(super.replace(e,t),t==U.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new qo(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=de.findFrom(t,r,!0)||de.findFrom(t,-r,!0);if(o)t=o.$head;else return de.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(de.findFrom(e,-r,!0)||de.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new ce(e,t)}}de.jsonID("text",ce);class qo{constructor(e,t){this.anchor=e,this.head=t}map(e){return new qo(e.map(this.anchor),e.map(this.head))}resolve(e){return ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class ne extends de{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?de.near(o):new ne(o)}content(){return new U(j.from(this.node),0,0)}eq(e){return e instanceof ne&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Fl(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ne(e.resolve(t.anchor))}static create(e,t){return new ne(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ne.prototype.visible=!1;de.jsonID("node",ne);class Fl{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new qo(r,r):new Fl(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ne.isSelectable(r)?new ne(t):de.near(t)}}class Nt extends de{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=U.empty){if(t==U.empty){e.delete(0,e.doc.content.size);let r=de.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Nt(e)}map(e){return new Nt(e)}eq(e){return e instanceof Nt}getBookmark(){return Lw}}de.jsonID("all",Nt);const Lw={map(){return this},resolve(n){return new Nt(n)}};function gr(n,e,t,r,s,o=!1){if(e.inlineContent)return ce.create(n,t);for(let i=r-(s>0?0:1);s>0?i<e.childCount:i>=0;i+=s){let a=e.child(i);if(a.isAtom){if(!o&&ne.isSelectable(a))return ne.create(n,t-(s<0?a.nodeSize:0))}else{let l=gr(n,a,t+s,s<0?a.childCount:0,s,o);if(l)return l}t+=a.nodeSize*s}return null}function hu(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof We||s instanceof Ue))return;let o=n.mapping.maps[r],i;o.forEach((a,l,c,u)=>{i==null&&(i=u)}),n.setSelection(de.near(n.doc.resolve(i),t))}const pu=1,Ls=2,mu=4;class Fw extends Rw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|pu)&~Ls,this.storedMarks=null,this}get selectionSet(){return(this.updated&pu)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ls,this}ensureMarks(e){return Te.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ls)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ls,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Te.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(t);o=r==t?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),this.selection.empty||this.setSelection(de.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mu,this}get scrolledIntoView(){return(this.updated&mu)>0}}function gu(n,e){return!e||!n?n:n.bind(e)}class Xr{constructor(e,t,r){this.name=e,this.init=gu(t.init,r),this.apply=gu(t.apply,r)}}const $w=[new Xr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Xr("selection",{init(n,e){return n.selection||de.atStart(e.doc)},apply(n){return n.selection}}),new Xr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Xr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class ki{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=$w.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Xr(r.key,r.spec.state,r))})}}class br{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=s?s[i].n:0,c=s?s[i].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<i?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),o=!0}s&&(s[i]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new br(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new Fw(this)}static create(e){let t=new ki(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new br(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new ki(this.schema,e.plugins),r=t.fields,s=new br(t);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new ki(e.schema,e.plugins),o=new br(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=Wn.fromJSON(e.schema,t.doc);else if(i.name=="selection")o.selection=de.fromJSON(o.doc,t.selection);else if(i.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){o[i.name]=c.fromJSON.call(l,e,t[a],o);return}}o[i.name]=i.init(e,o)}}),o}}function Ah(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=Ah(s,e,{})),t[r]=s}return t}class St{constructor(e){this.spec=e,this.props={},e.props&&Ah(e.props,this,this.props),this.key=e.key?e.key.key:Ph("plugin")}getState(e){return e[this.key]}}const Si=Object.create(null);function Ph(n){return n in Si?n+"$"+ ++Si[n]:(Si[n]=0,n+"$")}class Tn{constructor(e="key"){this.key=Ph(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ge=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},us=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let ha=null;const qt=function(n,e,t){let r=ha||(ha=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Bw=function(){ha=null},Qn=function(n,e,t,r){return t&&(yu(n,e,t,r,-1)||yu(n,e,t,r,1))},_w=/^(img|br|input|textarea|hr)$/i;function yu(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:$t(n))){let o=n.parentNode;if(!o||o.nodeType!=1||ks(n)||_w.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ge(n)+(s<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?$t(n):0}else return!1}}function $t(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zw(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=$t(n)}else if(n.parentNode&&!ks(n))e=Ge(n),n=n.parentNode;else return null}}function Hw(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!ks(n))e=Ge(n)+1,n=n.parentNode;else return null}}function Vw(n,e,t){for(let r=e==0,s=e==$t(n);r||s;){if(n==t)return!0;let o=Ge(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==$t(n)}}function ks(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Yo=function(n){return n.focusNode&&Qn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Rn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Ww(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uw(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Vt=typeof navigator<"u"?navigator:null,xu=typeof document<"u"?document:null,Dn=Vt&&Vt.userAgent||"",pa=/Edge\/(\d+)/.exec(Dn),Rh=/MSIE \d/.exec(Dn),ma=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dn),at=!!(Rh||ma||pa),bn=Rh?document.documentMode:ma?+ma[1]:pa?+pa[1]:0,Pt=!at&&/gecko\/(\d+)/i.test(Dn);Pt&&+(/Firefox\/(\d+)/.exec(Dn)||[0,0])[1];const ga=!at&&/Chrome\/(\d+)/.exec(Dn),et=!!ga,jh=ga?+ga[1]:0,rt=!at&&!!Vt&&/Apple Computer/.test(Vt.vendor),Ar=rt&&(/Mobile\/\w+/.test(Dn)||!!Vt&&Vt.maxTouchPoints>2),xt=Ar||(Vt?/Mac/.test(Vt.platform):!1),qw=Vt?/Win/.test(Vt.platform):!1,Tt=/Android \d/.test(Dn),Ss=!!xu&&"webkitFontSmoothing"in xu.documentElement.style,Yw=Ss?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Kw(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ut(n,e){return typeof n=="number"?n:n[e]}function Gw(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function bu(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let i=t||n.dom;i;i=us(i)){if(i.nodeType!=1)continue;let a=i,l=a==o.body,c=l?Kw(o):Gw(a),u=0,f=0;if(e.top<c.top+Ut(r,"top")?f=-(c.top-e.top+Ut(s,"top")):e.bottom>c.bottom-Ut(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Ut(s,"top")-c.top:e.bottom-c.bottom+Ut(s,"bottom")),e.left<c.left+Ut(r,"left")?u=-(c.left-e.left+Ut(s,"left")):e.right>c.right-Ut(r,"right")&&(u=e.right-c.right+Ut(s,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function Jw(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,i=t+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=n.root.elementFromPoint(o,i);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:Lh(n.dom)}}function Lh(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=us(r));return e}function Qw({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Fh(t,r==0?0:r-e)}function Fh(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let hr=null;function Xw(n){if(n.setActive)return n.setActive();if(hr)return n.focus(hr);let e=Lh(n);n.focus(hr==null?{get preventScroll(){return hr={preventScroll:!0},!0}}:void 0),hr||(hr=!1,Fh(e,0))}function $h(n,e){let t,r=2e8,s,o=0,i=e.top,a=e.top,l,c;for(let u=n.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=qt(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=i&&m.bottom>=a){i=Math.max(m.bottom,i),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){t=u,r=g,s=g&&t.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!t&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!t&&l&&(t=l,s=c,r=0),t&&t.nodeType==3?Zw(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:$h(t,s)}function Zw(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=an(r,1);if(o.top!=o.bottom&&$l(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function $l(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function eC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function tC(n,e,t){let{node:r,offset:s}=$h(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&t.left>(i.left+i.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function nC(n,e,t,r){let s=-1;for(let o=e,i=!1;o!=n.dom;){let a=n.docView.nearestDesc(o,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?s=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}o=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function Bh(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let i=n.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if($l(e,c))return Bh(i,e,c)}}if((o=(o+1)%r)==s)break}return n}function rC(n,e){let t=n.dom.ownerDocument,r,s=0,o=Uw(t,e.left,e.top);o&&({node:r,offset:s}=o);let i=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!i||!n.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=n.dom.getBoundingClientRect();if(!$l(e,c)||(i=Bh(n.dom,e,c),!i))return null}if(rt)for(let c=i;r&&c;c=us(c))c.draggable&&(r=void 0);if(i=eC(i,e),r){if(Pt&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&s++}let c;Ss&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=nC(n,r,s,e))}a==null&&(a=tC(n,i,e));let l=n.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function vu(n){return n.top<n.bottom||n.left<n.right}function an(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(vu(r))return r}return Array.prototype.find.call(t,vu)||n.getBoundingClientRect()}const sC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _h(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),i=Ss||Pt;if(r.nodeType==3)if(i&&(sC.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let l=an(qt(r,s,s),t);if(Pt&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=an(qt(r,s-1,s-1),-1);if(c.top==l.top){let u=an(qt(r,s,s+1),-1);if(u.top!=l.top)return Gr(u,u.left<c.left)}}return l}else{let l=s,c=s,u=t<0?1:-1;return t<0&&!s?(c++,u=-1):t>=0&&s==r.nodeValue.length?(l--,u=1):t<0?l--:c++,Gr(an(qt(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==$t(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Mi(l.getBoundingClientRect(),!1)}if(o==null&&s<$t(r)){let l=r.childNodes[s];if(l.nodeType==1)return Mi(l.getBoundingClientRect(),!0)}return Mi(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==$t(r))){let l=r.childNodes[s-1],c=l.nodeType==3?qt(l,$t(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Gr(an(c,1),!1)}if(o==null&&s<$t(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?qt(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Gr(an(c,-1),!0)}return Gr(an(r.nodeType==3?qt(r):r,-t),t>=0)}function Gr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Mi(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function zh(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function oC(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return zh(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=_h(n,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=qt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const iC=/[\u0590-\u08ac]/;function aC(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=n.domSelection();return!iC.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?o:i:zh(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let p=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:m,focusOffset:g}=n.domSelectionRange(),y=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y})}let wu=null,Cu=null,ku=!1;function lC(n,e,t){return wu==e&&Cu==t?ku:(wu=e,Cu=t,ku=t=="up"||t=="down"?oC(n,e,t):aC(n,e,t))}const wt=0,Su=1,Fn=2,Wt=3;class Ms{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=wt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Ge(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!t||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>e||i instanceof Vh){s=e-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Hh&&o.side>=0;r--);if(t<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&t&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Ge(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Ge(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(s==-1&&e<=c){let u=i+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=i;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=Ge(h.dom)+1;break}e-=h.size}s==-1&&(s=0)}if(s>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Ge(f.dom);break}t+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),i=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(o>p&&i<g)return m.setSelection(e-p-m.border,t-p-m.border,r,s);p=g}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.getSelection(),u=!1;if((Pt||rt)&&e==t){let{node:h,offset:p}=a;if(h.nodeType==3){if(u=!!(p&&h.nodeValue[p-1]==`
`),u&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:Ge(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=h.childNodes[p-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Pt&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||u&&rt)&&Qn(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Qn(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>t){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?e<=i&&t>=r:e<i&&t>r){let a=r+o.border,l=i-o.border;if(e>=a&&t<=l){this.dirty=e==r||t==i?Fn:Su,e==a&&t==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Wt:o.markDirty(e-a,t-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Fn:Wt}r=i}this.dirty=Fn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Fn:Su;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Hh extends Ms{constructor(e,t,r,s){let o,i=t.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==wt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cC extends Ms{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xn extends Ms{constructor(e,t,r,s){super(e,[],r,s),this.mark=t}static create(e,t,r,s){let o=s.nodeViews[t.type.name],i=o&&o(t,s,r);return(!i||!i.dom)&&(i=or.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Xn(e,t,i.dom,i.contentDOM||i.dom)}parseRule(){return this.dirty&Wt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Wt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=wt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wt}}slice(e,t,r){let s=Xn.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;t<i&&(o=ba(o,t,i,r)),e>0&&(o=ba(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}}class vn extends Ms{constructor(e,t,r,s,o,i,a,l,c){super(e,[],o,i),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,t,r,s,o,i){let a=o.nodeViews[t.type.name],l,c=a&&a(t,o,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=or.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=qh(u,r,t),c?l=new uC(e,t,r,s,u,f||null,h,c,o,i+1):t.isText?new Ko(e,t,r,s,u,h,o):new vn(e,t,r,s,u,f||null,h,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>j.empty)}return e}matchesNode(e,t,r){return this.dirty==wt&&e.eq(this.node)&&xa(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new fC(this,i&&i.node,e);mC(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Te.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,f,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,f,h)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,p,e)||l.updateNextNode(c,u,f,e,h,s)||l.addNode(c,u,f,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fn)&&(i&&this.protectLocalComposition(e,i),Wh(this.contentDOM,this.children,e),Ar&&gC(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof ce)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=yC(this.node.content,i,r-t,s-t);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new cC(this,o,t,s);e.input.compositionNodes.push(i),this.children=ba(this.children,r,r+s.length,e,i)}update(e,t,r,s){return this.dirty==Wt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=wt}updateOuterDeco(e){if(xa(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Uh(this.dom,this.nodeDOM,ya(this.outerDeco,this.node,t),ya(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Mu(n,e,t,r,s){qh(r,e,n);let o=new vn(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Ko extends vn{constructor(e,t,r,s,o,i,a){super(e,t,r,s,o,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Wt||this.dirty!=wt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=wt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=wt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new Ko(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Wt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vh extends Ms{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==wt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uC extends vn{constructor(e,t,r,s,o,i,a,l,c,u){super(e,t,r,s,o,i,a,c,u),this.spec=l}update(e,t,r,s){if(this.dirty==Wt)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Wh(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let i=e[o],a=i.dom;if(a.parentNode==n){for(;a!=r;)r=Tu(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(a,r);if(i instanceof Xn){let l=r?r.previousSibling:n.lastChild;Wh(i.contentDOM,i.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=Tu(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const ss=function(n){n&&(this.nodeName=n)};ss.prototype=Object.create(null);const $n=[new ss];function ya(n,e,t){if(n.length==0)return $n;let r=t?$n[0]:new ss,s=[r];for(let o=0;o<n.length;o++){let i=n[o].type.attrs;if(i){i.nodeName&&s.push(r=new ss(i.nodeName));for(let a in i){let l=i[a];l!=null&&(t&&s.length==1&&s.push(r=new ss(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function Uh(n,e,t,r){if(t==$n&&r==$n)return e;let s=e;for(let o=0;o<r.length;o++){let i=r[o],a=t[o];if(o){let l;a&&a.nodeName==i.nodeName&&s!=n&&(l=s.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=$n[0]),s=l}dC(s,a||$n[0],i)}return s}function dC(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function qh(n,e,t){return Uh(n,n,$n,ya(e,t,n.nodeType!=1))}function xa(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Tu(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fC{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=wt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Xn.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let i=this.top.children[s];return i.dirty==Wt&&i.dom==i.contentDOM&&(i.dirty=Fn),i.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof vn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Wt&&xa(t,l.outerDeco));if(!h&&l.update(e,t,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,e,t,r,s,i)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Fn,f.updateChildren(s,i+1),f.dirty=wt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let a=vn.create(this.top,t,r,s,o,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,s,o){let i=vn.create(this.top,e,t,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new Hh(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Ko)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rt||et)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new Vh(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hC(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof Xn)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function pC(n,e){return n.type.side-e.type.side}function mC(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,s,e.forChild(o,u),c),o+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,f;for(;i<s.length&&s[i].to==o;){let y=s[i++];y.widget&&(u?(f||(f=[u])).push(y):u=y)}if(u)if(f){f.sort(pC);for(let y=0;y<f.length;y++)t(f[y],c,!!l)}else t(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<n.childCount)p=c,h=n.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=o&&a.splice(y--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let m=o+h.nodeSize;if(h.isText){let y=m;i<s.length&&s[i].from<y&&(y=s[i].from);for(let b=0;b<a.length;b++)a[b].to<y&&(y=a[b].to);y<m&&(l=h.cut(y-o),h=h.cut(0,y-o),m=y,p=-1)}else for(;i<s.length&&s[i].to<m;)i++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,g,e.forChild(o,h),p),o=m}}function gC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function yC(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let i=n.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let l=i.text;for(;s<n.childCount;){let c=n.child(s++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=t){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function ba(n,e,t,r,s){let o=[];for(let i=0,a=0;i<n.length;i++){let l=n[i],c=a,u=a+=l.size;c>=t||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),s&&(o.push(s),s=void 0),u>t&&o.push(l.slice(t-c,l.size,r)))}return o}function Bl(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,i=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(Yo(t)){for(l=a;s&&!s.node;)s=s.parent;let u=s.node;if(s&&u.isAtom&&ne.isSelectable(u)&&s.parent&&!(u.isInline&&Vw(t.focusNode,t.focusOffset,s.dom))){let f=s.posBefore;c=new ne(i==f?a:r.resolve(f))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!o?1:-1;c=_l(n,l,a,u)}return c}function Yh(n){return n.editable?n.hasFocus():Gh(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Gt(n,e=!1){let t=n.state.selection;if(Kh(n,t),!!Yh(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&et){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Qn(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bC(n);else{let{anchor:r,head:s}=t,o,i;Du&&!(t instanceof ce)&&(t.$from.parent.inlineContent||(o=Eu(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(i=Eu(n,t.to))),n.docView.setSelection(r,s,n.root,e),Du&&(o&&Ou(o),i&&Ou(i)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Du=rt||et&&jh<63;function Eu(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(rt&&s&&s.contentEditable=="false")return Ti(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return Ti(s);if(o)return Ti(o)}}function Ti(n){return n.contentEditable="true",rt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Ou(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function xC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Yh(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bC(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setEnd(r.parentNode,Ge(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&at&&bn<=11&&(r.disabled=!0,r.disabled=!1)}function Kh(n,e){if(e instanceof ne){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Nu(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Nu(n)}function Nu(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function _l(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||ce.between(e,t,r)}function Iu(n){return n.editable&&!n.hasFocus()?!1:Gh(n)}function Gh(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Qn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function va(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&de.findFrom(o,e)}function cn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Au(n,e,t){let r=n.state.selection;if(r instanceof ce)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return cn(n,new ce(r.$anchor,i))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=va(n.state,e);return s&&s instanceof ne?cn(n,s):!1}else if(!(xt&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=n.docView.descAt(a))&&!i.contentDOM?ne.isSelectable(o)?cn(n,new ne(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):Ss?cn(n,new ce(n.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ne&&r.node.isInline)return cn(n,new ce(e>0?r.$to:r.$from));{let s=va(n.state,e);return s?cn(n,s):!1}}}function go(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function is(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function pr(n,e){return e<0?wC(n):CC(n)}function wC(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,i=!1;for(Pt&&t.nodeType==1&&r<go(t)&&is(t.childNodes[r],-1)&&(i=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(is(a,-1))s=t,o=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(Jh(t))break;{let a=t.previousSibling;for(;a&&is(a,-1);)s=t.parentNode,o=Ge(a),a=a.previousSibling;if(a)t=a,r=go(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}i?wa(n,t,r):s&&wa(n,s,o)}function CC(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=go(t),o,i;for(;;)if(r<s){if(t.nodeType!=1)break;let a=t.childNodes[r];if(is(a,1))o=t,i=++r;else break}else{if(Jh(t))break;{let a=t.nextSibling;for(;a&&is(a,1);)o=a.parentNode,i=Ge(a)+1,a=a.nextSibling;if(a)t=a,r=0,s=go(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&wa(n,o,i)}function Jh(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function kC(n,e){for(;n&&e==n.childNodes.length&&!ks(n);)e=Ge(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function SC(n,e){for(;n&&!e&&!ks(n);)e=Ge(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function wa(n,e,t){if(e.nodeType!=3){let o,i;(i=kC(e,t))?(e=i,t=0):(o=SC(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(Yo(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Gt(n)},50)}function Pu(n,e){let t=n.state.doc.resolve(e);if(!(et||qw)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ru(n,e,t){let r=n.state.selection;if(r instanceof ce&&!r.empty||t.indexOf("s")>-1||xt&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let i=va(n.state,e);if(i&&i instanceof ne)return cn(n,i)}if(!s.parent.inlineContent){let i=e<0?s:o,a=r instanceof Nt?de.near(i,e):de.findFrom(i,e);return a?cn(n,a):!1}return!1}function ju(n,e){if(!(n.state.selection instanceof ce))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let i=n.state.tr;return e<0?i.delete(t.pos-o.nodeSize,t.pos):i.delete(t.pos,t.pos+o.nodeSize),n.dispatch(i),!0}return!1}function Lu(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function MC(n){if(!rt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Lu(n,r,"true"),setTimeout(()=>Lu(n,r,"false"),20)}return!1}function TC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function DC(n,e){let t=e.keyCode,r=TC(e);if(t==8||xt&&t==72&&r=="c")return ju(n,-1)||pr(n,-1);if(t==46&&!e.shiftKey||xt&&t==68&&r=="c")return ju(n,1)||pr(n,1);if(t==13||t==27)return!0;if(t==37||xt&&t==66&&r=="c"){let s=t==37?Pu(n,n.state.selection.from)=="ltr"?-1:1:-1;return Au(n,s,r)||pr(n,s)}else if(t==39||xt&&t==70&&r=="c"){let s=t==39?Pu(n,n.state.selection.from)=="ltr"?1:-1:1;return Au(n,s,r)||pr(n,s)}else{if(t==38||xt&&t==80&&r=="c")return Ru(n,-1,r)||pr(n,-1);if(t==40||xt&&t==78&&r=="c")return MC(n)||Ru(n,1,r)||pr(n,1);if(r==(xt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Qh(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=n.someProp("clipboardSerializer")||or.fromSchema(n.state.schema),a=rp(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=np[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${o}${f?` -${f}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function Xh(n,e,t,r,s){let o=s.parent.type.spec.code,i,a;if(!t&&!e)return null;let l=e&&(r||o||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,o||r,n)}),o)return e?new U(j.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):U.empty;let f=n.someProp("clipboardTextParser",h=>h(e,s,r,n));if(f)a=f;else{let h=s.marks(),{schema:p}=n.state,m=or.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=i.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(p.text(g,h)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),i=NC(t),Ss&&IC(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||xn.fromSchema(n.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!EC.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=AC(Fu(a,+u[1],+u[2]),u[4]);else if(a=U.maxOpen(OC(a.content,s),!0),a.openStart||a.openEnd){let f=0,h=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=Fu(a,f,h)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const EC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function OC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,i=[];if(n.forEach(a=>{if(!i)return;let l=s.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&o.length&&ep(l,o,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=tp(i[i.length-1],o.length));let u=Zh(a,l);i.push(u),s=s.matchType(u.type),o=l}}),i)return j.from(i)}return n}function Zh(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,j.from(n));return n}function ep(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=ep(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(j.from(Zh(t,n,s+1))))}}function tp(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,tp(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(j.empty,!0);return n.copy(t.append(r))}function Ca(n,e,t,r,s,o){let i=e<0?n.firstChild:n.lastChild,a=i.content;return n.childCount>1&&(o=0),s<r-1&&(a=Ca(a,e,t,r,s+1,o)),s>=t&&(a=e<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(j.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,i.copy(a))}function Fu(n,e,t){return e<n.openStart&&(n=new U(Ca(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new U(Ca(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const np={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $u=null;function rp(){return $u||($u=document.implementation.createHTMLDocument("title"))}function NC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=rp().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&np[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=n,s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function IC(n){let e=n.querySelectorAll(et?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function AC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:i}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=j.from(l.create(r[a+1],s)),o++,i++}return new U(s,o,i)}const st={},ot={},PC={touchstart:!0,touchmove:!0};class RC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function jC(n){for(let e in st){let t=st[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{FC(n,r)&&!zl(n,r)&&(n.editable||!(r.type in ot))&&t(n,r)},PC[e]?{passive:!0}:void 0)}rt&&n.dom.addEventListener("input",()=>null),ka(n)}function yn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function LC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ka(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>zl(n,r))})}function zl(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function FC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function $C(n,e){!zl(n,e)&&st[e.type]&&(n.editable||!(e.type in ot))&&st[e.type](n,e)}ot.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!op(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Tt&&et&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Ar&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Rn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||DC(n,t)?t.preventDefault():yn(n,"key")};ot.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};ot.keypress=(n,e)=>{let t=e;if(op(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||xt&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function Go(n){return{left:n.clientX,top:n.clientY}}function BC(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Hl(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(n.someProp(e,a=>i>o.depth?a(n,t,o.nodeAfter,o.before(i),s,!0):a(n,t,o.node(i),o.before(i),s,!1)))return!0;return!1}function Tr(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function _C(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ne.isSelectable(r)?(Tr(n,new ne(t),"pointer"),!0):!1}function zC(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof ne&&(r=t.node);let o=n.state.doc.resolve(e);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(ne.isSelectable(a)){r&&t.$from.depth>0&&i>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(i);break}}return s!=null?(Tr(n,ne.create(n.state.doc,s),"pointer"),!0):!1}function HC(n,e,t,r,s){return Hl(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?zC(n,t):_C(n,t))}function VC(n,e,t,r){return Hl(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function WC(n,e,t,r){return Hl(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||UC(n,t,r)}function UC(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Tr(n,ce.create(r,0,r.content.size),"pointer"),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)Tr(n,ce.create(r,a+1,a+1+i.content.size),"pointer");else if(ne.isSelectable(i))Tr(n,ne.create(r,a),"pointer");else continue;return!0}}function Vl(n){return yo(n)}const sp=xt?"metaKey":"ctrlKey";st.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Vl(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&BC(t,n.input.lastClick)&&!t[sp]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o};let i=n.posAtCoords(Go(t));i&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new qC(n,i,t,!!r)):(o=="doubleClick"?VC:WC)(n,i.pos,i.inside,t)?t.preventDefault():yn(n,"pointer"))};class qC{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[sp],this.allowDefault=r.shiftKey;let o,i;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let u=e.state.doc.resolve(t.pos);o=u.parent,i=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof ne&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Pt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Go(e))),this.updateAllowDefault(e),this.allowDefault||!t?yn(this.view,"pointer"):HC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rt&&this.mightDrag&&!this.mightDrag.node.isAtom||et&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Tr(this.view,de.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):yn(this.view,"pointer")}move(e){this.updateAllowDefault(e),yn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}st.touchstart=n=>{n.input.lastTouch=Date.now(),Vl(n),yn(n,"pointer")};st.touchmove=n=>{n.input.lastTouch=Date.now(),yn(n,"pointer")};st.contextmenu=n=>Vl(n);function op(n,e){return n.composing?!0:rt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const YC=Tt?5e3:-1;ot.compositionstart=ot.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),yo(n,!0),n.markCursor=null;else if(yo(n),Pt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){n.domSelection().collapse(i,i.nodeValue.length);break}else s=i,o=-1}}n.input.composing=!0}ip(n,YC)};ot.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ip(n,20))};function ip(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>yo(n),e))}function ap(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=GC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function KC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=zw(e.focusNode,e.focusOffset),r=Hw(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let i=t.pmViewDesc;if(!(!i||!i.isText(t.nodeValue)))return r}}return t||r}function GC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function yo(n,e=!1){if(!(Tt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ap(n),e||n.docView&&n.docView.dirty){let t=Bl(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function JC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ds=at&&bn<15||Ar&&Yw<604;st.copy=ot.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=ds?null:t.clipboardData,i=r.content(),{dom:a,text:l}=Qh(n,i);o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):JC(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function XC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?fs(n,r.value,null,s,e):fs(n,r.textContent,r.innerHTML,s,e)},50)}function fs(n,e,t,r,s){let o=Xh(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,o||U.empty)))return!0;if(!o)return!1;let i=QC(o),a=i?n.state.tr.replaceSelectionWith(i,r):n.state.tr.replaceSelection(o);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lp(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}ot.paste=(n,e)=>{let t=e;if(n.composing&&!Tt)return;let r=ds?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&fs(n,lp(r),r.getData("text/html"),s,t)?t.preventDefault():XC(n,t)};class cp{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const up=xt?"altKey":"ctrlKey";st.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(Go(t)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof ne?s.to-1:s.to))){if(r&&r.mightDrag)i=ne.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(i=ne.create(n.state.doc,f.posBefore))}}let a=(i||n.state.selection).content(),{dom:l,text:c,slice:u}=Qh(n,a);(!t.dataTransfer.files.length||!et||jh>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ds?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",ds||t.dataTransfer.setData("text/plain",c),n.dragging=new cp(u,!t[up],i)};st.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};ot.dragover=ot.dragenter=(n,e)=>e.preventDefault();ot.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Go(t));if(!s)return;let o=n.state.doc.resolve(s.pos),i=r&&r.slice;i?n.someProp("transformPasted",m=>{i=m(i,n)}):i=Xh(n,lp(t.dataTransfer),ds?null:t.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!t[up]);if(n.someProp("handleDrop",m=>m(n,t,i||U.empty,a))){t.preventDefault();return}if(!i)return;t.preventDefault();let l=i?Dh(n.state.doc,o.pos,i):o.pos;l==null&&(l=o.pos);let c=n.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(h))return;let p=c.doc.resolve(u);if(f&&ne.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new ne(p));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,y,b,v)=>m=v),c.setSelection(_l(n,p,c.doc.resolve(m)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};st.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Gt(n)},20))};st.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};st.beforeinput=(n,e)=>{if(et&&Tt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Rn(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in ot)st[n]=ot[n];function hs(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class xo{constructor(e,t){this.toDOM=e,this.spec=t||Un,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:i}=e.mapResult(t.from+s,this.side<0?-1:1);return i?null:new vt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof xo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&hs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class wn{constructor(e,t){this.attrs=e,this.spec=t||Un}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,i=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new vt(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof wn&&hs(this.attrs,e.attrs)&&hs(this.spec,e.spec)}static is(e){return e.type instanceof wn}destroy(){}}class Wl{constructor(e,t){this.attrs=e,this.spec=t||Un}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let i=e.mapResult(t.to+s,-1);return i.deleted||i.pos<=o.pos?null:new vt(o.pos-r,i.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof Wl&&hs(this.attrs,e.attrs)&&hs(this.spec,e.spec)}destroy(){}}class vt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new vt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new vt(e,e,new xo(t,r))}static inline(e,t,r,s){return new vt(e,t,new wn(r,s))}static node(e,t,r,s){return new vt(e,t,new Wl(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof wn}get widget(){return this.type instanceof xo}}const yr=[],Un={};class Ve{constructor(e,t){this.local=e.length?e:yr,this.children=t.length?t:yr}static create(e,t){return t.length?bo(t,e,0,Un):Xe}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,t-a,r,s+a,o)}}map(e,t,r){return this==Xe||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Un)}mapInner(e,t,r,s,o){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(t,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?ZC(this.children,i||[],e,t,r,s,o):i?new Ve(i.sort(qn),yr):Xe}add(e,t){return t.length?this==Xe?Ve.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=fp(t,a,c)){for(s||(s=this.children.slice());o<s.length&&s[o]<l;)o+=3;s[o]==l?s[o+2]=s[o+2].addInner(a,u,c+1):s.splice(o,0,l,l+a.nodeSize,bo(u,a,c+1,Un)),o+=3}});let i=dp(o?hp(t):t,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new Ve(i.length?this.local.concat(i).sort(qn):this.local,s||this.children)}remove(e){return e.length==0||this==Xe?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+t,l=r[o+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,a+1);c!=Xe?r[o+2]=c:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<e.length;o++)if(i=e[o])for(let a=0;a<s.length;a++)s[a].eq(i,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Ve(s,r):Xe}forChild(e,t){if(this==Xe)return this;if(t.isLeaf)return Ve.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,i=o+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>o&&l.type instanceof wn){let c=Math.max(o,l.from)-o,u=Math.min(i,l.to)-o;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new Ve(s.sort(qn),yr);return r?new pn([a,r]):a}return r||Xe}eq(e){if(this==e)return!0;if(!(e instanceof Ve)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ul(this.localsInner(e))}localsInner(e){if(this==Xe)return yr;if(e.inlineContent||!this.local.some(wn.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof wn||t.push(this.local[r]);return t}}Ve.empty=new Ve([],[]);Ve.removeOverlap=Ul;const Xe=Ve.empty;class pn{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Un));return pn.from(r)}forChild(e,t){if(t.isLeaf)return Ve.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Xe&&(o instanceof pn?r=r.concat(o.members):r.push(o))}return pn.from(r)}eq(e){if(!(e instanceof pn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let i=0;i<o.length;i++)t.push(o[i])}}return t?Ul(r?t:t.sort(qn)):yr}static from(e){switch(e.length){case 0:return Xe;case 1:return e[0];default:return new pn(e.every(t=>t instanceof Ve)?e:e.reduce((t,r)=>t.concat(r instanceof Ve?r:r.members),[]))}}}function ZC(n,e,t,r,s,o,i){let a=n.slice();for(let c=0,u=o;c<t.maps.length;c++){let f=0;t.maps[c].forEach((h,p,m,g)=>{let y=g-m-(p-h);for(let b=0;b<a.length;b+=3){let v=a[b+1];if(v<0||h>v+u-f)continue;let w=a[b]+u-f;p>=w?a[b+1]=h<=w?-2:-1:h>=u&&y&&(a[b]+=y,a[b+1]+=y)}f+=y}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+o),f=u-s;if(f<0||f>=r.content.size){l=!0;continue}let h=t.map(n[c+1]+o,-1),p=h-s,{index:m,offset:g}=r.content.findIndex(f),y=r.maybeChild(m);if(y&&g==f&&g+y.nodeSize==p){let b=a[c+2].mapInner(t,y,u+1,n[c]+o+1,i);b!=Xe?(a[c]=f,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ek(a,n,e,t,s,o,i),u=bo(c,r,0,i);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let p=u.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Ve(e.sort(qn),a)}function dp(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new vt(s.from+e,s.to+e,s.type))}return t}function ek(n,e,t,r,s,o,i){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,s,c);f?t.push(f):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+o+1);return t}function fp(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,i;o<n.length;o++)(i=n[o])&&i.from>t&&i.to<r&&((s||(s=[])).push(i),n[o]=null);return s}function hp(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function bo(n,e,t,r){let s=[],o=!1;e.forEach((a,l)=>{let c=fp(n,a,l+t);if(c){o=!0;let u=bo(c,a,t+l+1,r);u!=Xe&&s.push(l,l+a.nodeSize,u)}});let i=dp(o?hp(n):n,-t).sort(qn);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new Ve(i,s):Xe}function qn(n,e){return n.from-e.from||n.to-e.to}function Ul(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),Bu(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Bu(e,s,r.copy(o.from,r.to)));break}}}return e}function Bu(n,e,t){for(;e<n.length&&qn(t,n[e])>0;)e++;n.splice(e,0,t)}function Di(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Xe&&e.push(r)}),n.cursorWrapper&&e.push(Ve.create(n.state.doc,[n.cursorWrapper.deco])),pn.from(e)}const tk={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nk=at&&bn<=11;class rk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class sk{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new rk,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);at&&bn<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),nk&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tk)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Iu(this.view)){if(this.suppressingSelectionUpdates)return Gt(this.view);if(at&&bn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=us(o))t.add(o);for(let o=e.anchorNode;o;o=us(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Iu(e)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(Pt&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||ak(e,f)!=p)&&h.remove()}}}let c=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Yo(r)&&(c=Bl(e))&&c.eq(de.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gt(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,i),ok(e)),this.handleDOMChange(o,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(at&&bn<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let i=s&&s.parentNode==e.target?Ge(s)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=o&&o.parentNode==e.target?Ge(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let _u=new WeakMap,zu=!1;function ok(n){if(!_u.has(n)&&(_u.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Pt,zu)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),zu=!0}}function Hu(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,i=n.domAtPos(n.state.selection.anchor);return Qn(i.node,i.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function ik(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Hu(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Hu(n,t):null}function ak(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function lk(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Yo(l)||c.push({node:l.focusNode,offset:l.focusOffset})),et&&n.input.lastKeyCode===8)for(let y=o;y>s;y--){let b=r.childNodes[y-1],v=b.pmViewDesc;if(b.nodeName=="BR"&&!v){o=y;break}if(!v||v.size)break}let f=n.state.doc,h=n.someProp("domParser")||xn.fromSchema(n.state.schema),p=f.resolve(i),m=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:ck,context:p});if(c&&c[0].pos!=null){let y=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=y),m={anchor:y+i,head:b+i}}return{doc:g,sel:m,from:i,to:a}}function ck(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(rt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||rt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const uk=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function dk(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let N=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,F=Bl(n,N);if(F&&!n.state.selection.eq(F)){if(et&&Tt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",V=>V(n,Rn(13,"Enter"))))return;let z=n.state.tr.setSelection(F);N=="pointer"?z.setMeta("pointer",!0):N=="key"&&z.scrollIntoView(),o&&z.setMeta("composition",o),n.dispatch(z)}return}let i=n.state.doc.resolve(e),a=i.sharedDepth(t);e=i.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=lk(n,e,t),u=n.state.doc,f=u.slice(c.from,c.to),h,p;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,p="end"):(h=n.state.selection.from,p="start"),n.input.lastKeyCode=null;let m=pk(f.content,c.doc.content,c.from,h,p);if((Ar&&n.input.lastIOSEnter>Date.now()-225||Tt)&&s.some(N=>N.nodeType==1&&!uk.test(N.nodeName))&&(!m||m.endA>=m.endB)&&n.someProp("handleKeyDown",N=>N(n,Rn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof ce&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=Vu(n,n.state.doc,c.sel);if(N&&!N.eq(n.state.selection)){let F=n.state.tr.setSelection(N);o&&F.setMeta("composition",o),n.dispatch(F)}}return}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&m.start==m.endB&&n.state.selection instanceof ce&&(m.start>n.state.selection.from&&m.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?m.start=n.state.selection.from:m.endA<n.state.selection.to&&m.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(m.endB+=n.state.selection.to-m.endA,m.endA=n.state.selection.to)),at&&bn<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),y=c.doc.resolveNoCache(m.endB-c.from),b=u.resolve(m.start),v=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=m.endA,w;if((Ar&&n.input.lastIOSEnter>Date.now()-225&&(!v||s.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&!g.sameParent(y)&&(w=de.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head==y.pos)&&n.someProp("handleKeyDown",N=>N(n,Rn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>m.start&&hk(u,m.start,m.endA,g,y)&&n.someProp("handleKeyDown",N=>N(n,Rn(8,"Backspace")))){Tt&&et&&n.domObserver.suppressSelectionUpdates();return}et&&Tt&&m.endB==m.start&&(n.input.lastAndroidDelete=Date.now()),Tt&&!v&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,y=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(N){return N(n,Rn(13,"Enter"))})},20));let k=m.start,M=m.endA,C,T,E;if(v){if(g.pos==y.pos)at&&bn<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gt(n),20)),C=n.state.tr.delete(k,M),T=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(E=fk(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start()))))C=n.state.tr,E.type=="add"?C.addMark(k,M,E.mark):C.removeMark(k,M,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,y.parentOffset);if(n.someProp("handleTextInput",F=>F(n,k,M,N)))return;C=n.state.tr.insertText(N,k,M)}}if(C||(C=n.state.tr.replace(k,M,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let N=Vu(n,C.doc,c.sel);N&&!(et&&Tt&&n.composing&&N.empty&&(m.start!=m.endB||n.input.lastAndroidDelete<Date.now()-100)&&(N.head==k||N.head==C.mapping.map(M)-1)||at&&N.empty&&N.head==k)&&C.setSelection(N)}T&&C.ensureMarks(T),o&&C.setMeta("composition",o),n.dispatch(C.scrollIntoView())}function Vu(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:_l(n,e.resolve(t.anchor),e.resolve(t.head))}function fk(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,i,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<t.length;u++)o=t[u].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(j.from(c).eq(n))return{mark:a,type:i}}function hk(n,e,t,r,s){if(t-e<=s.pos-r.pos||Ei(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&t==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=n.resolve(Ei(o,!0,!0));return!i.parent.isTextblock||i.pos>t||Ei(i,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Ei(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function pk(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:i,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let l=Math.max(0,o-Math.min(i,a));r-=i+l-o}if(i<o&&n.size<e.size){let l=r<=o&&r>=i?o-r:0;o-=l,o&&o<e.size&&Wu(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-i),i=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<n.size&&Wu(n.textBetween(o-1,o+1))&&(o+=l?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function Wu(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class mk{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new RC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Gu),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Yu(this),qu(this),this.nodeViews=Ku(this),this.docView=Mu(this.state.doc,Uu(this),Di(this),this.dom,this),this.domObserver=new sk(this,(r,s,o,i)=>dk(this,r,s,o,i)),this.domObserver.start(),jC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ka(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Gu),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(ap(this),i=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let p=Ku(this);yk(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ka(this),this.editable=Yu(this),qu(this);let l=Di(this),c=Uu(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(s.selection))&&(i=!0);let h=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&Jw(this);if(i){this.domObserver.stop();let p=f&&(at||et)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&gk(s.selection,e.selection);if(f){let m=et?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KC(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Mu(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vC(this))?Gt(this,p):(Kh(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&Qw(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ne){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&bu(this,t.getBoundingClientRect(),e)}else bu(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new cp(e.slice,e.move,s<0?void 0:ne.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(s=t?t(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(at){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xw(this.dom),Gt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rC(this,e)}coordsAtPos(e,t=1){return _h(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return lC(this,t||this.state,e)}pasteHTML(e,t){return fs(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return fs(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(LC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Di(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Bw())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return $C(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return rt&&this.root.nodeType===11&&Ww(this.dom.ownerDocument)==this.dom&&ik(this,e)||e}domSelection(){return this.root.getSelection()}}function Uu(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[vt.node(0,n.state.doc.content.size,e)]}function qu(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:vt.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Yu(n){return!n.someProp("editable",e=>e(n.state)===!1)}function gk(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Ku(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function yk(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Gu(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Sn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xk=typeof navigator<"u"&&/Mac/.test(navigator.platform),bk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)Sn[48+Je]=Sn[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)Sn[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)Sn[Je]=String.fromCharCode(Je+32),vo[Je]=String.fromCharCode(Je);for(var Oi in Sn)vo.hasOwnProperty(Oi)||(vo[Oi]=Sn[Oi]);function vk(n){var e=xk&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||bk&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?vo:Sn)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const wk=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Ck(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))wk?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),i&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function kk(n){let e=Object.create(null);for(let t in n)e[Ck(t)]=n[t];return e}function Ni(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Sk(n){return new St({props:{handleKeyDown:pp(n)}})}function pp(n){let e=kk(n);return function(t,r){let s=vk(r),o,i=e[Ni(s,r)];if(i&&i(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Ni(s,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(o=Sn[r.keyCode])&&o!=s){let a=e[Ni(o,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const Mk=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function mp(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Tk=(n,e,t)=>{let r=mp(n,t);if(!r)return!1;let s=ql(r);if(!s){let i=r.blockRange(),a=i&&Hr(i);return a==null?!1:(e&&e(n.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(bp(n,s,e,-1))return!0;if(r.parent.content.size==0&&(Pr(o,"end")||ne.isSelectable(o)))for(let i=r.depth;;i--){let a=Uo(n.doc,r.before(i),r.after(i),U.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Pr(o,"end")?de.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):ne.create(l.doc,s.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},Dk=(n,e,t)=>{let r=mp(n,t);if(!r)return!1;let s=ql(r);return s?gp(n,s,e):!1},Ek=(n,e,t)=>{let r=yp(n,t);if(!r)return!1;let s=Yl(r);return s?gp(n,s,e):!1};function gp(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Uo(n.doc,o,l,U.empty);if(!c||c.from!=o||c instanceof We&&c.slice.size>=l-o)return!1;if(t){let u=n.tr.step(c);u.setSelection(ce.create(u.doc,o)),t(u.scrollIntoView())}return!0}function Pr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Ok=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=ql(r)}let i=o&&o.nodeBefore;return!i||!ne.isSelectable(i)?!1:(e&&e(n.tr.setSelection(ne.create(n.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function ql(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function yp(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Nk=(n,e,t)=>{let r=yp(n,t);if(!r)return!1;let s=Yl(r);if(!s)return!1;let o=s.nodeAfter;if(bp(n,s,e,1))return!0;if(r.parent.content.size==0&&(Pr(o,"start")||ne.isSelectable(o))){let i=Uo(n.doc,r.before(),r.after(),U.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=n.tr.step(i);a.setSelection(Pr(o,"start")?de.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):ne.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},Ik=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Yl(r)}let i=o&&o.nodeAfter;return!i||!ne.isSelectable(i)?!1:(e&&e(n.tr.setSelection(ne.create(n.doc,o.pos)).scrollIntoView()),!0)};function Yl(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Ak=(n,e)=>{let t=n.selection,r=t instanceof ne,s;if(r){if(t.node.isTextblock||!Mn(n.doc,t.from))return!1;s=t.from}else if(s=Wo(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(ne.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Pk=(n,e)=>{let t=n.selection,r;if(t instanceof ne){if(t.node.isTextblock||!Mn(n.doc,t.to))return!1;r=t.to}else if(r=Wo(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Rk=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&Hr(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},jk=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function xp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Lk=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),i=xp(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,i.createAndFill());l.setSelection(de.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Fk=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Nt||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=xp(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=n.tr.insert(i,o.createAndFill());a.setSelection(ce.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},$k=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Sr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&Hr(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)},Bk=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(ne.create(n.doc,s))),!0)};function _k(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||Mn(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function bp(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,i,a,l=s.type.spec.isolating||o.type.spec.isolating;if(!l&&_k(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(t){let p=e.pos+o.nodeSize,m=j.empty;for(let b=i.length-1;b>=0;b--)m=j.from(i[b].create(null,m));m=j.from(s.copy(m));let g=n.tr.step(new Ue(e.pos-1,p,e.pos,p,new U(m,1,0),i.length,!0)),y=p+2*i.length;Mn(g.doc,y)&&g.join(y),t(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:de.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&Hr(f);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(f,h).scrollIntoView()),!0;if(c&&Pr(o,"start",!0)&&Pr(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=o,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(t){let b=j.empty;for(let w=m.length-1;w>=0;w--)b=j.from(m[w].copy(b));let v=n.tr.step(new Ue(e.pos-m.length,e.pos+o.nodeSize,e.pos+y,e.pos+o.nodeSize-y,new U(b,m.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function vp(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(ce.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const zk=vp(-1),Hk=vp(1);function Vk(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,i=s.blockRange(o),a=i&&Ll(i,n,e);return a?(r&&r(t.tr.wrap(i,a).scrollIntoView()),!0):!1}}function Ju(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=t.selection.ranges[o];t.doc.nodesBetween(i,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)s=!0;else{let u=t.doc.resolve(c),f=u.index();s=u.parent.canReplaceWith(f,f+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let i=0;i<t.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[i];o.setBlockType(a,l,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Wk(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,i=s.blockRange(o),a=!1,l=i;if(!i)return!1;if(i.depth>=2&&s.node(i.depth-1).type.compatibleContent(n)&&i.startIndex==0){if(s.index(i.depth-1)==0)return!1;let u=t.doc.resolve(i.start-2);l=new fo(u,u,i.depth),i.endIndex<i.parent.childCount&&(i=new fo(s,t.doc.resolve(o.end(i.depth)),i.depth)),a=!0}let c=Ll(l,n,e,i);return c?(r&&r(Uk(t.tr,i,c,a,n).scrollIntoView()),!0):!1}}function Uk(n,e,t,r,s){let o=j.empty;for(let u=t.length-1;u>=0;u--)o=j.from(t[u].type.create(t[u].attrs,o));n.step(new Ue(e.start-(r?2:0),e.end,e.start,e.end,new U(o,0,0),t.length,!0));let i=0;for(let u=0;u<t.length;u++)t[u].type==s&&(i=u+1);let a=t.length-i,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&Sr(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function qk(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?Yk(e,t,n,o):Kk(e,t,o):!0:!1}}function Yk(n,e,t,r){let s=n.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new Ue(o-1,i,o,i,new U(j.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new fo(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=Hr(r);if(a==null)return!1;s.lift(r,a);let l=s.mapping.map(o,-1)-1;return Mn(s.doc,l)&&s.join(l),e(s.scrollIntoView()),!0}function Kk(n,e,t){let r=n.tr,s=t.parent;for(let p=t.end,m=t.endIndex-1,g=t.startIndex;m>g;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(t.start),i=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==s.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?j.empty:j.from(s))))return!1;let f=o.pos,h=f+i.nodeSize;return r.step(new Ue(f-(a?1:0),h+(l?1:0),f+1,h-1,new U((a?j.empty:j.from(s.copy(j.empty))).append(l?j.empty:j.from(s.copy(j.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Gk(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,l=a.child(i-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=j.from(c?n.create():null),f=new U(j.from(n.create(null,j.from(a.type.create(null,u)))),c?3:1,0),h=o.start,p=o.end;t(e.tr.step(new Ue(h-(c?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}function Jo(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class Qo{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const f=l(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...g)=>{const y=this.buildProps(c,t),b=p(...g)(y);return a.push(b),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:e,editor:s,view:i,state:Jo({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Jk{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Z(n,e,t){return n.config[e]===void 0&&n.parent?Z(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Z(n.parent,e,t):null}):n.config[e]}function Xo(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function wp(n){const e=[],{nodeExtensions:t,markExtensions:r}=Xo(n),s=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=Z(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...o,...p}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Z(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const h={...o,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:u,attribute:h})})}),e}function Ye(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Re(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?o.split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else s==="style"?r[s]=[r[s],o].join("; "):r[s]=o}),r},{})}function Sa(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Re(t,r),{})}function Cp(n){return typeof n=="function"}function he(n,e=void 0,...t){return Cp(n)?e?n.bind(e)(...t):n(...t):n}function Qk(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Xk(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Qu(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(t):Xk(t.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function Xu(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Qk(t)?!1:t!=null))}function Zk(n,e){var t;const r=wp(n),{nodeExtensions:s,markExtensions:o}=Xo(n),i=(t=s.find(c=>Z(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((b,v)=>{const w=Z(v,"extendNodeSchema",f);return{...b,...w?w(c):{}}},{}),p=Xu({...h,content:he(Z(c,"content",f)),marks:he(Z(c,"marks",f)),group:he(Z(c,"group",f)),inline:he(Z(c,"inline",f)),atom:he(Z(c,"atom",f)),selectable:he(Z(c,"selectable",f)),draggable:he(Z(c,"draggable",f)),code:he(Z(c,"code",f)),whitespace:he(Z(c,"whitespace",f)),defining:he(Z(c,"defining",f)),isolating:he(Z(c,"isolating",f)),attrs:Object.fromEntries(u.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),m=he(Z(c,"parseHTML",f));m&&(p.parseDOM=m.map(b=>Qu(b,u)));const g=Z(c,"renderHTML",f);g&&(p.toDOM=b=>g({node:b,HTMLAttributes:Sa(b,u)}));const y=Z(c,"renderText",f);return y&&(p.toText=y),[c.name,p]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((y,b)=>{const v=Z(b,"extendMarkSchema",f);return{...y,...v?v(c):{}}},{}),p=Xu({...h,inclusive:he(Z(c,"inclusive",f)),excludes:he(Z(c,"excludes",f)),group:he(Z(c,"group",f)),spanning:he(Z(c,"spanning",f)),code:he(Z(c,"code",f)),attrs:Object.fromEntries(u.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),m=he(Z(c,"parseHTML",f));m&&(p.parseDOM=m.map(y=>Qu(y,u)));const g=Z(c,"renderHTML",f);return g&&(p.toDOM=y=>g({mark:y,HTMLAttributes:Sa(y,u)})),[c.name,p]}));return new yh({topNode:i,nodes:a,marks:l})}function Ii(n,e){return e.nodes[n]||e.marks[n]||null}function Zu(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const eS=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),t};function Kl(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Zo{constructor(e){this.find=e.find,this.handler=e.handler}}const tS=(n,e)=>{if(Kl(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Fs(n){var e;const{editor:t,from:r,to:s,text:o,rules:i,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const f=eS(c)+o;return i.forEach(h=>{if(u)return;const p=tS(f,h.find);if(!p)return;const m=l.state.tr,g=Jo({state:l.state,transaction:m}),y={from:r-(p[0].length-o.length),to:s},{commands:b,chain:v,can:w}=new Qo({editor:t,state:g});h.handler({state:g,range:y,match:p,commands:b,chain:v,can:w})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:s,text:o}),l.dispatch(m),u=!0)}),u}function nS(n){const{editor:e,rules:t}=n,r=new St({state:{init(){return null},apply(s,o){const i=s.getMeta(r);if(i)return i;const a=s.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,f=c+u.length;Fs({editor:e,from:c,to:f,text:u,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return Fs({editor:e,from:o,to:i,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&Fs({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?Fs({editor:e,from:i.pos,to:i.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function rS(n){return typeof n=="number"}class sS{constructor(e){this.find=e.find,this.handler=e.handler}}const oS=(n,e,t)=>{if(Kl(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function iS(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Qo({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,s,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const g=Math.max(r,m),y=Math.min(s,m+p.content.size),b=p.textBetween(g-m,y-m,void 0,"");oS(b,o.find,i).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,M=k+w[0].length,C={from:t.tr.mapping.map(k),to:t.tr.mapping.map(M)},T=o.handler({state:t,range:C,match:w,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});f.push(T)})}),f.every(p=>p!==null)}const aS=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function lS(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:f,to:h,rule:p,pasteEvt:m})=>{const g=u.tr,y=Jo({state:u,transaction:g});if(!(!iS({editor:e,state:y,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g};return t.map(u=>new St({view(f){const h=p=>{var m;r=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?f.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:(f,h)=>(o=r===f.dom.parentElement,a=h,!1),paste:(f,h)=>{var p;const m=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return i=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!s,y=m.getMeta("uiEvent")==="drop"&&!o,b=m.getMeta("applyPasteRules"),v=!!b;if(!g&&!y&&!v)return;if(v){const{from:M,text:C}=b,T=M+C.length,E=aS(C);return l({rule:u,state:p,from:M,to:{b:T},pasteEvt:E})}const w=h.doc.content.findDiffStart(p.doc.content),k=h.doc.content.findDiffEnd(p.doc.content);if(!(!rS(w)||!k||w===k.b))return l({rule:u,state:p,from:w,to:k,pasteEvt:i})}}))}function cS(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class vr{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=vr.resolve(e),this.schema=Zk(this.extensions,t),this.setupExtensions()}static resolve(e){const t=vr.sort(vr.flatten(e)),r=cS(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=Z(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=Z(r,"priority")||100,i=Z(s,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Ii(t.name,this.schema)},s=Z(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=vr.sort([...this.extensions].reverse()),r=[],s=[],o=t.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Ii(i.name,this.schema)},l=[],c=Z(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&Z(i,"exitable",a)&&(u.ArrowRight=()=>ct.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([y,b])=>[y,()=>b({editor:e})]));u={...u,...g}}const f=Sk(u);l.push(f);const h=Z(i,"addInputRules",a);Zu(i,e.options.enableInputRules)&&h&&r.push(...h());const p=Z(i,"addPasteRules",a);Zu(i,e.options.enablePasteRules)&&p&&s.push(...p());const m=Z(i,"addProseMirrorPlugins",a);if(m){const g=m();l.push(...g)}return l}).flat();return[nS({editor:e,rules:r}),...lS({editor:e,rules:s}),...o]}get attributes(){return wp(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Xo(this.extensions);return Object.fromEntries(t.filter(r=>!!Z(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ye(r.name,this.schema)},i=Z(r,"addNodeView",o);if(!i)return[];const a=(l,c,u,f)=>{const h=Sa(l,s);return i()({editor:e,node:l,getPos:u,decorations:f,HTMLAttributes:h,extension:r})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ii(e.name,this.schema)};e.type==="mark"&&(!((t=he(Z(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=Z(e,"onBeforeCreate",r),o=Z(e,"onCreate",r),i=Z(e,"onUpdate",r),a=Z(e,"onSelectionUpdate",r),l=Z(e,"onTransaction",r),c=Z(e,"onFocus",r),u=Z(e,"onBlur",r),f=Z(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}function uS(n){return Object.prototype.toString.call(n).slice(8,-1)}function $s(n){return uS(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ei(n,e){const t={...n};return $s(n)&&$s(e)&&Object.keys(e).forEach(r=>{$s(e[r])&&$s(n[r])?t[r]=ei(n[r],e[r]):t[r]=e[r]}),t}class lt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(Z(this,"addOptions",{name:this.name}))),this.storage=he(Z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new lt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ei(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new lt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(Z(t,"addOptions",{name:t.name})),t.storage=he(Z(t,"addStorage",{name:t.name,options:t.options})),t}}function kp(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:i={}}=t||{};let a="";return n.nodesBetween(r,s,(l,c,u,f)=>{var h;l.isBlock&&c>r&&(a+=o);const p=i==null?void 0:i[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:f,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,s-c))}),a}function Sp(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const dS=lt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new St({key:new Tn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=Sp(t);return kp(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),fS=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),hS=(n=!1)=>({commands:e})=>e.setContent("",n),pS=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:i})=>{n.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=f.blockRange(h);if(!p)return;const m=Hr(p);if(a.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},mS=n=>e=>n(e),gS=()=>({state:n,dispatch:e})=>Fk(n,e),yS=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const i=r.mapping.map(e);return r.insert(i,o.content),r.setSelection(new ce(r.doc.resolve(i-1))),!0},xS=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const a=s.before(o),l=s.after(o);n.delete(a,l).scrollIntoView()}return!0}return!1},bS=n=>({tr:e,state:t,dispatch:r})=>{const s=Ye(n,t.schema),o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},vS=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},wS=()=>({state:n,dispatch:e})=>Mk(n,e),CS=()=>({commands:n})=>n.keyboardShortcut("Enter"),kS=()=>({state:n,dispatch:e})=>Lk(n,e);function wo(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:Kl(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Ma(n,e,t={}){return n.find(r=>r.type===e&&wo(r.attrs,t))}function SS(n,e,t={}){return!!Ma(n,e,t)}function Gl(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const s=Ma([...r.node.marks],e,t);if(!s)return;let o=r.index,i=n.start()+r.offset,a=o+1,l=i+r.node.nodeSize;for(Ma([...r.node.marks],e,t);o>0&&s.isInSet(n.parent.child(o-1).marks);)o-=1,i-=n.parent.child(o).nodeSize;for(;a<n.parent.childCount&&SS([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:i,to:l}}function En(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const MS=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=En(n,r.schema),{doc:i,selection:a}=t,{$from:l,from:c,to:u}=a;if(s){const f=Gl(l,o,e);if(f&&f.from<=c&&f.to>=u){const h=ce.create(i,f.from,f.to);t.setSelection(h)}}return!0},TS=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Mp(n){return n instanceof ce}function Bn(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Tp(n,e=null){if(!e)return null;const t=de.atStart(n),r=de.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?ce.create(n,Bn(0,s,o),Bn(n.content.size,s,o)):ce.create(n,Bn(e,s,o),Bn(e,s,o))}function Jl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const DS=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const i=()=>{Jl()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!Mp(t.state.selection))return i(),!0;const a=Tp(s.doc,n)||t.state.selection,l=t.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},ES=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),OS=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Dp=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Dp(r)}return n};function Bs(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Dp(t)}function Co(n,e,t){t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{return Array.isArray(n)&&n.length>0?j.fromArray(n.map(i=>e.nodeFromJSON(i))):e.nodeFromJSON(n)}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Co("",e,t)}if(s){if(t.errorOnInvalidContent){let i=!1,a="";const l=new yh({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?xn.fromSchema(l).parseSlice(Bs(n),t.parseOptions):xn.fromSchema(l).parse(Bs(n),t.parseOptions),t.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=xn.fromSchema(e);return t.slice?o.parseSlice(Bs(n),t.parseOptions).content:o.parse(Bs(n),t.parseOptions)}return Co("",e,t)}function NS(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof We||s instanceof Ue))return;const o=n.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),n.setSelection(de.near(n.doc.resolve(i),t))}const IS=n=>!("type"in n),AS=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=Co(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(i=t.errorOnInvalidContent)!==null&&i!==void 0?i:o.options.enableContentCheck})}catch(m){return o.emit("contentError",{editor:o,error:m,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,f=!0;if((IS(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),l===c&&f){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let p;u?(Array.isArray(e)?p=e.map(m=>m.text||"").join(""):typeof e=="object"&&e&&e.text?p=e.text:p=e,r.insertText(p,l,c)):(p=a,r.replaceWith(l,c,p)),t.updateSelection&&NS(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},PS=()=>({state:n,dispatch:e})=>Ak(n,e),RS=()=>({state:n,dispatch:e})=>Pk(n,e),jS=()=>({state:n,dispatch:e})=>Tk(n,e),LS=()=>({state:n,dispatch:e})=>Nk(n,e),FS=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Wo(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},$S=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Wo(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},BS=()=>({state:n,dispatch:e})=>Dk(n,e),_S=()=>({state:n,dispatch:e})=>Ek(n,e);function Ep(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function zS(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Jl()||Ep()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),i&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const HS=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=zS(n).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function ps(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,i=e?Ye(e,n.schema):null,a=[];n.doc.nodesBetween(r,s,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),m=Math.min(s,h+f.nodeSize);a.push({node:f,from:p,to:m})});const l=s-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>wo(f.node.attrs,t,{strict:!1}));return o?!!c.length:c.reduce((f,h)=>f+h.to-h.from,0)>=l}const VS=(n,e={})=>({state:t,dispatch:r})=>{const s=Ye(n,t.schema);return ps(t,s,e)?Rk(t,r):!1},WS=()=>({state:n,dispatch:e})=>$k(n,e),US=n=>({state:e,dispatch:t})=>{const r=Ye(n,e.schema);return qk(r)(e,t)},qS=()=>({state:n,dispatch:e})=>jk(n,e);function ti(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function ed(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const YS=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,i=null;const a=ti(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=Ye(n,r.schema)),a==="mark"&&(i=En(n,r.schema)),s&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&t.setNodeMarkup(u,void 0,ed(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(f=>{i===f.type&&t.addMark(u,u+c.nodeSize,i.create(ed(f.attrs,e)))})})}),!0):!1},KS=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),GS=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),JS=()=>({state:n,dispatch:e})=>Ok(n,e),QS=()=>({state:n,dispatch:e})=>Ik(n,e),XS=()=>({state:n,dispatch:e})=>Bk(n,e),ZS=()=>({state:n,dispatch:e})=>Hk(n,e),eM=()=>({state:n,dispatch:e})=>zk(n,e);function Ta(n,e,t={},r={}){return Co(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const tM=(n,e=!1,t={},r={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{var l,c;const{doc:u}=o;if(t.preserveWhitespace!=="full"){const f=Ta(n,s.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return i&&o.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return i&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function ni(n,e){const t=En(e,n.schema),{from:r,to:s,empty:o}=n.selection,i=[];o?(n.storedMarks&&i.push(...n.storedMarks),i.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function nM(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function rM(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Ql(n){return e=>rM(e.$from,n)}function sM(n,e){const t=or.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function oM(n,e){const t={from:0,to:n.content.size};return kp(n,t,e)}function iM(n,e){const t=Ye(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===t.name);return i?{...i.attrs}:{}}function aM(n,e){const t=ti(typeof e=="string"?e:e.name,n.schema);return t==="node"?iM(n,e):t==="mark"?ni(n,e):{}}function Op(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n-1),i=Gl(o,s.type);i&&r.push({mark:s,...i})}):t.nodesBetween(n,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function Qs(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function Da(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?En(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>wo(f.attrs,t,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;n.doc.nodesBetween(p,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(p,y),v=Math.min(m,y+g.nodeSize),w=v-b;i+=w,a.push(...g.marks.map(k=>({mark:k,from:b,to:v})))})}),i===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>wo(f.mark.attrs,t,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),c=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+c:l)>=i}function lM(n,e,t={}){if(!e)return ps(n,null,t)||Da(n,null,t);const r=ti(e,n.schema);return r==="node"?ps(n,e,t):r==="mark"?Da(n,e,t):!1}function td(n,e){const{nodeExtensions:t}=Xo(e),r=t.find(i=>i.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=he(Z(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Np(n,{checkChildren:e}={checkChildren:!0}){if(n.isText)return!n.text;if(n.content.childCount===0)return!0;if(n.isLeaf)return!1;if(e){let t=!0;return n.content.forEach(r=>{t!==!1&&(Np(r)||(t=!1))}),t}return!1}function cM(n){return n instanceof ne}function uM(n,e,t){var r;const{selection:s}=e;let o=null;if(Mp(s)&&(o=s.$cursor),o){const a=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,f,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(t),m=!!t.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(t));c=p&&m}return!c}),c})}const dM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:i,ranges:a}=o,l=En(n,r.schema);if(s)if(i){const c=ni(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(h,p)=>{const m=Math.max(p,u),g=Math.min(p+h.nodeSize,f);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&t.addMark(m,g,l.create({...b.attrs,...e}))}):t.addMark(m,g,l.create(e))})});return uM(r,t,l)},fM=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),hM=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=Ye(n,t.schema);return o.isTextblock?s().command(({commands:i})=>Ju(o,e)(t)?!0:i.clearNodes()).command(({state:i})=>Ju(o,e)(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pM=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=Bn(n,0,r.content.size),o=ne.create(r,s);e.setSelection(o)}return!0},mM=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,i=ce.atStart(r).from,a=ce.atEnd(r).to,l=Bn(s,i,a),c=Bn(o,i,a),u=ce.create(r,l,c);e.setSelection(u)}return!0},gM=n=>({state:e,dispatch:t})=>{const r=Ye(n,e.schema);return Gk(r)(e,t)};function nd(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const yM=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:i}=e,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=Qs(c,a.node().type.name,a.node().attrs);if(o instanceof ne&&o.node.isBlock)return!a.parentOffset||!Sr(i,a.pos)?!1:(r&&(n&&nd(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:nM(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&h?[{type:h,attrs:u}]:void 0,m=Sr(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Sr(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(m&&(o instanceof ce&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!f&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}n&&nd(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},xM=n=>({tr:e,state:t,dispatch:r,editor:s})=>{var o;const i=Ye(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==i)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let y=j.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-b;T>=a.depth-3;T-=1)y=j.from(a.node(T).copy(y));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=Qs(f,a.node().type.name,a.node().attrs),k=((o=i.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(w))||void 0;y=y.append(j.from(i.createAndFill(null,k)||void 0));const M=a.before(a.depth-(b-1));e.replace(M,a.after(-v),new U(y,4-b,0));let C=-1;e.doc.nodesBetween(M,e.doc.content.size,(T,E)=>{if(C>-1)return!1;T.isTextblock&&T.content.size===0&&(C=E+1)}),C>-1&&e.setSelection(ce.near(e.doc.resolve(C))),e.scrollIntoView()}return!0}const h=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,p=Qs(f,u.type.name,u.attrs),m=Qs(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const g=h?[{type:i,attrs:p},{type:h,attrs:m}]:[{type:i,attrs:p}];if(!Sr(e.doc,a.pos,2))return!1;if(r){const{selection:y,storedMarks:b}=t,{splittableMarks:v}=s.extensionManager,w=b||y.$to.parentOffset&&y.$from.marks();if(e.split(a.pos,2,g).scrollIntoView(),!w||!r)return!0;const k=w.filter(M=>v.includes(M.type.name));e.ensureMarks(k)}return!0},Ai=(n,e)=>{const t=Ql(i=>i.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&Mn(n.doc,t.pos)&&n.join(t.pos),!0},Pi=(n,e)=>{const t=Ql(i=>i.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&Mn(n.doc,r)&&n.join(r),!0},bM=(n,e,t,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:h}=s.extensionManager,p=Ye(n,i.schema),m=Ye(e,i.schema),{selection:g,storedMarks:y}=i,{$from:b,$to:v}=g,w=b.blockRange(v),k=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const M=Ql(C=>td(C.type.name,f))(g);if(w.depth>=1&&M&&w.depth-M.depth<=1){if(M.node.type===p)return c.liftListItem(m);if(td(M.node.type.name,f)&&p.validContent(M.node.content)&&a)return l().command(()=>(o.setNodeMarkup(M.pos,p),!0)).command(()=>Ai(o,p)).command(()=>Pi(o,p)).run()}return!t||!k||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Ai(o,p)).command(()=>Pi(o,p)).run():l().command(()=>{const C=u().wrapInList(p,r),T=k.filter(E=>h.includes(E.type.name));return o.ensureMarks(T),C?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Ai(o,p)).command(()=>Pi(o,p)).run()},vM=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,i=En(n,r.schema);return Da(r,i,e)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,e)},wM=(n,e,t={})=>({state:r,commands:s})=>{const o=Ye(n,r.schema),i=Ye(e,r.schema);return ps(r,o,t)?s.setNode(i):s.setNode(o,t)},CM=(n,e={})=>({state:t,commands:r})=>{const s=Ye(n,t.schema);return ps(t,s,e)?r.lift(s):r.wrapIn(s,e)},kM=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const i=n.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,n.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},SM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},MM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=t,l=En(n,r.schema),{$from:c,empty:u,ranges:f}=a;if(!s)return!0;if(u&&i){let{from:h,to:p}=a;const m=(o=c.marks().find(y=>y.type===l))===null||o===void 0?void 0:o.attrs,g=Gl(c,l,m);g&&(h=g.from,p=g.to),t.removeMark(h,p,l)}else f.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},TM=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,i=null;const a=ti(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(o=Ye(n,r.schema)),a==="mark"&&(i=En(n,r.schema)),s&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(f,h)=>{o&&o===f.type&&t.setNodeMarkup(h,void 0,{...f.attrs,...e}),i&&f.marks.length&&f.marks.forEach(p=>{if(i===p.type){const m=Math.max(h,c),g=Math.min(h+f.nodeSize,u);t.addMark(m,g,i.create({...p.attrs,...e}))}})})}),!0):!1},DM=(n,e={})=>({state:t,dispatch:r})=>{const s=Ye(n,t.schema);return Vk(s,e)(t,r)},EM=(n,e={})=>({state:t,dispatch:r})=>{const s=Ye(n,t.schema);return Wk(s,e)(t,r)};var OM=Object.freeze({__proto__:null,blur:fS,clearContent:hS,clearNodes:pS,command:mS,createParagraphNear:gS,cut:yS,deleteCurrentNode:xS,deleteNode:bS,deleteRange:vS,deleteSelection:wS,enter:CS,exitCode:kS,extendMarkRange:MS,first:TS,focus:DS,forEach:ES,insertContent:OS,insertContentAt:AS,joinBackward:jS,joinDown:RS,joinForward:LS,joinItemBackward:FS,joinItemForward:$S,joinTextblockBackward:BS,joinTextblockForward:_S,joinUp:PS,keyboardShortcut:HS,lift:VS,liftEmptyBlock:WS,liftListItem:US,newlineInCode:qS,resetAttributes:YS,scrollIntoView:KS,selectAll:GS,selectNodeBackward:JS,selectNodeForward:QS,selectParentNode:XS,selectTextblockEnd:ZS,selectTextblockStart:eM,setContent:tM,setMark:dM,setMeta:fM,setNode:hM,setNodeSelection:pM,setTextSelection:mM,sinkListItem:gM,splitBlock:yM,splitListItem:xM,toggleList:bM,toggleMark:vM,toggleNode:wM,toggleWrap:CM,undoInputRule:kM,unsetAllMarks:SM,unsetMark:MM,updateAttributes:TM,wrapIn:DM,wrapInList:EM});const NM=lt.create({name:"commands",addCommands(){return{...OM}}}),IM=lt.create({name:"editable",addProseMirrorPlugins(){return[new St({key:new Tn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),AM=lt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new St({key:new Tn("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),PM=lt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,g=m.parent.type.spec.isolating,y=f.pos-f.parentOffset,b=g&&m.parent.childCount===1?y===f.pos:de.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!b||b&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Jl()||Ep()?o:s},addProseMirrorPlugins(){return[new St({key:new Tn("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(m=>m.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:s,from:o,to:i}=e.selection,a=de.atStart(e.doc).from,l=de.atEnd(e.doc).to;if(s||!(o===a&&i===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const f=t.tr,h=Jo({state:t,transaction:f}),{commands:p}=new Qo({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),RM=lt.create({name:"tabindex",addProseMirrorPlugins(){return[new St({key:new Tn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class jn{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new jn(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new jn(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new jn(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=this.pos+r+1,i=this.resolvedPos.doc.resolve(o);if(!s&&i.depth<=this.depth)return;const a=new jn(i,this.editor,s,s?t:null);s&&(a.actualDepth=this.depth+1),e.push(new jn(i,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,i=Object.keys(t);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==t[l])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===e&&o.every(l=>t[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,t,r))))}),s}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}const jM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function LM(n,e,t){const r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}let FM=class extends Jk{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t}},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=LM(jM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Cp(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});this.view.updateState(s)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(s=>!s.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[IM,dS.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),NM,AM,PM,RM]:[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new vr(s,this)}createCommandManager(){this.commandManager=new Qo({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=Ta(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(i=>i.name!=="collaboration"),this.createExtensionManager()}}),e=Ta(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const t=Tp(e,this.options.autofocus);this.view=new mk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:br.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return aM(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return lM(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return sM(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return oM(this.state.doc,{blockSeparator:t,textSerializers:{...Sp(this.schema),...r}})}get isEmpty(){return Np(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new jn(t,this)}get $doc(){return this.$pos(0)}};function Zn(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const s=he(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=t.from+a.indexOf(i),u=c+i.length;if(Op(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<t.to&&o.delete(u,t.to),c>t.from&&o.delete(t.from+l,c);const h=t.from+l+i.length;o.addMark(t.from+l,h,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function $M(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const s=he(n.getAttributes,void 0,r)||{},{tr:o}=e,i=t.from;let a=t.to;const l=n.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?i:i-1;o.insert(c,n.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()}})}function Ea(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=he(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function ms(n){return new Zo({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=he(n.getAttributes,void 0,r)||{},i=e.tr.delete(t.from,t.to),l=i.doc.resolve(t.from).blockRange(),c=l&&Ll(l,n.type,o);if(!c)return null;if(i.wrap(l,c),n.keepMarks&&n.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=n.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(y=>p.includes(y.type.name));i.ensureMarks(g)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,o).run()}const u=i.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Mn(i.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&i.join(t.from-1)}})}class ct{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(Z(this,"addOptions",{name:this.name}))),this.storage=he(Z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ct(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ei(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ct(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(Z(t,"addOptions",{name:t.name})),t.storage=he(Z(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}let gt=class Oa{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(Z(this,"addOptions",{name:this.name}))),this.storage=he(Z(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oa(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ei(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Oa(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(Z(t,"addOptions",{name:t.name})),t.storage=he(Z(t,"addStorage",{name:t.name,options:t.options})),t}};function er(n){return new sS({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=he(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),f=t.from+l.indexOf(a),h=f+a.length;if(Op(t.from,t.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===n.type&&y!==m.mark.type)).filter(m=>m.to>f).length)return null;h<t.to&&i.delete(h,t.to),f>t.from&&i.delete(t.from+u,f),c=t.from+u+a.length,i.addMark(t.from+u,c,n.type.create(o||{})),i.removeStoredMark(n.type)}}})}var ir={root:"m_dd3f7539",typographyStylesProvider:"m_d37966d9",content:"m_c2204cc2",linkEditorDropdown:"m_8a991b4f",control:"m_c2207da6",controlsGroup:"m_2ab47ef2",linkEditor:"m_b67b711e",linkEditorInput:"m_296cf94c",linkEditorExternalControl:"m_cfef614",linkEditorSave:"m_3b28e7bb",toolbar:"m_4574a3c4",taskList:"m_8b44009a"};const BM={linkControlLabel:"Link",colorPickerControlLabel:"Text color",highlightControlLabel:"Highlight text",colorControlLabel:n=>`Set text color ${n}`,boldControlLabel:"Bold",italicControlLabel:"Italic",underlineControlLabel:"Underline",strikeControlLabel:"Strikethrough",clearFormattingControlLabel:"Clear formatting",unlinkControlLabel:"Remove link",bulletListControlLabel:"Bullet list",orderedListControlLabel:"Ordered list",h1ControlLabel:"Heading 1",h2ControlLabel:"Heading 2",h3ControlLabel:"Heading 3",h4ControlLabel:"Heading 4",h5ControlLabel:"Heading 5",h6ControlLabel:"Heading 6",blockquoteControlLabel:"Blockquote",alignLeftControlLabel:"Align text: left",alignCenterControlLabel:"Align text: center",alignRightControlLabel:"Align text: right",alignJustifyControlLabel:"Align text: justify",codeControlLabel:"Code",codeBlockControlLabel:"Code block",subscriptControlLabel:"Subscript",superscriptControlLabel:"Superscript",unsetColorControlLabel:"Unset color",hrControlLabel:"Horizontal line",undoControlLabel:"Undo",redoControlLabel:"Redo",tasksControlLabel:"Task list",tasksSinkLabel:"Decrease task level",tasksLiftLabel:"Increase task level",linkEditorInputLabel:"Enter URL",linkEditorInputPlaceholder:"https://example.com/",linkEditorExternalLink:"Open link in a new tab",linkEditorInternalLink:"Open link in the same tab",linkEditorSave:"Save",colorPickerCancel:"Cancel",colorPickerClear:"Clear color",colorPickerColorPicker:"Color picker",colorPickerPalette:"Color palette",colorPickerSave:"Save",colorPickerColorLabel:n=>`Set text color ${n}`},[_M,On]=Ed("RichTextEditor component was not found in tree"),zM=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},HM=({renderers:n})=>Ee.createElement(Ee.Fragment,null,Object.entries(n).map(([e,t])=>md.createPortal(t.reactElement,t.element,e)));class VM extends Ee.Component{constructor(e){super(e),this.editorContentRef=Ee.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?Ia.flushSync(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{const r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Ee.createElement(Ee.Fragment,null,Ee.createElement("div",{ref:zM(t,this.editorContentRef),...r}),Ee.createElement(HM,{renderers:this.state.renderers}))}}const WM=x.forwardRef((n,e)=>{const t=Ee.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Ee.createElement(VM,{key:t,innerRef:e,...n})}),rd=Ee.memo(WM);class UM extends FM{constructor(){super(...arguments),this.contentComponent=null}}var Ip={exports:{}},Ri={},ji={exports:{}},Li={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd;function qM(){if(sd)return Li;sd=1;var n=Ee;function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,i=n.useDebugValue;function a(f,h){var p=h(),m=r({inst:{value:p,getSnapshot:h}}),g=m[0].inst,y=m[1];return o(function(){g.value=p,g.getSnapshot=h,l(g)&&y({inst:g})},[f,p,h]),s(function(){return l(g)&&y({inst:g}),f(function(){l(g)&&y({inst:g})})},[f]),i(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!t(f,p)}catch{return!0}}function c(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Li.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,Li}var od;function YM(){return od||(od=1,ji.exports=qM()),ji.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id;function KM(){if(id)return Ri;id=1;var n=Ee,e=YM();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,i=n.useEffect,a=n.useMemo,l=n.useDebugValue;return Ri.useSyncExternalStoreWithSelector=function(c,u,f,h,p){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function b(C){if(!v){if(v=!0,w=C,C=h(C),p!==void 0&&g.hasValue){var T=g.value;if(p(T,C))return k=T}return k=C}if(T=k,r(w,C))return T;var E=h(C);return p!==void 0&&p(T,E)?T:(w=C,k=E)}var v=!1,w,k,M=f===void 0?null:f;return[function(){return b(u())},M===null?void 0:function(){return b(M())}]},[u,f,h,p]);var y=s(c,m[0],m[1]);return i(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},Ri}Ip.exports=KM();var GM=Ip.exports;function JM(n){let e=0,t=0,r={editor:n,transactionNumber:0},s=n;const o=new Set;return{getSnapshot(){return e===t||(t=e,r={editor:s,transactionNumber:e}),r},getServerSnapshot(){return{editor:null,transactionNumber:0}},subscribe(a){return o.add(a),()=>{o.delete(a)}},watch(a){if(s=a,s){const l=()=>{e+=1,o.forEach(u=>u())},c=s;return c.on("transaction",l),()=>{c.off("transaction",l)}}}}}function QM(n){const[e]=x.useState(()=>JM(n.editor)),t=GM.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getServerSnapshot,n.selector,n.equalityFn);return x.useEffect(()=>e.watch(n.editor),[n.editor]),x.useDebugValue(t),t}const XM=!1,Na=typeof window>"u",ZM=Na||!!(typeof window<"u"&&window.next);function _s(n){const e=new UM(n.current);return e.on("beforeCreate",(...t)=>{var r,s;return(s=(r=n.current).onBeforeCreate)===null||s===void 0?void 0:s.call(r,...t)}),e.on("blur",(...t)=>{var r,s;return(s=(r=n.current).onBlur)===null||s===void 0?void 0:s.call(r,...t)}),e.on("create",(...t)=>{var r,s;return(s=(r=n.current).onCreate)===null||s===void 0?void 0:s.call(r,...t)}),e.on("destroy",(...t)=>{var r,s;return(s=(r=n.current).onDestroy)===null||s===void 0?void 0:s.call(r,...t)}),e.on("focus",(...t)=>{var r,s;return(s=(r=n.current).onFocus)===null||s===void 0?void 0:s.call(r,...t)}),e.on("selectionUpdate",(...t)=>{var r,s;return(s=(r=n.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(r,...t)}),e.on("transaction",(...t)=>{var r,s;return(s=(r=n.current).onTransaction)===null||s===void 0?void 0:s.call(r,...t)}),e.on("update",(...t)=>{var r,s;return(s=(r=n.current).onUpdate)===null||s===void 0?void 0:s.call(r,...t)}),e.on("contentError",(...t)=>{var r,s;return(s=(r=n.current).onContentError)===null||s===void 0?void 0:s.call(r,...t)}),e}function eT(n={},e=[]){const t=x.useRef(n),[r,s]=x.useState(()=>{if(n.immediatelyRender===void 0)return Na||ZM?null:_s(t);if(n.immediatelyRender&&Na&&XM)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return n.immediatelyRender?_s(t):null}),o=x.useRef(r);return o.current=r,x.useDebugValue(r),x.useEffect(()=>{const i=l=>{l&&setTimeout(()=>{l!==o.current&&!l.isDestroyed&&l.destroy()})};let a=o.current;return a?!Array.isArray(e)||e.length===0?(a.setOptions(n),()=>i(a)):(a.destroy(),a=_s(t),s(a),()=>i(a)):(a=_s(t),s(a),()=>i(a))},e),QM({editor:r,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),r}const tT=x.createContext({editor:null});tT.Consumer;const nT=x.createContext({onDragStart:void 0}),rT=()=>x.useContext(nT);Ee.forwardRef((n,e)=>{const{onDragStart:t}=rT(),r=n.as||"div";return Ee.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const sT={},Xl=Ne((n,e)=>{const t=ie("RichTextEditorContent",sT,n),{classNames:r,className:s,style:o,styles:i,vars:a,...l}=t,c=On();return c.withTypographyStyles?d.jsx(Tl,{...c.getStyles("typographyStylesProvider",{className:s,style:o,styles:i,classNames:r}),unstyled:c.unstyled,ref:e,children:d.jsx(ue,{component:rd,editor:c.editor,...c.getStyles("content",{classNames:r,styles:i}),...l})}):d.jsx(ue,{component:rd,editor:c.editor,...c.getStyles("content",{classNames:r,styles:i,className:s,style:o}),...l})});Xl.classes=ir;Xl.displayName="@mantine/tiptap/RichTextEditorContent";function me(n){return d.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}function oT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),d.jsx("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"})]})}function iT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M11 5l6 0"}),d.jsx("path",{d:"M7 19l6 0"}),d.jsx("path",{d:"M14 5l-4 14"})]})}function aT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M7 5v5a5 5 0 0 0 10 0v-5"}),d.jsx("path",{d:"M5 19h14"})]})}function lT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M5 12l14 0"}),d.jsx("path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5"})]})}function cT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M17 15l4 4m0 -4l-4 4"}),d.jsx("path",{d:"M7 6v-1h11v1"}),d.jsx("path",{d:"M7 19l4 0"}),d.jsx("path",{d:"M13 5l-4 14"})]})}function uT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M19 18v-8l-2 2"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function dT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function fT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M19 14a2 2 0 1 0 -2 -2"}),d.jsx("path",{d:"M17 16a2 2 0 1 0 2 -2"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function hT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M20 18v-8l-4 6h5"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function pT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function mT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z"}),d.jsx("path",{d:"M21 12a2 2 0 1 0 -4 0v4"}),d.jsx("path",{d:"M4 6v12"}),d.jsx("path",{d:"M12 6v12"}),d.jsx("path",{d:"M11 18h2"}),d.jsx("path",{d:"M3 18h2"}),d.jsx("path",{d:"M4 12h8"}),d.jsx("path",{d:"M3 6h2"}),d.jsx("path",{d:"M11 6h2"})]})}function gT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M9 6l11 0"}),d.jsx("path",{d:"M9 12l11 0"}),d.jsx("path",{d:"M9 18l11 0"}),d.jsx("path",{d:"M5 6l0 .01"}),d.jsx("path",{d:"M5 12l0 .01"}),d.jsx("path",{d:"M5 18l0 .01"})]})}function yT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M11 6h9"}),d.jsx("path",{d:"M11 12h9"}),d.jsx("path",{d:"M12 18h8"}),d.jsx("path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4"}),d.jsx("path",{d:"M6 10v-6l-2 2"})]})}function xT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M17 22v-2"}),d.jsx("path",{d:"M9 15l6 -6"}),d.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),d.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}),d.jsx("path",{d:"M20 17h2"}),d.jsx("path",{d:"M2 7h2"}),d.jsx("path",{d:"M7 2v2"})]})}function bT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M6 15h15"}),d.jsx("path",{d:"M21 19h-15"}),d.jsx("path",{d:"M15 11h6"}),d.jsx("path",{d:"M21 7h-6"}),d.jsx("path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}),d.jsx("path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"})]})}function vT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M4 6l16 0"}),d.jsx("path",{d:"M4 12l10 0"}),d.jsx("path",{d:"M4 18l14 0"})]})}function wT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M4 6l16 0"}),d.jsx("path",{d:"M10 12l10 0"}),d.jsx("path",{d:"M6 18l14 0"})]})}function CT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M4 6l16 0"}),d.jsx("path",{d:"M8 12l8 0"}),d.jsx("path",{d:"M6 18l12 0"})]})}function kT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M4 6l16 0"}),d.jsx("path",{d:"M4 12l16 0"}),d.jsx("path",{d:"M4 18l12 0"})]})}function ST(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),d.jsx("path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function MT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),d.jsx("path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function Ap(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M7 8l-4 4l4 4"}),d.jsx("path",{d:"M17 8l4 4l-4 4"}),d.jsx("path",{d:"M14 4l-4 16"})]})}function TT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M3 19h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),d.jsx("path",{d:"M12.5 5.5l4 4"}),d.jsx("path",{d:"M4.5 13.5l4 4"}),d.jsx("path",{d:"M21 15v4h-8l4 -4z"})]})}function DT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M5 12h2"}),d.jsx("path",{d:"M17 12h2"}),d.jsx("path",{d:"M11 12h2"})]})}function Pp(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73"}),d.jsx("path",{d:"M3 3l18 18"})]})}function ET(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M11 7l6 6"}),d.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}function OT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M18 6l-12 12"}),d.jsx("path",{d:"M6 6l12 12"})]})}function NT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),d.jsx("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d.jsx("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d.jsx("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function IT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M5 12l5 5l10 -10"})]})}function AT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M9 15l6 -6"}),d.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),d.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"})]})}function PT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"}),d.jsx("path",{d:"M11 13l9 -9"}),d.jsx("path",{d:"M15 4h5v5"})]})}function RT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M9 14l-4 -4l4 -4"}),d.jsx("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"})]})}function jT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M15 14l4 -4l-4 -4"}),d.jsx("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"})]})}function LT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5"}),d.jsx("path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5"}),d.jsx("path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5"}),d.jsx("path",{d:"M11 6l9 0"}),d.jsx("path",{d:"M11 12l9 0"}),d.jsx("path",{d:"M11 18l9 0"})]})}function FT(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M20 6l-11 0"}),d.jsx("path",{d:"M20 12l-7 0"}),d.jsx("path",{d:"M20 18l-11 0"}),d.jsx("path",{d:"M4 8l4 4l-4 4"})]})}function $T(n){return d.jsxs(me,{...n,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d.jsx("path",{d:"M20 6l-7 0"}),d.jsx("path",{d:"M20 12l-9 0"}),d.jsx("path",{d:"M20 18l-7 0"}),d.jsx("path",{d:"M8 8l-4 4l4 4"})]})}const BT={interactive:!0},Vr=Ne((n,e)=>{const t=ie("RichTextEditorControl",BT,n),{classNames:r,className:s,style:o,styles:i,vars:a,interactive:l,active:c,onMouseDown:u,disabled:f,...h}=t,p=On();return d.jsx(Fr,{...h,...p.getStyles("control",{className:s,style:o,classNames:r,styles:i}),disabled:f,"data-rich-text-editor-control":!0,tabIndex:l?0:-1,"data-interactive":l||void 0,"data-disabled":f||void 0,"data-active":c||void 0,"aria-pressed":c&&l||void 0,"aria-hidden":!l||void 0,ref:e,unstyled:p.unstyled,onMouseDown:m=>{m.preventDefault(),u==null||u(m)}})});Vr.classes=ir;Vr.displayName="@mantine/tiptap/RichTextEditorControl";const Zl=x.forwardRef(({className:n,icon:e,...t},r)=>d.jsx(Vr,{ref:r,...t,children:d.jsx(e,{style:{width:te(16),height:te(16)}})}));Zl.displayName="@mantine/tiptap/RichTextEditorControlBase";function Se({label:n,isActive:e,operation:t,icon:r,isDisabled:s}){return x.forwardRef((o,i)=>{const{editor:a,labels:l}=On(),c=l[n];return d.jsx(Zl,{...o,"aria-label":c,title:c,active:e!=null&&e.name?a==null?void 0:a.isActive(e.name,e.attributes):!1,ref:i,onClick:()=>a==null?void 0:a.chain().focus()[t.name](t.attributes).run(),icon:o.icon||r,disabled:(s==null?void 0:s(a))||!1})})}const _T=Se({label:"boldControlLabel",icon:n=>d.jsx(oT,{...n}),isActive:{name:"bold"},operation:{name:"toggleBold"}}),zT=Se({label:"italicControlLabel",icon:n=>d.jsx(iT,{...n}),isActive:{name:"italic"},operation:{name:"toggleItalic"}}),HT=Se({label:"underlineControlLabel",icon:n=>d.jsx(aT,{...n}),isActive:{name:"underline"},operation:{name:"toggleUnderline"}}),VT=Se({label:"strikeControlLabel",icon:n=>d.jsx(lT,{...n}),isActive:{name:"strike"},operation:{name:"toggleStrike"}}),WT=Se({label:"clearFormattingControlLabel",icon:n=>d.jsx(cT,{...n}),operation:{name:"unsetAllMarks"}}),UT=Se({label:"unlinkControlLabel",icon:n=>d.jsx(xT,{...n}),operation:{name:"unsetLink"}}),qT=Se({label:"bulletListControlLabel",icon:n=>d.jsx(gT,{...n}),isActive:{name:"bulletList"},operation:{name:"toggleBulletList"}}),YT=Se({label:"orderedListControlLabel",icon:n=>d.jsx(yT,{...n}),isActive:{name:"orderedList"},operation:{name:"toggleOrderedList"}}),KT=Se({label:"h1ControlLabel",icon:n=>d.jsx(uT,{...n}),isActive:{name:"heading",attributes:{level:1}},operation:{name:"toggleHeading",attributes:{level:1}}}),GT=Se({label:"h2ControlLabel",icon:n=>d.jsx(dT,{...n}),isActive:{name:"heading",attributes:{level:2}},operation:{name:"toggleHeading",attributes:{level:2}}}),JT=Se({label:"h3ControlLabel",icon:n=>d.jsx(fT,{...n}),isActive:{name:"heading",attributes:{level:3}},operation:{name:"toggleHeading",attributes:{level:3}}}),QT=Se({label:"h4ControlLabel",icon:n=>d.jsx(hT,{...n}),isActive:{name:"heading",attributes:{level:4}},operation:{name:"toggleHeading",attributes:{level:4}}}),XT=Se({label:"h5ControlLabel",icon:n=>d.jsx(pT,{...n}),isActive:{name:"heading",attributes:{level:5}},operation:{name:"toggleHeading",attributes:{level:5}}}),ZT=Se({label:"h6ControlLabel",icon:n=>d.jsx(mT,{...n}),isActive:{name:"heading",attributes:{level:6}},operation:{name:"toggleHeading",attributes:{level:6}}}),eD=Se({label:"blockquoteControlLabel",icon:n=>d.jsx(bT,{...n}),isActive:{name:"blockquote"},operation:{name:"toggleBlockquote"}}),tD=Se({label:"alignLeftControlLabel",icon:n=>d.jsx(vT,{...n}),operation:{name:"setTextAlign",attributes:"left"}}),nD=Se({label:"alignRightControlLabel",icon:n=>d.jsx(wT,{...n}),operation:{name:"setTextAlign",attributes:"right"}}),rD=Se({label:"alignCenterControlLabel",icon:n=>d.jsx(CT,{...n}),operation:{name:"setTextAlign",attributes:"center"}}),sD=Se({label:"alignJustifyControlLabel",icon:n=>d.jsx(kT,{...n}),operation:{name:"setTextAlign",attributes:"justify"}}),oD=Se({label:"subscriptControlLabel",icon:n=>d.jsx(ST,{...n}),isActive:{name:"subscript"},operation:{name:"toggleSubscript"}}),iD=Se({label:"superscriptControlLabel",icon:n=>d.jsx(MT,{...n}),isActive:{name:"superscript"},operation:{name:"toggleSuperscript"}}),aD=Se({label:"codeControlLabel",icon:n=>d.jsx(Ap,{...n}),isActive:{name:"code"},operation:{name:"toggleCode"}}),lD=Se({label:"codeBlockControlLabel",icon:n=>d.jsx(Ap,{...n}),isActive:{name:"codeBlock"},operation:{name:"toggleCodeBlock"}}),cD=Se({label:"highlightControlLabel",icon:n=>d.jsx(TT,{...n}),isActive:{name:"highlight"},operation:{name:"toggleHighlight"}}),uD=Se({label:"hrControlLabel",icon:n=>d.jsx(DT,{...n}),operation:{name:"setHorizontalRule"}}),dD=Se({label:"unsetColorControlLabel",icon:n=>d.jsx(Pp,{...n}),operation:{name:"unsetColor"}}),fD=Se({label:"undoControlLabel",icon:n=>d.jsx(RT,{...n}),isDisabled:n=>!(n!=null&&n.can().undo()),operation:{name:"undo"}}),hD=Se({label:"redoControlLabel",icon:n=>d.jsx(jT,{...n}),isDisabled:n=>!(n!=null&&n.can().redo()),operation:{name:"redo"}}),pD=Se({label:"tasksControlLabel",icon:n=>d.jsx(LT,{...n}),isActive:{name:"taskList"},operation:{name:"toggleTaskList"}}),mD=Se({label:"tasksSinkLabel",icon:n=>d.jsx(FT,{...n}),operation:{name:"sinkListItem",attributes:"taskItem"},isDisabled:n=>!(n!=null&&n.can().sinkListItem("taskItem"))}),gD=Se({label:"tasksLiftLabel",icon:n=>d.jsx($T,{...n}),operation:{name:"liftListItem",attributes:"taskItem"},isDisabled:n=>!(n!=null&&n.can().liftListItem("taskItem"))}),yD=n=>d.jsx(AT,{...n}),xD={},ec=Ne((n,e)=>{var V;const t=ie("RichTextEditorLinkControl",xD,n),{classNames:r,className:s,style:o,styles:i,vars:a,icon:l,popoverProps:c,disableTooltips:u,initialExternal:f,...h}=t,p=On(),m={classNames:r,styles:i},[g,y]=cg(""),[b,v]=x.useState(f),[w,{open:k,close:M}]=$d(!1),C=()=>{var D;k();const B=(D=p.editor)==null?void 0:D.getAttributes("link");y((B==null?void 0:B.href)||""),v(B!=null&&B.href?(B==null?void 0:B.target)==="_blank":f)},T=()=>{M(),y(""),v(f)},E=()=>{var B,D;T(),g===""?(B=p.editor)==null||B.chain().focus().extendMarkRange("link").unsetLink().run():(D=p.editor)==null||D.chain().focus().extendMarkRange("link").setLink({href:g,target:b?"_blank":null}).run()},N=B=>{B.key==="Enter"&&(B.preventDefault(),E())};og("edit-link",C,!1);const{resolvedClassNames:F,resolvedStyles:z}=fg({classNames:r,styles:i,props:t});return d.jsxs(zt,{trapFocus:!0,shadow:"md",withinPortal:!0,opened:w,onClose:T,offset:-44,zIndex:1e4,...c,children:[d.jsx(zt.Target,{children:d.jsx(Zl,{icon:l||yD,...h,"aria-label":p.labels.linkControlLabel,title:p.labels.linkControlLabel,onClick:C,active:(V=p.editor)==null?void 0:V.isActive("link"),ref:e,classNames:F,styles:z,className:s,style:o})}),d.jsx(zt.Dropdown,{...p.getStyles("linkEditorDropdown",m),children:d.jsxs("div",{...p.getStyles("linkEditor",m),children:[d.jsx(Ml,{placeholder:p.labels.linkEditorInputPlaceholder,"aria-label":p.labels.linkEditorInputLabel,type:"url",value:g,onChange:y,classNames:{input:p.getStyles("linkEditorInput",m).className},onKeyDown:N,rightSection:d.jsx(_r,{label:b?p.labels.linkEditorExternalLink:p.labels.linkEditorInternalLink,events:{hover:!0,focus:!0,touch:!0},withinPortal:!0,withArrow:!0,disabled:u,zIndex:1e4,children:d.jsx(Fr,{onClick:()=>v(B=>!B),"data-active":b||void 0,...p.getStyles("linkEditorExternalControl",m),children:d.jsx(PT,{style:{width:te(14),height:te(14)}})})})}),d.jsx($o,{variant:"default",onClick:E,...p.getStyles("linkEditorSave",m),children:p.labels.linkEditorSave})]})})]})});ec.classes=ir;ec.displayName="@mantine/tiptap/RichTextEditorLinkControl";const bD={},Rp=x.forwardRef((n,e)=>{const{popoverProps:t,colors:r,colorPickerProps:s,...o}=ie("RichTextEditorColorPickerControl",bD,n),{editor:i,labels:a,getStyles:l}=On(),[c,{toggle:u,close:f}]=$d(!1),[h,p]=x.useState("palette"),m=(i==null?void 0:i.getAttributes("textStyle").color)||"var(--mantine-color-text)",g=(v,w=!0)=>{(i==null?void 0:i.chain()).focus().setColor(v).run(),w&&f()},y=()=>{(i==null?void 0:i.chain()).focus().unsetColor().run(),f()},b=r.map((v,w)=>d.jsx(Gn,{component:"button",color:v,onClick:()=>g(v),size:26,radius:"xs",style:{cursor:"pointer"},title:a.colorPickerColorLabel(v),"aria-label":a.colorPickerColorLabel(v)},w));return d.jsxs(zt,{opened:c,withinPortal:!0,trapFocus:!0,onClose:f,...t,children:[d.jsx(zt.Target,{children:d.jsx(Vr,{...o,"aria-label":a.colorPickerControlLabel,title:a.colorPickerControlLabel,ref:e,onClick:u,children:d.jsx(Gn,{color:m,size:14})})}),d.jsxs(zt.Dropdown,{...l("linkEditorDropdown"),children:[h==="palette"&&d.jsx(Sl,{cols:7,spacing:2,children:b}),h==="colorPicker"&&d.jsx(Cl,{defaultValue:m,onChange:v=>g(v,!1),...s}),d.jsx(_r.Group,{closeDelay:200,children:d.jsxs(pl,{justify:"flex-end",gap:"xs",mt:"sm",children:[h==="palette"&&d.jsx(hn,{variant:"default",onClick:f,title:a.colorPickerCancel,"aria-label":a.colorPickerCancel,children:d.jsx(OT,{style:{width:te(16),height:te(16)}})}),d.jsx(hn,{variant:"default",onClick:y,title:a.colorPickerClear,"aria-label":a.colorPickerClear,children:d.jsx(Pp,{style:{width:te(16),height:te(16)}})}),h==="palette"?d.jsx(hn,{variant:"default",onClick:()=>p("colorPicker"),title:a.colorPickerColorPicker,"aria-label":a.colorPickerColorPicker,children:d.jsx(ET,{style:{width:te(16),height:te(16)}})}):d.jsx(hn,{variant:"default",onClick:()=>p("palette"),"aria-label":a.colorPickerPalette,title:a.colorPickerPalette,children:d.jsx(NT,{style:{width:te(16),height:te(16)}})}),h==="colorPicker"&&d.jsx(hn,{variant:"default",onClick:f,title:a.colorPickerSave,"aria-label":a.colorPickerSave,children:d.jsx(IT,{style:{width:te(16),height:te(16)}})})]})})]})]})});Rp.displayName="@mantine/tiptap/ColorPickerControl";const vD={},wD=x.forwardRef((n,e)=>{const{color:t,...r}=ie("RichTextEditorColorControl",vD,n),{editor:s,labels:o}=On(),i=(s==null?void 0:s.getAttributes("textStyle").color)||null,a=o.colorControlLabel(t);return d.jsx(Vr,{...r,active:i===t,"aria-label":a,title:a,onClick:()=>(s==null?void 0:s.chain()).focus().setColor(t).run(),ref:e,children:d.jsx(Gn,{color:t,size:14})})}),CD={},tc=Ne((n,e)=>{const t=ie("RichTextEditorControlsGroup",CD,n),{classNames:r,className:s,style:o,styles:i,vars:a,...l}=t,c=On();return d.jsx(ue,{ref:e,...c.getStyles("controlsGroup",{className:s,style:o,styles:i,classNames:r}),...l})});tc.classes=ir;tc.displayName="@mantine/tiptap/RichTextEditorControlsGroup";const kD={},nc=Ne((n,e)=>{const t=ie("RichTextEditorToolbar",kD,n),{classNames:r,className:s,style:o,styles:i,vars:a,sticky:l,stickyOffset:c,mod:u,...f}=t,h=On();return d.jsx(ue,{ref:e,mod:[{sticky:l},u],...h.getStyles("toolbar",{className:s,style:o,styles:i,classNames:r}),...f,__vars:{"--rte-sticky-offset":te(c)}})});nc.classes=ir;nc.displayName="@mantine/tiptap/RichTextEditorToolbar";const SD={withCodeHighlightStyles:!0,withTypographyStyles:!0},H=Ne((n,e)=>{const t=ie("RichTextEditor",SD,n),{classNames:r,className:s,style:o,styles:i,unstyled:a,vars:l,editor:c,withCodeHighlightStyles:u,withTypographyStyles:f,labels:h,children:p,...m}=t,g=Ae({name:"RichTextEditor",classes:ir,props:t,className:s,style:o,classNames:r,styles:i,unstyled:a,vars:l}),y=x.useMemo(()=>({...BM,...h}),[h]);return d.jsx(_M,{value:{editor:c,getStyles:g,labels:y,withCodeHighlightStyles:u,withTypographyStyles:f,unstyled:a},children:d.jsx(ue,{...g("root"),...m,ref:e,children:p})})});H.classes=ir;H.displayName="@mantine/tiptap/RichTextEditor";H.Content=Xl;H.Control=Vr;H.Toolbar=nc;H.ControlsGroup=tc;H.Bold=_T;H.Italic=zT;H.Strikethrough=VT;H.Underline=HT;H.ClearFormatting=WT;H.H1=KT;H.H2=GT;H.H3=JT;H.H4=QT;H.H5=XT;H.H6=ZT;H.BulletList=qT;H.OrderedList=YT;H.Link=ec;H.Unlink=UT;H.Blockquote=eD;H.AlignLeft=tD;H.AlignRight=nD;H.AlignCenter=rD;H.AlignJustify=sD;H.Superscript=iD;H.Subscript=oD;H.Code=aD;H.CodeBlock=lD;H.ColorPicker=Rp;H.Color=wD;H.Highlight=cD;H.Hr=uD;H.UnsetColor=dD;H.Undo=fD;H.Redo=hD;H.TaskList=pD;H.TaskListSink=mD;H.TaskListLift=gD;const MD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,TD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,DD=ct.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Zn({find:MD,type:this.type})]},addPasteRules(){return[er({find:TD,type:this.type})]}}),ED=/^\s*>\s$/,OD=gt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ms({find:ED,type:this.type})]}}),ND=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ID=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,AD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,PD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,RD=ct.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Zn({find:ND,type:this.type}),Zn({find:AD,type:this.type})]},addPasteRules(){return[er({find:ID,type:this.type}),er({find:PD,type:this.type})]}}),jD=gt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Re(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ad=ct.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=ni(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),ld=/^\s*([-+*])\s$/,LD=gt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jD.name,this.editor.getAttributes(ad.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ms({find:ld,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ms({find:ld,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ad.name),editor:this.editor})),[n]}}),FD=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,$D=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,BD=ct.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Zn({find:FD,type:this.type})]},addPasteRules(){return[er({find:$D,type:this.type})]}}),_D=/^```([a-z]+)?[\s\n]$/,zD=/^~~~([a-z]+)?[\s\n]$/,HD=gt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(i=>i.startsWith(t)).map(i=>i.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Re(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(de.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Ea({find:_D,type:this.type,getAttributes:n=>({language:n[1]})}),Ea({find:zD,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new St({key:new Tn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!t||!o)return!1;const{tr:i,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(ce.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),n.dispatch(i),!0}}})]}}),VD=gt.create({name:"doc",topNode:!0,content:"block+"});function WD(n={}){return new St({view(e){return new UD(e,n)}})}class UD{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,i;if(!s||s==document.body&&getComputedStyle(s).position=="static")o=-pageXOffset,i=-pageYOffset;else{let a=s.getBoundingClientRect();o=a.left-s.scrollLeft,i=a.top-s.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let i=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Dh(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const qD=lt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[WD(this.options)]}});class Le extends de{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Le.valid(r)?new Le(r):de.near(r)}content(){return U.empty}eq(e){return e instanceof Le&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Le(e.resolve(t.pos))}getBookmark(){return new rc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!YD(e)||!KD(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Le.valid(e))return e;let s=e.pos,o=null;for(let i=e.depth;;i--){let a=e.node(i);if(t>0?e.indexAfter(i)<a.childCount:e.index(i)>0){o=a.child(t>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;s+=t;let l=e.doc.resolve(s);if(Le.valid(l))return l}for(;;){let i=t>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!ne.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=i,s+=t;let a=e.doc.resolve(s);if(Le.valid(a))return a}return null}}}Le.prototype.visible=!1;Le.findFrom=Le.findGapCursorFrom;de.jsonID("gapcursor",Le);class rc{constructor(e){this.pos=e}map(e){return new rc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Le.valid(t)?new Le(t):de.near(t)}}function YD(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function KD(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function GD(){return new St({props:{decorations:ZD,createSelectionBetween(n,e,t){return e.pos==t.pos&&Le.valid(t)?new Le(t):null},handleClick:QD,handleKeyDown:JD,handleDOMEvents:{beforeinput:XD}}})}const JD=pp({ArrowLeft:zs("horiz",-1),ArrowRight:zs("horiz",1),ArrowUp:zs("vert",-1),ArrowDown:zs("vert",1)});function zs(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof ce){if(!o.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Le.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Le(c))),!0):!1}}function QD(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Le.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&ne.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Le(r))),!0)}function XD(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Le))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=j.empty;for(let i=r.length-1;i>=0;i--)s=j.from(r[i].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new U(s,0,0));return o.setSelection(ce.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function ZD(n){if(!(n.selection instanceof Le))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ve.create(n.doc,[vt.widget(n.selection.head,e,{key:"gapcursor"})])}const eE=lt.create({name:"gapCursor",addProseMirrorPlugins(){return[GD()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=he(Z(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),tE=gt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Re(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const f=l.filter(h=>a.includes(h.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),nE=gt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Re(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ea({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var ko=200,qe=function(){};qe.prototype.append=function(e){return e.length?(e=qe.from(e),!this.length&&e||e.length<ko&&this.leafAppend(e)||this.length<ko&&e.leafPrepend(this)||this.appendInner(e)):this};qe.prototype.prepend=function(e){return e.length?qe.from(e).append(this):this};qe.prototype.appendInner=function(e){return new rE(this,e)};qe.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?qe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};qe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qe.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};qe.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(e(o,i))},t,r),s};qe.from=function(e){return e instanceof qe?e:e&&e.length?new jp(e):qe.empty};var jp=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=ko)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=ko)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(qe);qe.empty=new jp([]);var rE=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qe);const sE=500;class Dt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){s||(s=this.remapping(r,h+1),o=s.maps.length),o--,u.push(f);return}if(s){u.push(new jt(f.map));let p=f.step.map(s.slice(o)),m;p&&i.maybeStep(p).doc&&(m=i.mapping.maps[i.mapping.maps.length-1],c.push(new jt(m,void 0,void 0,c.length+u.length))),o--,m&&s.appendMap(m,o)}else i.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(o)):f.selection,l=new Dt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,t,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new jt(e.mapping.maps[u],f,t),p;(p=l&&l.merge(h))&&(h=p,u?o.pop():a=a.slice(0,a.length-1)),o.push(h),t&&(i++,t=void 0),s||(l=h)}let c=i-r.depth;return c>iE&&(a=oE(a,c),i-=c),new Dt(a.append(o),i)}remapping(e,t){let r=new kr;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},e,t),r}addMaps(e){return this.eventCount==0?this:new Dt(this.items.append(e.map(t=>new jt(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let l=t;this.items.forEach(h=>{let p=o.getMirror(--l);if(p==null)return;i=Math.min(i,p);let m=o.maps[p];if(h.step){let g=e.steps[p].invert(e.docs[p]),y=h.selection&&h.selection.map(o.slice(l+1,p));y&&a++,r.push(new jt(m,g,y))}else r.push(new jt(m))},s);let c=[];for(let h=t;h<i;h++)c.push(new jt(o.maps[h]));let u=this.items.slice(0,s).append(c).append(r),f=new Dt(u,a);return f.emptyItemCount()>sE&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=e)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=i.selection&&i.selection.map(t.slice(r));u&&o++;let f=new jt(c.invert(),l,u),h,p=s.length-1;(h=s.length&&s[p].merge(f))?s[p]=h:s.push(f)}}else i.map&&r--},this.items.length,0),new Dt(qe.from(s.reverse()),o)}}Dt.empty=new Dt(qe.empty,0);function oE(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class jt{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new jt(t.getMap().invert(),t,this.selection)}}}class un{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const iE=20;function aE(n,e,t,r){let s=t.getMeta(Yn),o;if(s)return s.historyState;t.getMeta(uE)&&(n=new un(n.done,n.undone,null,0,-1));let i=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(i&&i.getMeta(Yn))return i.getMeta(Yn).redo?new un(n.done.addTransform(t,void 0,r,Xs(e)),n.undone,cd(t.mapping.maps),n.prevTime,n.prevComposition):new un(n.done,n.undone.addTransform(t,void 0,r,Xs(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!i&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!lE(t,n.prevRanges)),c=i?Fi(n.prevRanges,t.mapping):cd(t.mapping.maps);return new un(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,Xs(e)),Dt.empty,c,t.time,a??n.prevComposition)}else return(o=t.getMeta("rebased"))?new un(n.done.rebased(t,o),n.undone.rebased(t,o),Fi(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new un(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Fi(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function lE(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function cd(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,i)=>e.push(o,i));return e}function Fi(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function cE(n,e,t){let r=Xs(e),s=Yn.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),l=new un(t?a:o.remaining,t?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(Yn,{redo:t,historyState:l})}let $i=!1,ud=null;function Xs(n){let e=n.plugins;if(ud!=e){$i=!1,ud=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){$i=!0;break}}return $i}const Yn=new Tn("history"),uE=new Tn("closeHistory");function dE(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new St({key:Yn,state:{init(){return new un(Dt.empty,Dt.empty,null,0,-1)},apply(e,t,r){return aE(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?Fp:r=="historyRedo"?$p:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function Lp(n,e){return(t,r)=>{let s=Yn.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=cE(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const Fp=Lp(!1,!0),$p=Lp(!0,!0),fE=lt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Fp(n,e),redo:()=>({state:n,dispatch:e})=>$p(n,e)}},addProseMirrorPlugins(){return[dE(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),hE=gt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Re(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:s}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):cM(t)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(ce.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(ne.create(i.doc,c.pos)):i.setSelection(ce.create(i.doc,c.pos));else{const f=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(i.insert(u,f),i.setSelection(ce.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$M({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),pE=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,mE=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gE=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,yE=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,xE=ct.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Zn({find:pE,type:this.type}),Zn({find:gE,type:this.type})]},addPasteRules(){return[er({find:mE,type:this.type}),er({find:yE,type:this.type})]}}),bE=gt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Re(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vE=gt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Re(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dd=ct.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=ni(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),fd=/^(\d+)\.\s$/,wE=gt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Re(this.options.HTMLAttributes,t),0]:["ol",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vE.name,this.editor.getAttributes(dd.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ms({find:fd,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ms({find:fd,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(dd.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),CE=gt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),kE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,SE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ME=ct.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Zn({find:kE,type:this.type})]},addPasteRules(){return[er({find:SE,type:this.type})]}}),TE=gt.create({name:"text",group:"inline"}),DE=lt.create({name:"starterKit",addExtensions(){var n,e,t,r,s,o,i,a,l,c,u,f,h,p,m,g,y,b;const v=[];return this.options.bold!==!1&&v.push(RD.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&v.push(OD.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&v.push(LD.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&v.push(BD.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(HD.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&v.push(VD.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&v.push(qD.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&v.push(eE.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(tE.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(nE.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&v.push(fE.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&v.push(hE.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&v.push(xE.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&v.push(bE.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&v.push(wE.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&v.push(CE.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&v.push(ME.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&v.push(TE.configure((b=this.options)===null||b===void 0?void 0:b.text)),v}}),EE=ct.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),OE=lt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),NE=ct.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(n){return n!=="super"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sup",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setSuperscript:()=>({commands:n})=>n.setMark(this.name),toggleSuperscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSuperscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),IE=ct.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(n){return n!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sub",Re(this.options.HTMLAttributes,n),0]},addCommands(){return{setSubscript:()=>({commands:n})=>n.setMark(this.name),toggleSubscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSubscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}});function AE({content:n,onChange:e}){const t=eT({extensions:[DE,EE,NE,IE,DD,OE.configure({types:["heading","paragraph"]})],content:n,onUpdate:({editor:s})=>{const o=s.getHTML();o!==n&&e(o)},autofocus:!1}),r=Ee.useRef(!1);return x.useEffect(()=>{t&&n&&!r.current&&(t.commands.setContent(n,!1),r.current=!0)},[t,n]),x.useEffect(()=>()=>{t&&t.destroy()},[t]),d.jsx(zr,{title:"  ",children:d.jsx(ws,{children:d.jsxs(H,{editor:t,children:[d.jsxs(H.Toolbar,{sticky:!0,stickyOffset:60,children:[d.jsxs(H.ControlsGroup,{children:[d.jsx(H.Bold,{}),d.jsx(H.Italic,{}),d.jsx(H.Underline,{}),d.jsx(H.Strikethrough,{}),d.jsx(H.ClearFormatting,{}),d.jsx(H.Highlight,{}),d.jsx(H.Code,{})]}),d.jsxs(H.ControlsGroup,{children:[d.jsx(H.H1,{}),d.jsx(H.H2,{}),d.jsx(H.H3,{}),d.jsx(H.H4,{})]}),d.jsxs(H.ControlsGroup,{children:[d.jsx(H.Blockquote,{}),d.jsx(H.Hr,{}),d.jsx(H.BulletList,{}),d.jsx(H.OrderedList,{}),d.jsx(H.Subscript,{}),d.jsx(H.Superscript,{})]}),d.jsxs(H.ControlsGroup,{children:[d.jsx(H.Link,{}),d.jsx(H.Unlink,{})]}),d.jsxs(H.ControlsGroup,{children:[d.jsx(H.AlignLeft,{}),d.jsx(H.AlignCenter,{}),d.jsx(H.AlignJustify,{}),d.jsx(H.AlignRight,{})]}),d.jsxs(H.ControlsGroup,{children:[d.jsx(H.Undo,{}),d.jsx(H.Redo,{})]})]}),d.jsx(H.Content,{})]})})})}const PE={id:0,name:"",settings:{showPayment:!0,showVat:!0,showDiscount:!0,showFiles:!0,showShipping:!0,addItem:!0,acceptNegativeQTY:!0,price:"PPrice",showFrom:!0,showTo:!0,showMultipleStores:!0,showClient:!0}},An={showFiles:!0,showPayment:!0,showVat:!0,showDiscount:!0,showShipping:!0,addItem:!1,acceptNegativeQTY:!1,showClient:!0,clientType:"",isSupplier:!1,price:"SEPrice",editPrice:!1,showStore:!0,showMultipleStores:!0},Pn={showFiles:!0,showPayment:!0,showVat:!0,showDiscount:!0,showShipping:!0,addItem:!0,acceptNegativeQTY:!1,showClient:!0,clientType:"",isSupplier:!0,price:"PUPrice",editPrice:!0,showStore:!0,showMultipleStores:!0},Hs={showFiles:!0,showPayment:!1,showVat:!1,showDiscount:!1,showShipping:!0,addItem:!1,acceptNegativeQTY:!1,showClient:!1,price:"COPrice",editPrice:!1,showStore:!0,showMultipleStores:!1},Vs={showFiles:!0,showPayment:!1,showVat:!1,showDiscount:!1,showShipping:!1,addItem:!0,acceptNegativeQTY:!1,showClient:!1,price:"STPrice",editPrice:!1,showStore:!1,showMultipleStores:!1},RE={211:{id:211,name:" ",settings:An},212:{id:212,name:" ",settings:An},213:{id:213,name:" ",settings:An},21:{id:21,name:" ",settings:An},22:{id:22,name:" ",settings:An},221:{id:221,name:" ",settings:An},23:{id:23,name:" ",settings:An},111:{id:111,name:" ",settings:Pn},112:{id:112,name:" ",settings:Pn},113:{id:113,name:" ",settings:Pn},11:{id:11,name:" ",settings:Pn},12:{id:12,name:" ",settings:Pn},121:{id:121,name:" ",settings:Pn},13:{id:13,name:" ",settings:Pn},31:{id:31,name:" ",settings:{...Hs}},32:{id:32,name:" ",settings:{...Hs}},321:{id:321,name:" ",settings:Hs},33:{id:33,name:" ",settings:{...Hs,showStore:!1,showShipping:!1,addItem:!0,acceptNegativeQTY:!0}},41:{id:41,name:"  ",settings:Vs},42:{id:42,name:"  ",settings:Vs},421:{id:421,name:" ",settings:Vs},43:{id:43,name:" ",settings:Vs}},jE=n=>RE[n]||PE,CO=()=>{const{id:n}=cm(),e=vd(),[t,r]=x.useState({open:!1,type:"success",text:""}),{loading:s,invoiceData:o,error:i,refetchInvoiceData:a}=i1(n),l=x.useMemo(()=>jE(o==null?void 0:o.Order_Type),[o==null?void 0:o.Order_Type]),{title:c,updateTitle:u}=um();x.useEffect(()=>{const O=o!=null&&o.StoreName?`( ${o.StoreName} ) `:"",ae=(l==null?void 0:l.name)||"";return u(`${O}${ae}`),()=>{u("")}},[o]);const f=()=>{r({...t,open:!1})},h=Mo({defaultValues:{invoice_id:"",ClientID:"",customerName:"",customerEmail:"",customerPhone:"",customerAddress:"",MobileNumber:"",dueDate:new Date,invDate:new Date,termsAndConditions:"",SupplierInvoiceNumber:"",Comment:"",FTStore:"",shipping_charge_on_order:"",shipping_service_id:0,shipping_tracking_number:""}}),{handleSubmit:p,setValue:m,control:g,watch:y,reset:b}=h,[v,w]=x.useState([]),[k,M]=x.useState(""),[C,T]=x.useState(0),[E,N]=x.useState(0),[F,z]=x.useState(!1),V=x.useMemo(()=>({subTotal:0,taxesAmount:0,discountAmount:0,totalAmount:0}),[]),[B,D]=x.useState(V),P=lc({control:g,name:"discountValue"}),R=lc({control:g,name:"discountType"});x.useEffect(()=>{const O=v.reduce((ae,ve)=>ve.Quantity!=null&&ve.unitPrice!=null?ae+ve.Quantity*ve.unitPrice:ae,0);N(O),D(ae=>({...ae,subTotal:O}))},[v]),x.useEffect(()=>{o&&(m("invoice_id",o.invoice_id||""),m("ClientID",o.ClientID||""),m("customerName",o.customerName||""),m("customerEmail",o.customerEmail||""),m("customerPhone",o.customerPhone||""),m("customerAddress",o.customerAddress||""),m("MobileNumber",o.MobileNumber||""),m("dueDate",o.due_date?new Date(o.due_date):new Date),m("invDate",o.date?new Date(o.date):new Date),m("termsAndConditions",o.termsAndConditions||""),m("SupplierInvoiceNumber",o.SupplierInvoiceNumber||""),m("Comment",o.Comment||""),m("FTStore",o.FTStore||""),m("shipping_charge_on_order",o.shipping_charge_on_order||""),m("shipping_service_id",o.shipping_service_id||""),m("shipping_tracking_number",o.shipping_tracking_number||""),M(o.Note||"<p></p><p></p><p></p><p></p><p></p>"),D({subTotal:o.subTotal||0,taxesAmount:o.Tax||0,discountAmount:o.dis||0,totalAmount:o.Total||0}),T(o.Tax||0),o.order_entries&&w(o.order_entries),(o.FTStore==="0"||o.FTStore===0)&&z(!0))},[o]);const A=x.useCallback(O=>{w(O)},[]);x.useEffect(()=>{if(!P)return;const O={...B};R==="percentage"?O.discountAmount=(O.subTotal+O.taxesAmount)*(parseFloat(P)/100):O.discountAmount=parseFloat(P),O.totalAmount=O.subTotal+O.taxesAmount-O.discountAmount,D(O)},[P,R]);const _=x.useCallback(O=>{m("dueDate",O)},[m]),Y=O=>{console.error(O),r({open:!0,type:"error",text:O})},$=async O=>{try{if(l.settings.showClient&&!O.ClientID){Y("  ");return}if(l.settings.showStore&&!F&&!O.FTStore){Y("  ");return}if(v.filter(J=>J.id!==-1).length===0){Y("    ");return}if(F&&v.filter(ee=>ee.id!==-1).some(ee=>!ee.LStoreID)){Y("    ");return}const ve={id:n,ClientID:O.ClientID,invoice_id:O.invoice_id,FTStore:F?"0":O.FTStore||"",subTotal:B.subTotal,Tax:C,dis:B.discountAmount,Total:B.totalAmount,date:Zr(O.invDate,"yyyyMMdd"),due_date:Zr(O.dueDate,"yyyyMMdd"),Note:k,Comment:O.Comment,SupplierInvoiceNumber:O.SupplierInvoiceNumber,shipping_charge_on_order:O.shipping_charge_on_order||0,shipping_service_id:O.shipping_service_id,shipping_tracking_number:O.shipping_tracking_number||"",balance:O.balance||0,Paid:O.paid||0,delivery_date:O.delivery_date?Zr(O.delivery_date,"yyyyMMdd"):null,status:O.status,closed:O.closed,order_entries:v.map(J=>({BarCodeNo:J.BarCodeNo,CategoryID:J.CategoryID,DepartmentID:J.DepartmentID,InvoiceEnteryID:J.InvoiceEnteryID,ItemID:J.ItemID,Quantity:J.Quantity,name:J.name,offerPrice:J.offerPrice,unitPrice:J.unitPrice,UnitID:J.UnitID,Supplier_Item_ID:J.Supplier_Item_ID,Cost:J.Cost,LStoreID:J.LStoreID}))};if(await km(ve))r({open:!0,type:"success",text:"   "}),await a();else throw new Error("   ")}catch(ae){r({open:!0,type:"error",text:ae.message||"    "})}};return d.jsxs(dm,{children:[s?d.jsx($e,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:d.jsx(Va,{})}):d.jsx(bm,{...h,children:d.jsx("form",{onSubmit:p($),children:d.jsxs(W,{container:!0,spacing:3,children:[d.jsx(W,{item:!0,xs:12,children:d.jsx(Uf,{handleDueDateChange:_,invoiceData:o,orderTypeConfig:l,setShowStores:z,showStores:F})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(D1,{orderEntries:o.order_entries,onOrderEntriesChange:A,setValue:m,ClientID:o==null?void 0:o.ClientID,orderTypeConfig:l,showStores:F})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(E1,{discountAmount:B.discountAmount,subTotal:E||0,setTaxAmount:T,orderTypeConfig:l})}),l.settings.showDiscount&&d.jsx(W,{item:!0,xs:12,children:d.jsx(O1,{control:g,setValue:m,subTotal:E||0,currentDiscount:B.discountAmount||0})}),l.settings.showPayment&&d.jsx(W,{item:!0,xs:12,children:d.jsx(Zf,{control:g,setValue:m,watch:y,clientId:o==null?void 0:o.ClientID,invoiceId:o==null?void 0:o.invoice_id})}),l.settings.showShipping&&d.jsx(W,{item:!0,xs:12,children:d.jsx(B1,{invoiceData:o,setInvoiceValue:m})}),d.jsx(W,{item:!0,xs:12,children:d.jsx(AE,{content:k||"<p></p><p></p><p></p><p></p><p></p>",onChange:M})}),d.jsx(W,{item:!0,xs:12,children:d.jsxs($e,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[d.jsx(Fm,{resourceId:n,entityName:"",onDelete:()=>e(-1),resource:"invoice"}),d.jsxs($e,{children:[d.jsx(Qe,{color:"secondary",variant:"outlined",onClick:()=>e(-1),sx:{mr:2},children:""}),d.jsx(Qe,{color:"primary",variant:"contained",type:"submit",children:""})]})]})})]})})}),d.jsx(Lm,{open:t.open,type:t.type,text:t.text,handleClose:f})]})};export{CO as default};
