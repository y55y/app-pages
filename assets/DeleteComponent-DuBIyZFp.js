import{r as s,j as e,n as i}from"./index-BVdUMQzQ.js";import{d as y}from"./fetchdata-EOtbV5TB.js";import{M as S}from"./MessageSnackbar-Dd6YaDgZ.js";import{D as I,a as O,b as E}from"./DialogContent-8g-uaxVZ.js";import{D as M}from"./DialogTitle-De5HDiQS.js";import{D as R}from"./DialogContentText-BqtvGEMb.js";import{C as T}from"./CircularProgress-CEBJzR_F.js";const P=({resourceId:c,entityName:m,onDelete:d,size:g="large",disabled:C=!1,variant:b="outlined",resource:p})=>{const[h,l]=s.useState(!1),[t,u]=s.useState(!1),[r,o]=s.useState({open:!1,type:"error",text:""}),[f,n]=s.useState(!1),D=s.useCallback(()=>{l(!0)},[]),x=s.useCallback(()=>{t||(l(!1),f||o(a=>({...a,open:!1})))},[t,f]),j=s.useCallback(()=>{o(a=>({...a,open:!1})),n(!1)},[]),k=s.useCallback(async()=>{u(!0);try{const a=await y(c,p);o({open:!0,type:"success",text:"تم الحذف بنجاح"}),d({success:!0,data:a}),n(!0)}catch(a){o({open:!0,type:"error",text:a.message||"حدث خطأ أثناء الحذف"}),n(!0)}finally{u(!1),l(!1)}},[c,p,d]);return e.jsxs("div",{dir:"rtl",children:[e.jsx(i,{variant:b,size:g,color:"error",onClick:D,disabled:t||C,children:"حذف"}),e.jsxs(I,{open:h,onClose:x,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(M,{id:"alert-dialog-title",children:"تأكيد الحذف"}),e.jsx(O,{children:e.jsxs(R,{id:"alert-dialog-description",children:["هل أنت متأكد من حذف ",m,"؟"]})}),e.jsxs(E,{children:[e.jsx(i,{onClick:x,color:"primary",disabled:t,children:"إلغاء"}),e.jsx(i,{onClick:k,color:"error",autoFocus:!0,disabled:t,startIcon:t?e.jsx(T,{size:20}):null,children:t?"جاري الحذف...":"نعم، احذف"})]})]}),e.jsx(S,{open:r.open,type:r.type,text:r.text,handleClose:j})]})};export{P as D};
