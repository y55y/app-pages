import{r as i,j as d,B as E}from"./index-B0WSqbsu.js";import{A as I}from"./Autocomplete-ClZbIi0_.js";import{T as C}from"./TextField-cICNou46.js";const j=e=>{const[g,l]=i.useState(""),[c,s]=i.useState(null),o=i.useRef(null),[h,u]=i.useState(!1);i.useEffect(()=>{o.current&&o.current.focus()},[]),i.useEffect(()=>{l(e.value||""),s(e.options.find(n=>e.getOptionLabel(n)===e.value)||null)},[e.value,e.options,e.getOptionLabel]);const m=(n,t)=>{const a=t?e.getOptionLabel(t):"";l(a),s(t),e.onValueChange(a,t,e.rowIndex,e.column.colId),e.onValueChange&&(console.log(a),e.onCategoryChange(t,e.rowIndex)),x(a,t),u(!0),t&&(e.api.stopEditing(),e.api.setFocusedCell(e.rowIndex,e.column.colId),u(!1))},x=(n,t)=>{const a={...e.data,[e.column.colId]:n};e.additionalFields&&e.additionalFields.forEach(f=>{a[f]=t?t[f]:""}),e.api.applyTransaction({update:[a]})},r=n=>{n.key==="Enter"?(n.preventDefault(),c&&h&&(e.api.stopEditing(),e.api.setFocusedCell(e.rowIndex,e.column.colId),u(!1))):n.key==="Escape"&&e.api.stopEditing(!0)};return d.jsx(E,{sx:{display:"flex",alignItems:"center",width:"100%",minHeight:"110%"},children:d.jsx(I,{options:e.options,getOptionLabel:e.getOptionLabel,value:c,onChange:m,inputValue:g,onInputChange:(n,t)=>{l(t)},renderInput:n=>d.jsx(C,{...n,size:"small",fullWidth:!0,inputRef:o,onKeyDown:r}),sx:{width:"100%",height:"100%"},disableCloseOnSelect:!0,disableClearable:!0})})};export{j as A};
