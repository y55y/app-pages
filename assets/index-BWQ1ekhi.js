import{f as V,i as B,j as e,h as k,T as $,G as r,m as v,k as i,D as z,S as d,aw as W,q as b,r as x,ax as te,z as f,ay as D,n as S,az as se,aA as le,I as ae,B as R,P as H,O as ce,K as de,aB as oe,M as xe,aC as he,U as je}from"./index-XVM9mx7l.js";import{S as C}from"./SubCard-oDVu242g.js";import{d as U}from"./ReceiptTwoTone-Xi4AY1PN.js";import{T as X,a as J,b as T,c as Y}from"./TableRow-DGgN1CTR.js";import{T as Z}from"./TableHead--Fy_cOtF.js";import{T as t}from"./TableCell-FjOVBQF9.js";import{R as ue}from"./index-EJFEk-1R.js";import{F as me,T as pe,a as ge,b as ve,c as be,d as ye,e as fe,f as Ce,g as Te,h as we}from"./LocalShippingTwoTone-BttkyA5W.js";import{i as _e}from"./invoice-CFHbvaz1.js";import{D as Se,a as Re,b as Ie}from"./DialogContent-FwKKfc-z.js";import{T as q}from"./TextField-DYZP-4er.js";import{d as Pe}from"./DescriptionTwoTone-hlzhwGy8.js";import{C as $e}from"./CircularProgress-nxJx_2CH.js";import{T as ke,a as M}from"./Tabs-BK4vrhAw.js";import"./DialogTitle-Cmfixd_M.js";import"./FormHelperText-DqzDUD1o.js";import"./KeyboardArrowRight-2p2ScMJN.js";var O={},He=B;Object.defineProperty(O,"__esModule",{value:!0});var ee=O.default=void 0,Me=He(V()),Q=e;ee=O.default=(0,Me.default)([(0,Q.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 2v3H4V5zM4 21V10h16v11z"},"0"),(0,Q.jsx)("path",{d:"M4 5.01h16V8H4z",opacity:".3"},"1")],"CalendarTodayTwoTone");var E={},Ae=B;Object.defineProperty(E,"__esModule",{value:!0});var re=E.default=void 0,ze=Ae(V()),K=e;re=E.default=(0,ze.default)([(0,K.jsx)("path",{d:"m20 8-8 5-8-5v10h16zm0-2H4l8 4.99z",opacity:".3"},"0"),(0,K.jsx)("path",{d:"M4 20h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2M20 6l-8 4.99L4 6zM4 8l8 5 8-5v10H4z"},"1")],"EmailTwoTone");var F={},De=B;Object.defineProperty(F,"__esModule",{value:!0});var ie=F.default=void 0,Ve=De(V()),G=e;ie=F.default=(0,Ve.default)([(0,G.jsx)("path",{d:"M7 4h10v14H7z",opacity:".3"},"0"),(0,G.jsx)("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3m-2 20h-4v-1h4zm3-3H7V4h10z"},"1")],"PhoneAndroidTwoTone");const I={width:15,height:15,verticalAlign:"text-top",mr:.5,mt:.25},Be=(n,s)=>{switch(n){case 1:return{label:"غير مدفوع",color:"error.main",chipcolor:b(s.palette.error.light,.2)};case 2:return{label:"مدفوع جزئي",color:"#fb6300",chipcolor:b(s.palette.warning.light,.5)};case 3:return{label:"مدفوع",color:"success.dark",chipcolor:b(s.palette.success.light,.5)};default:return{label:"غير مدفوع",color:"error.main",chipcolor:b(s.palette.error.light,.2)}}},Oe=(n,s)=>{switch(n){case 4:return{closedlabel:"تحت التسليم",closedcolor:"#fb6300",closedchipcolor:b(s.palette.warning.light,.5)};case 5:return{closedlabel:"مستلم",closedcolor:"success.dark",closedchipcolor:b(s.palette.success.light,.5)};default:return{closedlabel:"لم يتم الشحن",closedcolor:"error.main",closedchipcolor:b(s.palette.error.light,.2)}}},Ee=({invoiceData:n})=>{const s=k(),a=n.order_entries.reduce((l,u)=>l+u.Quantity*u.unitPrice,0),{label:h,color:c,chipcolor:j}=Be(n.payment_status,s),{closedlabel:w,closedcolor:p,closedchipcolor:g}=Oe(n.closed,s),y={borderColor:s.palette.mode===$.DARK?"divider":"primary.light"};return e.jsxs(r,{container:!0,spacing:v,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(C,{title:"المورد",secondary:e.jsxs(i,{variant:"subtitle1",children:["منشاء في ",n.date]}),children:e.jsxs(r,{container:!0,spacing:v,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,children:e.jsxs(i,{variant:"body2",children:[e.jsx(U,{sx:I})," ",n.SupplierInvoiceNumber]})}),e.jsx(r,{item:!0,children:e.jsxs(i,{variant:"body2",children:[e.jsx(ee,{sx:I})," ",n.supplier_name]})}),e.jsx(r,{item:!0,children:e.jsxs(i,{variant:"body2",children:[e.jsx(ie,{sx:I})," ",n.MobileNumber]})}),e.jsx(r,{item:!0,children:e.jsxs(i,{variant:"body2",children:[e.jsx(re,{sx:I})," ",n.email]})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(z,{sx:y})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(d,{spacing:2,children:[e.jsx(i,{variant:"h4",children:"تفاصيل الدفع"}),e.jsxs(d,{spacing:0,children:[e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"Transaction ID :"}),e.jsx(i,{variant:"body2",children:n.SupplierInvoiceNumber})]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"Amount :"}),e.jsxs(i,{variant:"body2",children:["$",n.Paid]})]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"Balance :"}),e.jsxs(i,{variant:"body2",children:["$",n.balance]})]})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(d,{spacing:2,children:[e.jsx(i,{variant:"h4",children:"تفاصيل الشحن"}),e.jsxs(d,{spacing:0,children:[e.jsxs(i,{variant:"h6",sx:{mb:1},children:["الناقل: ",n.store]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"Due Date :"}),e.jsx(i,{variant:"body2",children:n.ship_date})]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"Delivery Date :"}),e.jsx(i,{variant:"body2",children:n.delivery_date||"N/A"})]})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(d,{spacing:1,sx:{mt:{xs:0,md:3}},children:[e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"حالة التسليم :"}),e.jsx(W,{label:w,size:"small",sx:{bgcolor:g,color:p}})]}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(i,{variant:"subtitle1",children:"حالة الدفع :"}),e.jsx(W,{label:h,size:"small",sx:{bgcolor:j,color:c}})]})]})})]})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(C,{title:"المنتجات",content:!1,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(X,{children:e.jsxs(J,{children:[e.jsx(Z,{children:e.jsxs(T,{children:[e.jsx(t,{align:"center",children:"رقم المنتج"}),e.jsx(t,{align:"center",children:"كود المنتج"}),e.jsx(t,{align:"center",children:"الاسم"}),e.jsx(t,{align:"center",children:"الكمية"}),e.jsx(t,{align:"center",children:"التكلفة"}),e.jsx(t,{align:"center",children:"الاجمالي"}),e.jsx(t,{align:"center",children:"سعر البيع"}),e.jsx(t,{align:"center",children:"النسبة"})]})}),e.jsx(Y,{children:n.order_entries.length===0?e.jsx(T,{children:e.jsx(t,{colSpan:8,align:"center",children:e.jsx(i,{variant:"body2",color:"textSecondary",children:"لا يوجد اصناف مضافة في الفاتورة"})})}):n.order_entries.map((l,u)=>e.jsxs(T,{children:[e.jsx(t,{align:"center",children:l.BarCodeNo}),e.jsx(t,{align:"center",children:l.Supplier_Item_ID}),e.jsxs(t,{align:"center",children:[e.jsx(i,{variant:"subtitle1",children:l.name}),e.jsx(i,{variant:"body2",children:l.DepartmentName})]}),e.jsx(t,{align:"center",children:l.QuantityOnOrder}),e.jsx(t,{align:"center",children:l.Cost}),e.jsx(t,{align:"center",sx:{pr:3},children:`${l.Quantity*l.unitPrice}`}),e.jsx(t,{align:"center",children:l.offerPrice}),e.jsxs(t,{align:"center",children:["%",parseInt((l.offerPrice-l.Cost)/l.offerPrice*100)," "]})]},u))})]})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(C,{sx:{mx:3,mb:3,bgcolor:s.palette.mode===$.DARK?"dark.main":"primary.light"},children:e.jsx(r,{container:!0,justifyContent:"flex-end",spacing:v,children:e.jsx(r,{item:!0,sm:6,md:4,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"subtitle1",children:"الاجمالي الفرعي :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"body2",children:a})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"subtitle1",children:"الخصم :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"body2",children:n.discount})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"subtitle1",children:"الضريبة :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"body2",children:n.tax})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(z,{sx:{bgcolor:"dark.main"}})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",color:"primary",variant:"subtitle1",children:"الاجمالي :"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",color:"primary",variant:"subtitle1",children:n.total})})]})})]})})})})})]})})})]})},Fe=({invoiceData:n})=>{const s=k(),a=x.useRef(null),h=n.order_entries.reduce((c,j)=>c+j.QuantityOnOrder,0);return e.jsxs(r,{container:!0,justifyContent:"center",spacing:v,children:[e.jsx(r,{item:!0,xs:12,md:10,lg:8,ref:a,sx:{direction:"ltr"},children:e.jsx(C,{darkTitle:!0,title:`سند استلام فاتورة مشتريات #${n.invoice_id}`,secondary:e.jsx(te,{}),children:e.jsxs(r,{container:!0,spacing:v,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:v,children:[e.jsx(r,{item:!0,sm:5,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"المورد :"})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:0,children:[e.jsx(r,{item:!0,xs:4,children:e.jsx(i,{variant:"body2",children:"الاسم :"})}),e.jsx(r,{item:!0,xs:8,children:e.jsx(i,{variant:"body2",children:n.supplier_name})}),e.jsx(r,{item:!0,xs:4,sx:{my:.5},children:e.jsx(i,{variant:"body2",children:"الهاتف :"})}),e.jsx(r,{item:!0,xs:8,sx:{my:.5},children:n.MobileNumber}),e.jsx(r,{item:!0,xs:4,children:e.jsx(i,{variant:"body2",children:"الايميل :"})}),e.jsx(r,{item:!0,xs:8,children:e.jsx(i,{variant:"body2",component:f,to:"#",children:n.email})})]})})]})}),e.jsx(r,{item:!0,sm:4,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"تفاصيل الفاتورة :"})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:0,children:[e.jsx(r,{item:!0,xs:4,children:e.jsx(i,{variant:"body2",children:"التاريخ :"})}),e.jsx(r,{item:!0,xs:8,children:e.jsx(i,{variant:"body2",children:n.date})}),e.jsx(r,{item:!0,xs:4,children:e.jsx(i,{variant:"body2",children:"الفاتورة :"})}),e.jsx(r,{item:!0,xs:8,children:e.jsx(i,{variant:"body2",component:f,to:"#",children:n.SupplierInvoiceNumber})}),e.jsx(r,{item:!0,xs:4,sx:{my:.5},children:e.jsx(i,{variant:"body2",children:"الفرع :"})}),e.jsx(r,{item:!0,xs:8,sx:{my:.5},children:"المتكامل"})]})})]})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(X,{children:e.jsxs(J,{sx:{"& tr:last-of-type td":{borderBottom:"none"},"& thead tr th":{borderBottom:"none"},"& th:first-of-type, & td:first-of-type":{pl:{xs:2.5,md:5}},"& th:last-of-type, & td:last-of-type":{pr:{xs:6.25,md:8.75}}},children:[e.jsx(Z,{children:e.jsxs(T,{children:[e.jsx(t,{align:"center",children:"رقم المنتج"}),e.jsx(t,{align:"center",children:"كود المنتج"}),e.jsx(t,{sx:{pl:3},children:"الاسم"}),e.jsx(t,{align:"center",children:"الكمية"}),e.jsx(t,{align:"center",children:"سعر البيع"})]})}),e.jsx(Y,{children:n.order_entries.length===0?e.jsx(T,{children:e.jsx(t,{colSpan:8,align:"center",children:e.jsx(i,{variant:"body2",color:"textSecondary",children:"لا يوجد اصناف مضافة في الفاتورة"})})}):n.order_entries.map((c,j)=>e.jsxs(T,{children:[e.jsx(t,{align:"center",children:c.BarCodeNo}),e.jsx(t,{align:"center",children:c.Supplier_Item_ID}),e.jsxs(t,{sx:{pl:3,padding:"0px"},children:[e.jsx(i,{variant:"subtitle1",children:c.name}),e.jsx(i,{variant:"body2",children:c.DepartmentName})]}),e.jsx(t,{align:"center",children:c.QuantityOnOrder}),e.jsx(t,{align:"center",children:c.offerPrice})]},j))})]})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(C,{sx:{bgcolor:s.palette.mode===$.DARK?"dark.main":"primary.light"},children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{variant:"h6",children:"ملاحظات :"})}),e.jsx(r,{container:!0,justifyContent:"flex-end",spacing:v,children:e.jsx(r,{item:!0,sm:6,md:4,children:e.jsx(r,{container:!0,spacing:2,children:e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"right",variant:"subtitle1",children:"اجمالي الكمية:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(i,{align:"left",variant:"body2",children:h})})]})})})})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(z,{})}),e.jsx(r,{item:!0,xs:7,children:e.jsx(i,{variant:"h6",children:"اسم المستلم / التوقيع :"})}),e.jsx(r,{item:!0,xs:5,children:e.jsx(i,{variant:"h6",children:"اسم المشرف / التوقيع :"})})]})})]})})}),e.jsx(r,{item:!0,xs:12,lg:8,children:e.jsx(d,{direction:"row",justifyContent:"center",children:e.jsx(D,{children:e.jsx(ue,{trigger:()=>e.jsx(S,{variant:"contained",children:"طباعة"}),content:()=>a.current})})})})]})},Ne={p:0,"& > svg":{width:14,height:14},display:{xs:"none",md:"flex"}},Le=x.forwardRef((n,s)=>e.jsx(se,{direction:"left",ref:s,...n})),We=n=>{const s=k(),[a,h]=x.useState(!1),[c,j]=x.useState(""),[w,p]=x.useState([]),[g,y]=x.useState(!1),[l,u]=x.useState(null);x.useEffect(()=>{(async()=>{try{console.log("Fetching invoice status history for invoice ID:",n.invoiceData);const _=await _e(n.invoiceData.invoice_id);p(_)}catch(_){console.error("Error fetching invoice status history:",_)}})()},[]);const m=()=>{h(!a)},N=o=>{j(o.target.value)},L=()=>{console.log("Review posted:",c),h(!1),j("")},ne=o=>{u(o),y(!0)};return e.jsx(C,{title:"حالة الفاتورة",children:e.jsxs(r,{container:!0,spacing:v,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:0,children:[e.jsx(r,{item:!0,xs:12,md:6,lg:3,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"تاريخ الفاتورة"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"body2",children:n.invoiceData.date})})]})}),e.jsx(r,{item:!0,xs:12,sm:6,lg:2,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"حالة الفاتورة"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"body2",children:n.invoiceData.status})})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"الناقل"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"body2",children:"Fedex Express Delivery"})})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"الدفع"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"body2",children:"Credit Card"})})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"h5",children:"مبلغ الفاتورة"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{variant:"body2",children:n.invoiceData.total})})]})})]})}),e.jsx(me,{open:g,onClose:()=>y(!1),imageID:l}),e.jsxs(r,{item:!0,md:8,lg:9,children:[e.jsx(pe,{sx:{"& > li":{mb:2.75,[s.breakpoints.down("md")]:{flexDirection:"column","& > div":{px:0},"& > div:first-of-type":{textAlign:"left"}}},[s.breakpoints.down("md")]:{p:0}},children:w.map((o,_)=>e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(i,{variant:"h5",children:o.Status_name}),e.jsx(i,{variant:"body2",children:o.Start_date})]}),e.jsxs(be,{children:[e.jsx(ye,{color:o.Start_date!==null?"primary":"inherit",sx:Ne,children:e.jsx(le,{})}),e.jsx(fe,{sx:{bgcolor:o.Start_date!==null?"primary.main":"grey.400"}})]}),e.jsxs(Ce,{sx:{flex:3},children:[o.UploadDate&&e.jsx(ae,{"aria-label":"view file",onClick:()=>ne(o.ImageID),children:e.jsx(Te,{})}),e.jsx(i,{children:o.Comment})]})]},_))}),e.jsx(r,{container:!0,spacing:1,justifyContent:"center",children:e.jsx(r,{item:!0,children:e.jsxs(R,{sx:{display:{xs:"block",md:"none"}},children:[e.jsx(S,{variant:"contained",onClick:m,children:"Write a Review"}),e.jsx(Se,{open:a,TransitionComponent:Le,keepMounted:!0,onClose:m,sx:{"&>div:nth-of-type(3)":{justifyContent:"flex-end","&>div":{m:0,borderRadius:"0px",maxWidth:450,maxHeight:"100%",height:"100vh"}}},children:a&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{children:e.jsx(r,{container:!0,spacing:1,children:e.jsx(r,{item:!0,xs:12,children:e.jsx(q,{id:"outlined-basic1",fullWidth:!0,multiline:!0,rows:10,label:"Write a Review",value:c,onChange:N})})})}),e.jsxs(Ie,{children:[e.jsx(D,{children:e.jsx(S,{variant:"contained",onClick:L,children:"Post Review"})}),e.jsx(S,{variant:"text",onClick:m,color:"secondary",children:"Close"})]})]})})]})})})]}),e.jsx(r,{item:!0,md:4,lg:3,children:e.jsx(R,{sx:{display:{xs:"none",md:"block"}},children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(q,{id:"outlined-basic2",fullWidth:!0,multiline:!0,rows:10,label:"Write a Review",value:c,onChange:N})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(d,{direction:"row",children:e.jsx(D,{children:e.jsx(S,{variant:"contained",onClick:L,children:"Post Review"})})})})]})})})]})})};function P({children:n,value:s,index:a,...h}){return e.jsx("div",{role:"tabpanel",hidden:s!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...h,children:s===a&&e.jsx(R,{sx:{p:0},children:n})})}function A(n){return{id:`simple-tab-${n}`,"aria-controls":`simple-tabpanel-${n}`}}P.propTypes={children:H.node,index:H.number,value:H.number};const cr=()=>{const n=k(),{id:s}=ce(),a=de(),[h,c]=x.useState(!0),[j,w]=x.useState(null),p=oe(u=>u.customer.invoices.find(m=>m.invoice_id===parseInt(s,10)));x.useEffect(()=>{(async()=>{c(!0);try{await a(he(s))}catch(m){console.error("Error fetching invoice:",m),w(m.message),a(je({open:!0,message:"Error fetching invoice",variant:"alert",alert:{color:"error"},close:!1}))}finally{c(!1)}})()},[a,s]);const[g,y]=x.useState(0),l=(u,m)=>{y(m)};return h?e.jsxs(R,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:[e.jsx($e,{}),e.jsx(i,{variant:"h6",sx:{marginLeft:2},children:"...الفاتورة قيد التحميل"})]}):j||!p?e.jsxs(R,{sx:{textAlign:"center",marginTop:4},children:[e.jsx(i,{variant:"h6",color:"error",children:"حدث خطاء عند تحميل البيانات."}),e.jsx(f,{to:"/invoices",children:"العودة الى"})]}):e.jsxs(xe,{children:[e.jsxs(ke,{value:g,indicatorColor:"primary",textColor:"primary",onChange:l,variant:"scrollable","aria-label":"simple tabs example",sx:{"& a":{minHeight:"auto",minWidth:10,px:1,py:1.5,mr:2.25,color:n.palette.mode===$.DARK?"grey.600":"grey.900",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},"& a.Mui-selected":{color:"primary.main"},"& a > svg":{marginBottom:"0px !important",marginRight:1.25},mb:3},children:[e.jsx(M,{icon:e.jsx(Pe,{}),component:f,to:"#",label:"الفاتورة",...A(0)}),e.jsx(M,{icon:e.jsx(U,{}),component:f,to:"#",label:"سند الاستلام",...A(1)}),e.jsx(M,{icon:e.jsx(we,{}),component:f,to:"#",label:"الحالة",...A(2)})]}),e.jsx(P,{value:g,index:0,children:e.jsx(Ee,{invoiceData:p})}),e.jsx(P,{value:g,index:1,children:e.jsx(Fe,{invoiceData:p})}),e.jsx(P,{value:g,index:2,children:e.jsx(We,{invoiceData:p})})]})};export{cr as default};
